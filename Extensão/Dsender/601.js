"use strict";(self.webpackChunkwasender_chrome_extension=self.webpackChunkwasender_chrome_extension||[]).push([[601],{6601:(V,R,d)=>{d.r(R),d.d(R,{BulkGroupMessagePageModule:()=>Ao});var l=d(6814),v=d(6223),N=d(3427),_=d(5861),L=d(2743),h=d(4631),O=d(7228),w=d(5258),D=d(3964),e=d(9291),b=d(6461);const f=new e.OlP("NGXTENSION_LOCAL_STORAGE",{providedIn:"root",factory:()=>localStorage});function P(o){return"function"==typeof o}function J(o,i){try{return o()}catch{return i}}function ie(o){return"undefined"===o?void 0:JSON.parse(o)}const A=(o,i={})=>{if(function k(o){return"defaultValue"in o}(i)){const r=P(i.defaultValue)?i.defaultValue():i.defaultValue;return se(o,i,r)}return se(o,i,void 0)},se=(o,i,r)=>{const n=P(i.stringify)?i.stringify:JSON.stringify,t=P(i.parse)?i.parse:ie,a=i.storageSync??!0;return function m(o,i,r){!i&&(0,e.gHi)(o);const n=i??(0,e.f3M)(e.zs3);return r?(0,e.r_H)(n,r):n}(A,i.injector,()=>{const s=(0,e.f3M)(f),c=(0,e.f3M)(e.ktI),p=(0,e.f3M)(l.K0).defaultView;if(!p)throw new Error("Cannot access to window element");const g=J(()=>s.getItem(o),null),u=(0,e.tdS)(g?J(()=>t(g),r):r),C=E=>{const T=J(()=>void 0===E?null:n(E),null);try{if(T===s.getItem(o))return;null===T?s.removeItem(o):s.setItem(o,T),p.dispatchEvent(new StorageEvent("storage",{key:o,newValue:T,storageArea:s}))}catch{}};if(a){const E=u.set,T=u.update,y=S=>{let I;T(So=>I=S(So)),C(I)};u.set=S=>{E(S),C(S)},u.update=y;const F=S=>{if(S.storageArea===s&&S.key===o){const I=null!==S.newValue?t(S.newValue):r;u.set(I)}};p.addEventListener("storage",F),c.onDestroy(()=>{p.removeEventListener("storage",F)})}return u})};class Q{static getMappedText(i,r){return r?.replace(/{{(.*?)}}/g,(t,a)=>{const s=a.toLowerCase(),c=Object.keys(i).reduce((p,g)=>(p[`${g}`.toLowerCase()]=i[g],p),{});return c.hasOwnProperty(s)?c[s]:""})}static getInvalidVariables(i,r){const n=/{{(.*?)}}/g;let t;const a=[],s=r.map(c=>`${c}`.toLowerCase());for(;null!==(t=n.exec(i));)s.includes(t[1].toLowerCase())||a.push(t[1]);return a}static getValidVariables(i,r){const n=/{{(.*?)}}/g;let t;const a=[],s=r.map(c=>`${c}`.toLowerCase());for(;null!==(t=n.exec(i));){const c=t[1].toLowerCase();s.includes(c)&&!a.includes(t[1])&&a.push(t[1])}return a}}var re=d(3932),B=d(2017),le=d(8645),ce=d(2572);let X=(()=>{var o;class i{constructor(n){this.excelService=n,this.excelDetails=null,this.worksheet=[],this.columnNames=(0,e.tdS)([]),this.activeSheet=A("activeSheet"),this.selectedPhoneColumn=A("selectedPhoneColumn"),this.startRow=A("startRow"),this.endRow=A("startendRowRow"),this.numberColumn=(0,e.Flj)(()=>{const t=this.worksheet?.[0];let a=this.columnNames()?.[0];for(const s of this.columnNames())try{const c=`${t[s]}`?.trim(),p=parseInt(`${c}`);if(!isNaN(p)&&c?.length>=6){a=s;break}}catch{}return a})}init(){this.columnNames()||this.columnNames.set([])}selectWorksheet(n){var t=this;return(0,_.Z)(function*(){t.activeSheet.set(n);try{if(t.file){const a=yield t.excelService.readSheet(t.file,t.activeSheet());t.worksheet=a.data,t.columnNames.set(a.columns)}}catch(a){console.error(a)}t.selectedPhoneColumn.set(t.columnNames().includes(t.selectedPhoneColumn())?t.selectedPhoneColumn():t.numberColumn())})()}getInitActiveSheet(){return this.excelDetails?.sheetNames.includes(this.activeSheet())?this.activeSheet():this.excelDetails?.sheetNames[0]}}return(o=i).\u0275fac=function(n){return new(n||o)(e.LFG(b.xB))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),i})();var Y=d(9955),he=d(8377),ee=d(7122),H=d(2639);class ae{constructor(i,r,n,t,a){this.number=i,this.originalNumber=r,this.correctNumber=n,this.isValid=t,this.sheetIndex=a}}class pe{constructor(i,r,n){this.validNumber=i,this.invalidNumber=r,this.phoneData=n}}let q=(()=>{var o;class i{constructor(n,t,a,s,c,p,g){this.waService=n,this.waBGService=t,this.sheet=a,this.extDataService=s,this.routingService=c,this.broadcastService=p,this.log=g,this.message=A("message"),this.sendWithCaption=A("sendWithCaption"),this.addUnsubscriptionText=A("addUnsubscriptionText"),this.unsubscriptionText=A("unsubscriptionText"),this.randomDelay=A("randomDelay"),this.waitForMin=A("waitForMin"),this.waitAfterpeople=A("waitAfterpeople"),this.selectedCountryInfo=A("selectedCountryInfo"),this.timegapSettings=A("timegapSettings"),this.batchSettings=A("batchSettings"),this.banAlertTime=A("banAlertTime"),this.attachments=[],this.phoneNumberData=null,this.proFeauters="",this.forceNumbersLimit=0,this.showRedraftModal=new le.x,this.showRedraftModal$=this.showRedraftModal.asObservable(),this.isValidUnsubscripitonText=(0,e.Flj)(()=>{const u=this.unsubscriptionText()?.match(/\{[^{}]+\}/g);return null!==u&&1===u.length})}redraftMsg(){this.showRedraftModal.next(!0)}updateAttachmentsOverall(n){var t=this;return(0,_.Z)(function*(){t.sendWithCaption.set(n),yield t.waService.sendSetAttachmentMessage(t.attachments)})()}init(){var n=this;return(0,_.Z)(function*(){n.forceNumbersLimit=0;const t=yield n.waService.getAttachments();n.attachments=JSON.parse(JSON.stringify(t))?.map(a=>new w.M(a.name,a.size,a.type,a.base64))||[],n.unsubscriptionText()||n.unsubscriptionText.set(h.MessageTemplate.DEFAULT_UNSUBSCRIPTION_TEXT)})()}get proceesablePhoneData(){const n=new pe(0,0,[]);let t=this.sheet.endRow()-1;return this.forceNumbersLimit&&t>this.forceNumbersLimit&&(t=this.forceNumbersLimit),n.phoneData=this.sheet.excelDetails?this.sheet.startRow()>=2?this.phoneNumberData?.phoneData?.slice(this.sheet.startRow()-2,t):this.phoneNumberData?.phoneData?.slice(0,t):this.forceNumbersLimit?this.phoneNumberData?.phoneData?.slice(0,this.forceNumbersLimit):this.phoneNumberData?.phoneData,n.validNumber=n?.phoneData?.filter(a=>a.isValid)?.length,n.invalidNumber=n?.phoneData?.length-n.validNumber,n}sendMessages(n,t){var a=this;return(0,_.Z)(function*(){if(a.processingMessageSending=!0,n===h.Operation.OPERATION_FILTER&&!a.extDataService.isPro())return a.proFeauters=B.B.FILTER,void(a.processingMessageSending=!1);const s=yield a.broadcastService.getBroadcastsCount(),c=yield a.createBroadcast(n),p=a.getDefaultBulkMessage(c.id);switch(p.metaData={sendSourceAction:t,addUnsubscriptionText:a.addUnsubscriptionText(),excelUsed:!!a.sheet.excelDetails,freeMessageLimit:a.extDataService.appConfig.freeMessageLimit,totalBroadCasts:s},a.proceesablePhoneData?.phoneData.forEach(g=>{p.numbers.push({contact:`${g.correctNumber}`});const C=a.extDataService.isPro()&&a.sheet.worksheet?.[g.sheetIndex]||{};p.messages.push(C?Q.getMappedText(C,c.msgToBeSent()):c.msgToBeSent())}),n){case h.Operation.OPERATION_SEND_MESSAGE:const g=Q.getValidVariables(a.message(),a.sheet.columnNames())?.filter(u=>u?.trim());a.log.log("message_job",{messageText:c.msgToBeSent(),...p.metaData,timeGap:p.randomizeDelay,feature_time_gap:a.timegapSettings(),feature_batching:a.batchSettings(),batchGap:p.batchGap,batchSize:p.batchSize,sendAsCaption:p.isCaption,feature_attachment:p.attachment,attachmentCounts:p.attachment&&a.attachments?a.attachments.length:0,attachmentSizes:p.attachment&&a.attachments?a.attachments.map(u=>u.size).join(", "):0,isPro:p.isPro,messaging_started_at:Date.now(),numbers_count:p.numbers.length,usingPersonalization:g.length>0}),yield a.waBGService.sendBulkMessages(p);break;case h.Operation.OPERATION_FILTER:p.randomizeDelay=!1,p.messageGap=0,p.batchGap=0,p.batchSize=0,yield a.waBGService.sendFilter(p)}a.processingMessageSending=!1,a.routingService.navigate([O.ME.currentMessagingReport()])})()}createBroadcast(n){var t=this;return(0,_.Z)(function*(){const a=`${Date.now()}`,s=t.attachments.map(function(){var p=(0,_.Z)(function*(g){const u=yield t.broadcastService.uploadAttachments(a,encodeURIComponent(g.name),g);return new h.MessageAttachmentDetails(g.name,u,g.size,g.type)});return function(g){return p.apply(this,arguments)}}()),c=yield Promise.all(s);return yield t.broadcastService.saveBroadcast(new h.Broadcast(a,n,t.extDataService.currentUser.phoneNumber,t.addUnsubscriptionText()?t.unsubscriptionText():"",t.addUnsubscriptionText(),c,t.sendWithCaption(),t.message(),Date.now()))})()}getDefaultBulkMessage(n){return new h.BulkMessage(n,this.extDataService.currentUser.phoneNumber,this.sheet.excelDetails?.fileName||"Manual",[],[],this.batchSettings()&&this.extDataService.isPro()?this.waitAfterpeople():0,this.batchSettings()&&this.extDataService.isPro()?this.waitForMin():0,this.extDataService.isPro(),this.timegapSettings()&&this.extDataService.isPro()?this.randomDelay():0,this.timegapSettings()&&this.extDataService.isPro(),!!this.attachments?.length,this.sendWithCaption(),Date.now(),{})}createPhoneNumbersData(n){let t=0,a=0,s=[];n.map((c,p)=>{const g=`${c}`?.replace(/[^0-9]/g,"")?.replace(/^0+/,"");if(g.trim()){const u="XX"===this.selectedCountryInfo().code,C=u?(0,re.S)(`+${g}`):(0,re.S)(`${g}`,this.selectedCountryInfo().code);if(C?.isValid()){t++;const E=u?g:C?.nationalNumber,T=u?g:`${this.selectedCountryInfo().dial_code}${C?.nationalNumber}`;s.push(new ae(E,g,T,!0,p))}else if(!g.startsWith("52")||"XX"!==this.selectedCountryInfo().code&&"52"!==this.selectedCountryInfo().code){a++;const E=u?g:`${this.selectedCountryInfo().dial_code}${g}`;s.push(new ae(g,g,E,!1,p))}else{t++;const E="52"===this.selectedCountryInfo().code?g.slice(0,2):g;s.push(new ae(E,g,g,!0,p))}}}),this.phoneNumberData=new pe(t,a,s)}}return(o=i).\u0275fac=function(n){return new(n||o)(e.LFG(ce.o),e.LFG(ce.j),e.LFG(X),e.LFG(Y.a),e.LFG(he.Z),e.LFG(ee.Mr),e.LFG(H.m))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),i})();var z=function(o){return o.IGNORE_AND_SEND="Ignore and send",o.FIX_AND_SEND="Fix and send",o.NO_ERROR_AND_SEND="No error and send",o.FILTER="Filter",o}(z||{}),G=function(o){return o.PROMOTIONAL_MESSAGE_ERROR="PROMOTIONAL_MESSAGE_ERROR",o.UPDATE_MESSAGE_ERROR="UPDATE_MESSAGE_ERROR",o}(G||{}),j=function(o){return o.HIGH_MESSAGE_COUNT_ERROR="highMessageCountError",o.NEW_WA_NUMBER_ERROR="NEW_WA_NUMBER_ERROR",o.HIGH_MESSAGE_SPEED_ERROR="HIGH_MESSAGE_SPEED_ERROR",o.PROMO_MSGS_ERROR="PROMO_MSGS_ERROR",o.UNSUBSCRIBE_NOT_ADDED="UNSUBSCRIBE_NOT_ADDED",o}(j||{});class U{constructor(i,r){this.label=i,this.action=r,this.isLoading=!1,this.action=this.wrapWithLoading(r)}wrapWithLoading(i){var r=this;return(0,_.Z)(function*(){r.isLoading=!0;try{yield i()}finally{r.isLoading=!1}})}}var M=function(o){return o.INPROGRESS="INPROGRESS",o.PROCESSED="PROCESSED",o.CANCELLED="CANCELLED",o.PENDING="PENDING",o}(M||{});class W{constructor(i,r,n,t=(()=>!1),a=M.PENDING,s=!1){this.id=i,this.actionBtn=r,this.skipBtn=n,this.checkIfErrorOccurred=t,this.errorProcessState=a,this.isAllowedForFreeUser=s}}let K=(()=>{var o;class i{constructor(n,t,a,s,c){this.store=n,this.extAuth=t,this.userSerivce=a,this.sheet=s,this.logger=c,this.highMessageCountError=(0,e.tdS)(null),this.newWANumberError=(0,e.tdS)(null),this.highMsgsSpeedError=(0,e.tdS)(null),this.promoMsgsError=(0,e.tdS)(null),this.unsubscribeNotAdded=(0,e.tdS)(null),this.activeErrorSegment=(0,e.tdS)(G.PROMOTIONAL_MESSAGE_ERROR),this.textMsgWhileCalculatingError=(0,e.tdS)(""),this.activeSegmentErrors=(0,e.tdS)([]),this.showErrorModal=new le.x,this.showErrorModal$=this.showErrorModal.asObservable(),this.fixingAll=!1,this.inprogressError=(0,e.Flj)(()=>this.activeSegmentErrors().find(p=>p.errorProcessState===M.INPROGRESS)),this.inprogressErrorIndex=(0,e.Flj)(()=>this.activeSegmentErrors().findIndex(p=>p.errorProcessState===M.INPROGRESS)),this.activeErrorSegment.set(G.PROMOTIONAL_MESSAGE_ERROR)}get messageRedrafted(){return this.textMsgWhileCalculatingError()?.trim()&&this.store.message()?.trim()===this.textMsgWhileCalculatingError()?.trim()}onShowErrorModal(){this.showErrorModal.next(!0)}recalculateErrors(){this.store.forceNumbersLimit=0,this.createHighMessageCountError(),this.createNewWANumberError(),this.createHighMsgsSpeedError(),this.createPromoMsgsError(),this.createUnsubscribeNotAddedError();const n=this.getActiveSegmentErrors();return n?.length&&(n[0].errorProcessState=M.INPROGRESS),this.activeSegmentErrors.set(n),n}createHighMessageCountError(){var n=this;const t=this.extAuth.getUserDetails()?.isNewNumber();this.highMessageCountError.set(new W(j.HIGH_MESSAGE_COUNT_ERROR,new U("Reduce to first 500",(0,_.Z)(function*(){n.store.forceNumbersLimit=n.activeErrorSegment()===G.PROMOTIONAL_MESSAGE_ERROR?t?100:500:t?200:500,n.logger.log("message_count_error",{resolve:!0,forceNumbersLimit:n.store.forceNumbersLimit,numbersCount:n.store.proceesablePhoneData.phoneData?.length,activeTab:n.activeErrorSegment(),isNewNumber:t}),n.nextStep(M.PROCESSED)})),new U("Keep all",(0,_.Z)(function*(){n.logger.log("message_count_error",{resolve:!1}),n.nextStep(M.CANCELLED)})),()=>this.activeErrorSegment()===G.PROMOTIONAL_MESSAGE_ERROR?t?this.store.proceesablePhoneData.phoneData?.length>100:this.store.proceesablePhoneData.phoneData?.length>500:t?this.store.proceesablePhoneData.phoneData?.length>200:this.store.proceesablePhoneData.phoneData?.length>500,M.PENDING))}createNewWANumberError(){var n=this;const t=this.extAuth.getUserDetails()?.isNewNumber();this.newWANumberError.set(new W(j.NEW_WA_NUMBER_ERROR,new U("No, its an old number",(0,_.Z)(function*(){n.extAuth.getUserDetails()?.setOldNumber(),yield n.userSerivce.saveUserDetails(n.extAuth.getUserDetails()),n.logger.log("new_wa_number_error",{resolve:!0}),n.nextStep(M.PROCESSED)})),new U("Skip",(0,_.Z)(function*(){n.logger.log("new_wa_number_error",{resolve:!1}),n.nextStep(M.CANCELLED)})),()=>t||!1,M.PENDING))}createHighMsgsSpeedError(){var n=this;const t=this.extAuth.getUserDetails()?.isNewNumber();this.highMsgsSpeedError.set(new W(j.HIGH_MESSAGE_SPEED_ERROR,new U("Apply recommended gaps",(0,_.Z)(function*(){n.store.timegapSettings.set(!0),n.store.batchSettings.set(!0),n.store.waitForMin.set(10),n.activeErrorSegment()===G.PROMOTIONAL_MESSAGE_ERROR?t?(n.store.waitAfterpeople.set(20),n.store.randomDelay.set(10)):(n.store.waitAfterpeople.set(50),n.store.randomDelay.set(15)):t?(n.store.waitAfterpeople.set(40),n.store.randomDelay.set(10)):(n.store.waitAfterpeople.set(50),n.store.randomDelay.set(10)),n.logger.log("high_msg_speed_error",{resolve:!0,timegapSettings:n.store.timegapSettings(),batchSettings:n.store.batchSettings(),waitForMin:n.store.waitForMin(),waitAfterpeople:n.store.waitAfterpeople(),randomDelay:n.store.randomDelay(),activeTab:n.activeErrorSegment(),isNewNumber:t}),n.nextStep(M.PROCESSED)})),new U("Skip",(0,_.Z)(function*(){n.logger.log("high_msg_speed_error",{resolve:!1,timegapSettings:n.store.timegapSettings(),batchSettings:n.store.batchSettings(),waitForMin:n.store.waitForMin(),waitAfterpeople:n.store.waitAfterpeople(),randomDelay:n.store.randomDelay(),activeTab:n.activeErrorSegment(),isNewNumber:t}),n.nextStep(M.CANCELLED)})),()=>this.checkIfHighSpeedMsging(t),M.PENDING))}checkIfHighSpeedMsging(n){const t=!this.store.timegapSettings()||!this.store.batchSettings();let a=!1;return this.store.proceesablePhoneData.phoneData?.length>10&&(a=this.activeErrorSegment()===G.PROMOTIONAL_MESSAGE_ERROR?n?this.store.waitForMin()<=10||this.store.waitAfterpeople()>=20||this.store.randomDelay()<=10:this.store.waitForMin()<=10||this.store.waitAfterpeople()>=50||this.store.randomDelay()<=15:n?this.store.waitForMin()<=10||this.store.waitAfterpeople()>=40||this.store.randomDelay()<=10:this.store.waitForMin()<=10||this.store.waitAfterpeople()>=50||this.store.randomDelay()<=10),t||a}createPromoMsgsError(){var n=this;this.store.message()!==this.textMsgWhileCalculatingError()&&this.promoMsgsError.set(new W(j.PROMO_MSGS_ERROR,new U("Redraft with AI",(0,_.Z)(function*(){let t=[];n.sheet.excelDetails&&n.sheet.columnNames()?.length>1&&(t=n.sheet.columnNames().filter(s=>s!==n.sheet.selectedPhoneColumn()));const a=yield n.userSerivce.redraftTextMessage(n.store.message(),t);n.logger.log("promo_msgs_error",{resolve:!0,message:n.store.message(),aiMessage:a}),n.textMsgWhileCalculatingError.set(n.store.message()||""),n.store.message.set(a),n.nextStep(M.PROCESSED)})),new U("Skip",(0,_.Z)(function*(){n.logger.log("promo_msgs_error",{resolve:!1,message:n.store.message()}),n.nextStep(M.CANCELLED)})),()=>this.store.message()!==this.textMsgWhileCalculatingError(),M.PENDING))}createUnsubscribeNotAddedError(){var n=this;this.unsubscribeNotAdded.set(new W(j.UNSUBSCRIBE_NOT_ADDED,new U("Add Unsubscription Text",(0,_.Z)(function*(){n.store.addUnsubscriptionText.set(!0),n.store.unsubscriptionText.set(h.MessageTemplate.DEFAULT_UNSUBSCRIPTION_TEXT),n.logger.log("unsubscribe_not_added_error",{resolve:!0,addUnsubscriptionText:n.store.addUnsubscriptionText(),unsubscriptionText:n.store.unsubscriptionText()}),n.nextStep(M.PROCESSED)})),new U("Skip",(0,_.Z)(function*(){n.logger.log("unsubscribe_not_added_error",{resolve:!1}),n.nextStep(M.CANCELLED)})),()=>!this.store.addUnsubscriptionText()||!this.store.unsubscriptionText()||!this.store.isValidUnsubscripitonText(),M.PENDING,!0))}getActiveSegmentErrors(){let n=[];return n=this.activeErrorSegment()===G.PROMOTIONAL_MESSAGE_ERROR?this.getPromoErrorsToBeProcessed():this.getUpdatesErrorsToBeProcessed(),n}getAllOccurredErrors(){return this.getAllErrors()?.filter(n=>n?.checkIfErrorOccurred())}getAllErrors(){return[this.highMessageCountError(),this.newWANumberError(),this.highMsgsSpeedError(),this.promoMsgsError(),this.unsubscribeNotAdded()].filter(n=>null!==n)}nextStep(n){const t=this.inprogressErrorIndex(),a=this.activeSegmentErrors();t>-1&&(a[t].errorProcessState=n),t+1<a.length?a[t+1].errorProcessState=M.INPROGRESS:this.store.sendMessages(h.Operation.OPERATION_SEND_MESSAGE,z.FIX_AND_SEND),this.activeSegmentErrors.set(a)}getAllPromoErros(){return[this.highMessageCountError(),this.newWANumberError(),this.highMsgsSpeedError(),this.promoMsgsError(),this.unsubscribeNotAdded()].filter(n=>null!==n)}getPromoErrorsToBeProcessed(){return this.getAllPromoErros().filter(n=>(n.errorProcessState===M.PENDING||n.errorProcessState===M.INPROGRESS)&&n.checkIfErrorOccurred())}getAllUpdatesErrors(){return[this.highMessageCountError(),this.newWANumberError(),this.highMsgsSpeedError(),this.unsubscribeNotAdded()].filter(n=>null!==n)}getUpdatesErrorsToBeProcessed(){return this.getAllUpdatesErrors().filter(n=>(n.errorProcessState===M.PENDING||n.errorProcessState===M.INPROGRESS)&&n.checkIfErrorOccurred())}fixAll(){var n=this;return(0,_.Z)(function*(){n.fixingAll=!0;const t=n.activeSegmentErrors();for(const a of t)if(a.errorProcessState===M.PENDING||a.errorProcessState===M.INPROGRESS){a.errorProcessState=M.INPROGRESS;try{yield a.actionBtn.action()}catch(s){console.error("Error while processing error:",s,a)}a.errorProcessState=M.PROCESSED}n.logger.log("fix_all_errors",n.getErrorsMap(t)),n.fixingAll=!1})()}getErrorsMap(n){const t=n.map(s=>s.id),a={};return t.forEach(s=>{a[s]=!0}),a}}return(o=i).\u0275fac=function(n){return new(n||o)(e.LFG(q),e.LFG(Y.a),e.LFG(ee.KD),e.LFG(X),e.LFG(H.m))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),i})();var fe=d(6593),ge=d(4517),xe=d(7825),Me=d(4825);const Ce=["fileSelector"];function be(o,i){if(1&o&&(e.TgZ(0,"div",8),e._uU(1),e.qZA()),2&o){const r=e.oxw(2);e.xp6(1),e.Oqu(r.dropZoneLabel)}}function ve(o,i){if(1&o){const r=e.EpF();e.TgZ(0,"div")(1,"input",9),e.NdJ("click",function(t){e.CHM(r);const a=e.oxw(2);return e.KtG(a.openFileSelector(t))}),e.qZA()()}if(2&o){const r=e.oxw(2);e.xp6(1),e.s9C("value",r.browseBtnLabel),e.Q6J("className",r.browseBtnClassName)}}function Oe(o,i){if(1&o&&(e.YNc(0,be,2,1,"div",6),e.YNc(1,ve,2,2,"div",7)),2&o){const r=e.oxw();e.Q6J("ngIf",r.dropZoneLabel),e.xp6(1),e.Q6J("ngIf",r.showBrowseBtn)}}function Pe(o,i){}const Ee=function(o){return{openFileSelector:o}};class te{constructor(i,r){this.relativePath=i,this.fileEntry=r}}let Te=(()=>{var o;class i{constructor(n){this.template=n}}return(o=i).\u0275fac=function(n){return new(n||o)(e.Y36(e.Rgc))},o.\u0275dir=e.lG2({type:o,selectors:[["","ngx-file-drop-content-tmp",""]]}),i})(),de=(()=>{var o;class i{get disabled(){return this._disabled}set disabled(n){this._disabled=null!=n&&"false"!=`${n}`}constructor(n,t){this.zone=n,this.renderer=t,this.accept="*",this.directory=!1,this.multiple=!0,this.dropZoneLabel="",this.dropZoneClassName="ngx-file-drop__drop-zone",this.useDragEnter=!1,this.contentClassName="ngx-file-drop__content",this.showBrowseBtn=!1,this.browseBtnClassName="btn btn-primary btn-xs ngx-file-drop__browse-btn",this.browseBtnLabel="Browse files",this.onFileDrop=new e.vpe,this.onFileOver=new e.vpe,this.onFileLeave=new e.vpe,this.isDraggingOverDropZone=!1,this.globalDraggingInProgress=!1,this.files=[],this.numOfActiveReadEntries=0,this.helperFormEl=null,this.fileInputPlaceholderEl=null,this.dropEventTimerSubscription=null,this._disabled=!1,this.openFileSelector=a=>{this.fileSelector&&this.fileSelector.nativeElement&&this.fileSelector.nativeElement.click()},this.globalDragStartListener=this.renderer.listen("document","dragstart",a=>{this.globalDraggingInProgress=!0}),this.globalDragEndListener=this.renderer.listen("document","dragend",a=>{this.globalDraggingInProgress=!1})}ngOnDestroy(){this.dropEventTimerSubscription&&(this.dropEventTimerSubscription.unsubscribe(),this.dropEventTimerSubscription=null),this.globalDragStartListener(),this.globalDragEndListener(),this.files=[],this.helperFormEl=null,this.fileInputPlaceholderEl=null}onDragOver(n){this.useDragEnter?(this.preventAndStop(n),n.dataTransfer&&(n.dataTransfer.dropEffect="copy")):!this.isDropzoneDisabled()&&!this.useDragEnter&&n.dataTransfer&&(this.isDraggingOverDropZone||(this.isDraggingOverDropZone=!0,this.onFileOver.emit(n)),this.preventAndStop(n),n.dataTransfer.dropEffect="copy")}onDragEnter(n){!this.isDropzoneDisabled()&&this.useDragEnter&&(this.isDraggingOverDropZone||(this.isDraggingOverDropZone=!0,this.onFileOver.emit(n)),this.preventAndStop(n))}onDragLeave(n){this.isDropzoneDisabled()||(this.isDraggingOverDropZone&&(this.isDraggingOverDropZone=!1,this.onFileLeave.emit(n)),this.preventAndStop(n))}dropFiles(n){if(!this.isDropzoneDisabled()&&(this.isDraggingOverDropZone=!1,n.dataTransfer)){let t;t=n.dataTransfer.items?n.dataTransfer.items:n.dataTransfer.files,this.preventAndStop(n),this.checkFiles(t)}}uploadFiles(n){!this.isDropzoneDisabled()&&n.target&&(this.checkFiles(n.target.files||[]),this.resetFileInput())}getFakeDropEntry(n){const t={name:n.name,isDirectory:!1,isFile:!0,file:a=>a(n)};return new te(t.name,t)}checkFile(n){if(n){if("webkitGetAsEntry"in n){let t=n.webkitGetAsEntry();if(t){if(t.isFile){const a=new te(t.name,t);this.addToQueue(a)}else t.isDirectory&&this.traverseFileTree(t,t.name);return}}this.addToQueue(this.getFakeDropEntry(n))}}checkFiles(n){for(let t=0;t<n.length;t++)this.checkFile(n[t]);this.dropEventTimerSubscription&&this.dropEventTimerSubscription.unsubscribe(),this.dropEventTimerSubscription=(0,Me.H)(200,200).subscribe(()=>{if(this.files.length>0&&0===this.numOfActiveReadEntries){const t=this.files;this.files=[],this.onFileDrop.emit(t)}})}traverseFileTree(n,t){if(n.isFile){const a=new te(t,n);this.files.push(a)}else{t+="/";const a=n.createReader();let s=[];const c=()=>{this.numOfActiveReadEntries++,a.readEntries(p=>{if(p.length)s=s.concat(p),c();else if(0===s.length){const g=new te(t,n);this.zone.run(()=>{this.addToQueue(g)})}else for(let g=0;g<s.length;g++)this.zone.run(()=>{this.traverseFileTree(s[g],t+s[g].name)});this.numOfActiveReadEntries--})};c()}}resetFileInput(){if(this.fileSelector&&this.fileSelector.nativeElement){const n=this.fileSelector.nativeElement,t=n.parentElement,a=this.getHelperFormElement(),s=this.getFileInputPlaceholderElement();t!==a&&(this.renderer.insertBefore(t,s,n),this.renderer.appendChild(a,n),a.reset(),this.renderer.insertBefore(t,n,s),this.renderer.removeChild(t,s))}}getHelperFormElement(){return this.helperFormEl||(this.helperFormEl=this.renderer.createElement("form")),this.helperFormEl}getFileInputPlaceholderElement(){return this.fileInputPlaceholderEl||(this.fileInputPlaceholderEl=this.renderer.createElement("div")),this.fileInputPlaceholderEl}isDropzoneDisabled(){return this.globalDraggingInProgress||this.disabled}addToQueue(n){this.files.push(n)}preventAndStop(n){n.stopPropagation(),n.preventDefault()}}return(o=i).\u0275fac=function(n){return new(n||o)(e.Y36(e.R0b),e.Y36(e.Qsj))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ngx-file-drop"]],contentQueries:function(n,t,a){if(1&n&&e.Suo(a,Te,5,e.Rgc),2&n){let s;e.iGM(s=e.CRH())&&(t.contentTemplate=s.first)}},viewQuery:function(n,t){if(1&n&&e.Gf(Ce,7),2&n){let a;e.iGM(a=e.CRH())&&(t.fileSelector=a.first)}},inputs:{accept:"accept",directory:"directory",multiple:"multiple",dropZoneLabel:"dropZoneLabel",dropZoneClassName:"dropZoneClassName",useDragEnter:"useDragEnter",contentClassName:"contentClassName",showBrowseBtn:"showBrowseBtn",browseBtnClassName:"browseBtnClassName",browseBtnLabel:"browseBtnLabel",disabled:"disabled"},outputs:{onFileDrop:"onFileDrop",onFileOver:"onFileOver",onFileLeave:"onFileLeave"},decls:7,vars:15,consts:[[3,"className","drop","dragover","dragenter","dragleave"],[3,"className"],["type","file",1,"ngx-file-drop__file-input",3,"accept","multiple","change"],["fileSelector",""],["defaultContentTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","ngx-file-drop__drop-zone-label",4,"ngIf"],[4,"ngIf"],[1,"ngx-file-drop__drop-zone-label"],["type","button",3,"className","value","click"]],template:function(n,t){if(1&n&&(e.TgZ(0,"div",0),e.NdJ("drop",function(s){return t.dropFiles(s)})("dragover",function(s){return t.onDragOver(s)})("dragenter",function(s){return t.onDragEnter(s)})("dragleave",function(s){return t.onDragLeave(s)}),e.TgZ(1,"div",1)(2,"input",2,3),e.NdJ("change",function(s){return t.uploadFiles(s)}),e.qZA(),e.YNc(4,Oe,2,2,"ng-template",null,4,e.W1O),e.YNc(6,Pe,0,0,"ng-template",5),e.qZA()()),2&n){const a=e.MAs(5);e.ekj("ngx-file-drop__drop-zone--over",t.isDraggingOverDropZone),e.Q6J("className",t.dropZoneClassName),e.xp6(1),e.Q6J("className",t.contentClassName),e.xp6(1),e.Q6J("accept",t.accept)("multiple",t.multiple),e.uIk("directory",t.directory||void 0)("webkitdirectory",t.directory||void 0)("mozdirectory",t.directory||void 0)("msdirectory",t.directory||void 0)("odirectory",t.directory||void 0),e.xp6(4),e.Q6J("ngTemplateOutlet",t.contentTemplate||a)("ngTemplateOutletContext",e.VKq(13,Ee,t.openFileSelector))}},dependencies:[l.O5,l.tP],styles:[".ngx-file-drop__drop-zone[_ngcontent-%COMP%]{height:100px;margin:auto;border:2px dotted #0782d0;border-radius:30px}.ngx-file-drop__drop-zone--over[_ngcontent-%COMP%]{background-color:#93939380}.ngx-file-drop__content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100px;color:#0782d0}.ngx-file-drop__drop-zone-label[_ngcontent-%COMP%]{text-align:center}.ngx-file-drop__file-input[_ngcontent-%COMP%]{display:none}"]}),i})(),we=(()=>{var o;class i{}return(o=i).\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o,bootstrap:[de]}),o.\u0275inj=e.cJS({imports:[l.ez]}),i})();var ne=d(1486),Ze=d(6358),_e=d(8043);let me=(()=>{var o;class i{deleteTemplate(n){var t=this;return(0,_.Z)(function*(){yield t.templateService.deleteTemplate(n.id),t.templates.mutate(a=>{const s=a.findIndex(c=>c.id===n.id);s>=0&&a.splice(s,1)})})()}constructor(n,t,a,s,c){this.templateService=n,this.store=t,this.extAuth=a,this.log=s,this.uiService=c,this.templateName="",this.savingtemplate=!1,this.templates=(0,e.tdS)([]),this.activeTemplateId=A("activeTemplateId"),this.search=(0,e.tdS)(""),this.filterTemplates=(0,e.Flj)(()=>{const p=this.search();return p?this.templates().filter(g=>{const u=g.name.toLowerCase(),C=p.toLowerCase();return u.includes(C)}):this.templates()}),this.getActiveTemplate=(0,e.Flj)(()=>this.templates().find(p=>p.id===this.activeTemplateId()))}useTemplate(n){var t=this;return(0,_.Z)(function*(){if(t.extAuth.isPro()){t.store.message.set(n.template),t.log.log("use_template_event",{name:n.name,attachmentNumber:n.attachmentDetails.length,hasUnsubscriptionText:n.addUnsubscriptionText,hasSendWithCaption:n.sendWithCaption});const a=n.attachmentDetails.map(s=>t.templateService.fetchAttachmentsFromUrl(s.url));t.store.attachments=yield Promise.all(a),t.store.attachments=t.store.attachments.filter(s=>s),t.store.sendWithCaption.set(n.sendWithCaption),t.store.addUnsubscriptionText.set(n.addUnsubscriptionText),t.store.unsubscriptionText.set(n.unsubscriptionText||h.MessageTemplate.DEFAULT_UNSUBSCRIPTION_TEXT),t.store.updateAttachmentsOverall(n.sendWithCaption),t.activeTemplateId.set(n.id)}else setTimeout(()=>{t.uiService.showProWarning(B.B.USE_TEMPLATE)},100)})()}saveTemplate(n=""){var t=this;return(0,_.Z)(function*(){t.savingtemplate=!0;try{let a=null;a=n?t.templates().find(u=>u.id===n):h.MessageTemplate.getDefault(t.extAuth.currentUser.phoneNumber),a.name=t.templateName,a.template=t.store.message(),a.sendWithCaption=t.store.sendWithCaption(),a.addUnsubscriptionText=t.store.addUnsubscriptionText(),a.unsubscriptionText=t.store.unsubscriptionText();const s=t.store.attachments.map(function(){var u=(0,_.Z)(function*(C){const E=yield t.templateService.uploadTemplateAttachments(a.id,encodeURIComponent(C.name),C);return new h.MessageAttachmentDetails(C.name,E,C.size,C.type)});return function(C){return u.apply(this,arguments)}}()),c=yield Promise.all(s);a.attachmentDetails=c;const p=yield t.templateService.saveTemplate(a);t.log.log("save_template_event",{name:p.name,attachmentNumber:p.attachmentDetails.length,hasUnsubscriptionText:p.addUnsubscriptionText,hasSendWithCaption:p.sendWithCaption});const g=t.templates().findIndex(u=>u.id===p.id);return t.templates.mutate(g<0?u=>{u.push(p)}:u=>{u[g]=p}),t.templateSaved=!0,t.savingtemplate=!1,p}catch(a){throw console.error("Error saving template:",a),t.savingtemplate=!1,a}})()}init(){var n=this;return(0,_.Z)(function*(){n.reset(),n.templateName="",n.templates.set([]);try{const t=yield n.templateService.getTemplates();return n.templates.set(t),t}catch(t){throw n.templates.set([]),console.error("Error fetching templates:",t),t}})()}reset(){this.savingtemplate=!1,this.templateSaved=!1}}return(o=i).\u0275fac=function(n){return new(n||o)(e.LFG(ee.ER),e.LFG(q),e.LFG(Y.a),e.LFG(H.m),e.LFG(_e.F))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),i})();var Ne=d(4575),Ae=d(6979);const Se=["*"];let ke=(()=>{var o;class i{constructor(){this.name="",this.size="small",this.selected=!1,this.selectedChange=new e.vpe}ngOnInit(){}onChange(n){this.selectedChange.emit(this.selected)}}return(o=i).\u0275fac=function(n){return new(n||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-toggle"]],inputs:{name:"name",size:"size",selected:"selected"},outputs:{selectedChange:"selectedChange"},ngContentSelectors:Se,decls:5,vars:6,consts:[["type","checkbox",1,"toggle-input",3,"checked","id","change"],["tabindex","1",1,"toggle-label",3,"for"],["tabindex","1",3,"for"]],template:function(n,t){1&n&&(e.F$t(),e.TgZ(0,"div")(1,"input",0),e.NdJ("change",function(s){return t.onChange(s)}),e.qZA(),e._UZ(2,"label",1),e.TgZ(3,"label",2),e.Hsn(4),e.qZA()()),2&n&&(e.Tol(t.size+" toggle"),e.xp6(1),e.Q6J("checked",t.selected)("id",t.name),e.xp6(1),e.Q6J("for",t.name),e.xp6(1),e.Q6J("for",t.name))},styles:['.toggle[_ngcontent-%COMP%]{position:relative;display:inline-flex;gap:var(--spacing-4)}.toggle[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{cursor:pointer}.toggle[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:before{content:none}.toggle[_ngcontent-%COMP%]   .toggle-input[_ngcontent-%COMP%]{display:none}.toggle[_ngcontent-%COMP%]   .toggle-input[_ngcontent-%COMP%]:checked + .toggle-label[_ngcontent-%COMP%]{background:var(--fill-selected, #1A1A1A)}.toggle[_ngcontent-%COMP%]   .toggle-input[_ngcontent-%COMP%]:checked + .toggle-label[_ngcontent-%COMP%]:after{border:2px solid var(--fill-selected, black)}.toggle.small[_ngcontent-%COMP%]{--toggle-width: 46px;--toggle-height: 20px;--toggle-left: 25px}.toggle.large[_ngcontent-%COMP%]{--toggle-width: 64px;--toggle-height: 20px;--toggle-left: 30px}.toggle[_ngcontent-%COMP%]   .toggle-input[_ngcontent-%COMP%]:checked + .toggle-label[_ngcontent-%COMP%]:after{left:var(--toggle-left)}.toggle[_ngcontent-%COMP%]   .toggle-label[_ngcontent-%COMP%]{width:var(--toggle-width);height:var(--toggle-height)}.toggle[_ngcontent-%COMP%]   .toggle-label[_ngcontent-%COMP%]:after{width:var(--toggle-height);height:var(--toggle-height)}.toggle[_ngcontent-%COMP%]   .toggle-label[_ngcontent-%COMP%]{display:block;border-radius:var(--corner-radius-32, 32px);border:1px solid var(--stroke-strong, rgba(0, 13, 77, .45));background-color:var(--fill-weak, rgba(0, 21, 128, .04));border-radius:99px;transition:background-color .3s ease}.toggle[_ngcontent-%COMP%]   .toggle-label[_ngcontent-%COMP%]:hover{background:var(--fill-hover, rgba(0, 21, 128, .04))}.toggle[_ngcontent-%COMP%]   .toggle-label[_ngcontent-%COMP%]:active{background:var(--fill-press, rgba(0, 17, 102, .1))}.toggle[_ngcontent-%COMP%]   .toggle-label[_ngcontent-%COMP%]:focus{outline:2px solid var(--stroke-focus, #1A1A1A);outline-offset:2px}.toggle[_ngcontent-%COMP%]   .toggle-label[_ngcontent-%COMP%]:after{content:"";position:absolute;left:-1px;top:-1px;border-radius:50%;transition:left .3s ease;background-color:var(--background-overlay, #FFF);border:2px solid var(--stroke-strong, rgba(0, 13, 77, .45));filter:drop-shadow(0px 4px 8px rgba(0,0,0,.04)) drop-shadow(0px 2px 4px rgba(0,0,0,.08))}']}),i})();var oe=d(858);const ye=["inputImages"],Fe=["phoneInput"],De=["dropdownRoot"],Ie=["allTemplates"],Re=["allTemplatesToggle"],Ue=["main"],Le=["inputDocuments"],Ge=["msgTextarea"],Je=["deleteBtn"],qe=["unsubscriptionArea"];function je(o,i){if(1&o){const r=e.EpF();e.TgZ(0,"div",89),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.editFile())}),e._UZ(1,"i",90),e.TgZ(2,"span",91),e._uU(3),e.ALo(4,"jtranslate"),e.qZA()()}2&o&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"Import")," "))}function Qe(o,i){if(1&o){const r=e.EpF();e.TgZ(0,"div",92),e._UZ(1,"i",93),e.TgZ(2,"span"),e._uU(3),e.qZA(),e.TgZ(4,"div",94),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.clearSelections())}),e._UZ(5,"i",95),e.qZA()()}if(2&o){const r=e.oxw();e.xp6(3),e.hij(" ",null==r.sheet.excelDetails?null:r.sheet.excelDetails.fileName," ")}}function Be(o,i){if(1&o){const r=e.EpF();e.TgZ(0,"div",111),e.NdJ("click",function(){const a=e.CHM(r).$implicit,s=e.oxw(2);return e.KtG(s.selectActiveSheet(a))}),e._uU(1),e.qZA()}if(2&o){const r=i.$implicit;e.xp6(1),e.Oqu(r)}}function Ye(o,i){if(1&o){const r=e.EpF();e.TgZ(0,"div",111),e.NdJ("click",function(){const a=e.CHM(r).$implicit,s=e.oxw(2);return e.KtG(s.selectPhoneNumberKey(a))}),e._uU(1),e.qZA()}if(2&o){const r=i.$implicit;e.xp6(1),e.Oqu(r)}}function He(o,i){1&o&&e._UZ(0,"i",112)}function ze(o,i){1&o&&e._UZ(0,"i",112)}function We(o,i){if(1&o){const r=e.EpF();e.TgZ(0,"div",96)(1,"div",97)(2,"div",11),e._uU(3),e.ALo(4,"jtranslate"),e.qZA(),e.TgZ(5,"div",98)(6,"div",36)(7,"div",99)(8,"span",100),e._uU(9),e.qZA(),e._UZ(10,"i",101),e.qZA(),e.TgZ(11,"div",102),e.YNc(12,Be,2,1,"div",103),e.qZA()()()(),e.TgZ(13,"div",97)(14,"div",11),e._uU(15),e.ALo(16,"jtranslate"),e.qZA(),e.TgZ(17,"div",98)(18,"div",36)(19,"div",99)(20,"span",104),e._uU(21),e.ALo(22,"jtranslate"),e.qZA(),e.TgZ(23,"span",105),e._uU(24),e.qZA(),e._UZ(25,"i",106),e.qZA(),e.TgZ(26,"div",50),e.YNc(27,Ye,2,1,"div",103),e.qZA()()()(),e.TgZ(28,"div",97)(29,"div",11),e._uU(30),e.ALo(31,"jtranslate"),e.qZA(),e.TgZ(32,"div",107),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.proWarnSheetSelection())}),e.TgZ(33,"input",108),e.NdJ("ngModelChange",function(t){e.CHM(r);const a=e.oxw();return e.KtG(a.sheet.startRow.set(t))}),e.qZA(),e.YNc(34,He,1,0,"i",109),e.qZA()(),e.TgZ(35,"div",97)(36,"div",11),e._uU(37),e.ALo(38,"jtranslate"),e.qZA(),e.TgZ(39,"div",107),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.proWarnSheetSelection())}),e.TgZ(40,"input",110),e.NdJ("ngModelChange",function(t){e.CHM(r);const a=e.oxw();return e.KtG(a.sheet.endRow.set(t))}),e.qZA(),e.YNc(41,ze,1,0,"i",109),e.qZA()()()}if(2&o){const r=e.oxw();e.xp6(3),e.hij("",e.lcZ(4,15,"Sheet"),":"),e.xp6(6),e.Oqu(r.sheet.activeSheet()),e.xp6(3),e.Q6J("ngForOf",r.sheet.excelDetails.sheetNames),e.xp6(3),e.hij("",e.lcZ(16,17,"Column"),":"),e.xp6(6),e.hij(" ",r.sheet.selectedPhoneColumn()||e.lcZ(22,19,"Select phonenumbercolumn")," "),e.xp6(3),e.hij("(",null==r.store.phoneNumberData||null==r.store.phoneNumberData.phoneData?null:r.store.phoneNumberData.phoneData.length,")"),e.xp6(3),e.Q6J("ngForOf",r.sheet.columnNames()),e.xp6(3),e.hij("",e.lcZ(31,21,"From"),":"),e.xp6(3),e.Q6J("ngModel",r.sheet.startRow())("disabled",!r.extDataService.isPro()),e.xp6(1),e.Q6J("ngIf",!r.extDataService.isPro()),e.xp6(3),e.hij("",e.lcZ(38,23,"To"),":"),e.xp6(3),e.Q6J("ngModel",r.sheet.endRow())("disabled",!r.extDataService.isPro()),e.xp6(1),e.Q6J("ngIf",!r.extDataService.isPro())}}function Ke(o,i){if(1&o){const r=e.EpF();e.TgZ(0,"i",118),e.NdJ("click",function(){e.CHM(r);const t=e.oxw(2).index,a=e.oxw();return e.KtG(a.removeNumber(t))}),e.qZA()}}function $e(o,i){if(1&o){const r=e.EpF();e.TgZ(0,"textarea",119),e.NdJ("blur",function(){e.CHM(r),e.oxw();const t=e.MAs(2),a=e.oxw().index,s=e.oxw();return s.addPhoneNumber(a),e.KtG(s.focusOut(t))})("paste",function(){e.CHM(r),e.oxw();const t=e.MAs(2),a=e.oxw().index,s=e.oxw();return e.KtG(s.onPaste(a,t))})("ngModelChange",function(t){e.CHM(r);const a=e.oxw(3);return e.KtG(a.phoneNumber.set(t))})("keyup.enter",function(){e.CHM(r),e.oxw();const t=e.MAs(2),a=e.oxw().index,s=e.oxw();return s.sanitzeNumber(),s.addPhoneNumber(a),e.KtG(s.focusOut(t))}),e.ALo(1,"jtranslate"),e.qZA()}if(2&o){const r=e.oxw(3);e.Q6J("ngModel",r.phoneNumber())("placeholder",e.lcZ(1,2,"Enter phonenumber"))}}function Ve(o,i){if(1&o){const r=e.EpF();e.ynx(0),e.TgZ(1,"span",113,114)(3,"span",115),e.NdJ("click",function(){e.CHM(r);const t=e.MAs(2),a=e.oxw().$implicit,s=e.oxw();return e.KtG(s.focusTag(t,a))}),e.TgZ(4,"span"),e._uU(5),e.qZA(),e.YNc(6,Ke,1,0,"i",116),e.qZA(),e.YNc(7,$e,2,4,"textarea",117),e.qZA(),e.BQk()}if(2&o){const r=e.oxw().$implicit,n=e.oxw();e.xp6(3),e.ekj("invalid",!r.isValid),e.xp6(2),e.Oqu(r.number),e.xp6(1),e.Q6J("ngIf",!n.sheet.excelDetails),e.xp6(1),e.Q6J("ngIf",!n.sheet.excelDetails)}}function Xe(o,i){if(1&o&&(e.ynx(0),e.YNc(1,Ve,8,5,"ng-container",20),e.BQk()),2&o){const r=i.$implicit;e.xp6(1),e.Q6J("ngIf",null==r?null:r.originalNumber)}}function et(o,i){if(1&o){const r=e.EpF();e.TgZ(0,"span",120),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.sliceNumber=!1)}),e._uU(1),e.ALo(2,"jtranslate"),e.qZA()}if(2&o){const r=e.oxw();e.xp6(1),e.AsE(" + ",(null==r.store.proceesablePhoneData||null==r.store.proceesablePhoneData.phoneData?null:r.store.proceesablePhoneData.phoneData.length)-100," ",e.lcZ(2,2,"more")," ")}}function tt(o,i){if(1&o){const r=e.EpF();e.TgZ(0,"textarea",121,122),e.NdJ("blur",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.addPhoneNumber(null==t.store.phoneNumberData||null==t.store.phoneNumberData.phoneData?null:t.store.phoneNumberData.phoneData.length))})("paste",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.onPaste(null==t.store.phoneNumberData||null==t.store.phoneNumberData.phoneData?null:t.store.phoneNumberData.phoneData.length))})("ngModelChange",function(t){e.CHM(r);const a=e.oxw();return e.KtG(a.phoneNumber.set(t))})("keydown.backspace",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.removeLastEntry())})("keyup.space",function(){e.CHM(r);const t=e.oxw();return t.sanitzeNumber(),e.KtG(t.addPhoneNumber(null==t.store.phoneNumberData||null==t.store.phoneNumberData.phoneData?null:t.store.phoneNumberData.phoneData.length,!0))})("keyup.enter",function(){e.CHM(r);const t=e.oxw();return t.sanitzeNumber(),e.KtG(t.addPhoneNumber(null==t.store.phoneNumberData||null==t.store.phoneNumberData.phoneData?null:t.store.phoneNumberData.phoneData.length))}),e.ALo(2,"jtranslate"),e.qZA()}if(2&o){const r=e.oxw();e.Q6J("ngModel",r.phoneNumber())("placeholder",e.lcZ(2,2,"Enter phonenumber"))}}function nt(o,i){if(1&o){const r=e.EpF();e.TgZ(0,"div",123),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.clearSelections())}),e._UZ(1,"i",83),e.qZA()}}function ot(o,i){if(1&o){const r=e.EpF();e.TgZ(0,"div",126),e.NdJ("click",function(){e.CHM(r);const t=e.oxw(2);return e.KtG(t.sendMessages(t.operations.OPERATION_FILTER))}),e.ALo(1,"jtranslate"),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"jtranslate"),e.qZA(),e._UZ(5,"i",127),e._uU(6," Filter "),e.qZA()}if(2&o){const r=e.oxw(2);e.Q6J("title",e.lcZ(1,3,"Run filter")),e.xp6(3),e.AsE("",e.lcZ(4,5,"Numbers"),": ",null==r.store.proceesablePhoneData||null==r.store.proceesablePhoneData.phoneData?null:r.store.proceesablePhoneData.phoneData.length," | ")}}function rt(o,i){if(1&o){const r=e.EpF();e.TgZ(0,"div",128),e.NdJ("click",function(){e.CHM(r);const t=e.oxw(2);return e.KtG(t.downloadWrongNumber())}),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"jtranslate"),e.qZA(),e._UZ(4,"i",129),e.qZA()}if(2&o){const r=e.oxw(2);e.xp6(2),e.AsE("",e.lcZ(3,2,"Error"),": ",r.store.proceesablePhoneData.invalidNumber," | ")}}function at(o,i){if(1&o&&(e.ynx(0),e.YNc(1,ot,7,7,"div",124),e.YNc(2,rt,5,4,"div",125),e.BQk()),2&o){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",(null==r.store.proceesablePhoneData||null==r.store.proceesablePhoneData.phoneData?null:r.store.proceesablePhoneData.phoneData.length)>0),e.xp6(1),e.Q6J("ngIf",r.store.proceesablePhoneData.invalidNumber>0)}}function it(o,i){if(1&o&&(e.ynx(0),e.TgZ(1,"div",135),e._UZ(2,"i",136),e._uU(3),e.qZA(),e.TgZ(4,"div",135)(5,"div",30),e._UZ(6,"i",137),e._uU(7),e.qZA(),e._uU(8," | "),e.TgZ(9,"div",30),e._UZ(10,"i",138),e._uU(11),e.qZA()(),e.BQk()),2&o){const r=e.oxw(2);e.xp6(3),e.hij(" ",r.store.randomDelay()||"0"," "),e.xp6(4),e.hij(" ",r.store.waitAfterpeople()||"0"," "),e.xp6(4),e.hij(" ",r.store.waitForMin()||"0"," ")}}function st(o,i){1&o&&(e.ynx(0),e.TgZ(1,"div",135)(2,"i"),e._uU(3),e.ALo(4,"jtranslate"),e.qZA()(),e.BQk()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"Disabled")))}function lt(o,i){1&o&&e._UZ(0,"i",139)}function ct(o,i){1&o&&e._UZ(0,"i",140)}function pt(o,i){if(1&o){const r=e.EpF();e.TgZ(0,"div",130),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.openSettings=!t.openSettings)}),e.TgZ(1,"div",131),e._UZ(2,"i",132),e._uU(3),e.ALo(4,"jtranslate"),e.qZA(),e.YNc(5,it,12,3,"ng-container",20),e.YNc(6,st,5,3,"ng-container",20),e.YNc(7,lt,1,0,"i",133),e.YNc(8,ct,1,0,"i",134),e.qZA()}if(2&o){const r=e.oxw();e.xp6(3),e.hij(" ",e.lcZ(4,5,"Time gap b/w msgs")," "),e.xp6(2),e.Q6J("ngIf",r.store.batchSettings()||r.store.timegapSettings()),e.xp6(1),e.Q6J("ngIf",!r.store.batchSettings()&&!r.store.timegapSettings()),e.xp6(1),e.Q6J("ngIf",!r.openSettings),e.xp6(1),e.Q6J("ngIf",r.openSettings)}}function gt(o,i){if(1&o){const r=e.EpF();e.TgZ(0,"div",141)(1,"div",142)(2,"div",143)(3,"span",144),e._uU(4),e.ALo(5,"jtranslate"),e.qZA(),e.TgZ(6,"span"),e._uU(7),e.ALo(8,"jtranslate"),e.ALo(9,"jtranslate"),e.TgZ(10,"input",145),e.NdJ("ngModelChange",function(t){e.CHM(r);const a=e.oxw();return e.KtG(a.store.randomDelay.set(t))}),e.qZA(),e._uU(11),e.ALo(12,"jtranslate"),e.qZA()(),e.TgZ(13,"app-toggle",146),e.NdJ("selectedChange",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.onTimeGapChange())}),e.qZA()(),e.TgZ(14,"div",147)(15,"div",148)(16,"span",144),e._uU(17),e.ALo(18,"jtranslate"),e.qZA(),e.TgZ(19,"span"),e._uU(20),e.ALo(21,"jtranslate"),e.TgZ(22,"input",145),e.NdJ("ngModelChange",function(t){e.CHM(r);const a=e.oxw();return e.KtG(a.store.waitAfterpeople.set(t))}),e.qZA(),e._uU(23),e.ALo(24,"jtranslate"),e.TgZ(25,"input",145),e.NdJ("ngModelChange",function(t){e.CHM(r);const a=e.oxw();return e.KtG(a.store.waitForMin.set(t))}),e.qZA(),e._uU(26),e.ALo(27,"jtranslate"),e.qZA()(),e.TgZ(28,"app-toggle",149),e.NdJ("selectedChange",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.onBatchGapChange())}),e.qZA()()()}if(2&o){const r=e.oxw();e.xp6(4),e.hij("",e.lcZ(5,13,"Random time gap"),":\xa0"),e.xp6(3),e.AsE(" ",e.lcZ(8,15,"0 to")," ",e.lcZ(9,17,"to")," "),e.xp6(3),e.Q6J("ngModel",r.store.randomDelay()),e.xp6(1),e.hij(" ",e.lcZ(12,19,"sec")," "),e.xp6(2),e.Q6J("selected",r.store.timegapSettings()),e.xp6(4),e.Oqu(e.lcZ(18,21,"Split Msgs into batches")),e.xp6(3),e.hij(" ",e.lcZ(21,23,"Send in batches of")," "),e.xp6(2),e.Q6J("ngModel",r.store.waitAfterpeople()),e.xp6(1),e.hij(" ",e.lcZ(24,25,"msgs and wait for")," "),e.xp6(2),e.Q6J("ngModel",r.store.waitForMin()),e.xp6(1),e.hij(" ",e.lcZ(27,27,"min after every batch")," "),e.xp6(2),e.Q6J("selected",r.store.batchSettings()&&r.extDataService)}}function dt(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"jtranslate"),e.TgZ(3,"b"),e._uU(4),e.ALo(5,"jtranslate"),e.qZA()()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,2,"Buy pro to use")," "),e.xp6(3),e.Oqu(e.lcZ(5,4,"WhatsApp number filter")))}function _t(o,i){if(1&o){const r=e.EpF();e.TgZ(0,"app-pro-warn",150),e.NdJ("close",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.store.proFeauters=null)}),e.YNc(1,dt,6,6,"span",20),e.qZA()}if(2&o){const r=e.oxw();e.Q6J("type",r.store.proFeauters),e.xp6(1),e.Q6J("ngIf","Filter"===r.store.proFeauters)}}function mt(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"jtranslate"),e.TgZ(3,"b"),e._uU(4),e.ALo(5,"jtranslate"),e.qZA()()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,2,"Buy pro to use")," "),e.xp6(3),e.Oqu(e.lcZ(5,4,"time gap and batching feature")))}function ut(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"jtranslate"),e.TgZ(3,"b"),e._uU(4),e.ALo(5,"jtranslate"),e.qZA()()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,2,"Buy pro to use")," "),e.xp6(3),e.Oqu(e.lcZ(5,4,"message personalisation feature")))}function ht(o,i){if(1&o&&(e.TgZ(0,"app-pro-warn",151),e.YNc(1,mt,6,6,"span",20),e.YNc(2,ut,6,6,"span",20),e.qZA()),2&o){const r=e.oxw();e.Q6J("canClose",!1)("type",r.proOptions),e.xp6(1),e.Q6J("ngIf","Time Gap and Batching"===r.proOptions),e.xp6(1),e.Q6J("ngIf","Personalisation"===r.proOptions)}}function ft(o,i){1&o&&(e.TgZ(0,"span",152)(1,"b"),e._uU(2),e.ALo(3,"jtranslate"),e.qZA()()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"cannot be blank")))}function xt(o,i){if(1&o){const r=e.EpF();e.TgZ(0,"div",155),e.NdJ("click",function(){e.CHM(r);const t=e.oxw(2);let a;return t.templateStore.templateName=null==(a=t.templateStore.getActiveTemplate())?null:a.name,e.KtG(t.templateStore.reset())}),e._uU(1),e.ALo(2,"jtranslate"),e.qZA()}2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Update template")," "))}function Mt(o,i){if(1&o){const r=e.EpF();e.ynx(0),e.YNc(1,xt,3,3,"div",153),e.TgZ(2,"div",154),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();return t.templateStore.templateName="",e.KtG(t.templateStore.reset())}),e._uU(3),e.ALo(4,"jtranslate"),e.qZA(),e.BQk()}if(2&o){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",r.templateStore.getActiveTemplate()&&r.isActiveTemplateChanged()),e.xp6(2),e.hij(" ",e.lcZ(4,2,"Save as new template")," ")}}function Ct(o,i){if(1&o){const r=e.EpF();e.TgZ(0,"div",157),e.NdJ("click",function(){e.CHM(r);const t=e.oxw(2);return e.KtG(t.attachTemplateDropdownInTextarea())}),e._uU(1),e.ALo(2,"jtranslate"),e.qZA()}2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Use saved templates")," "))}function bt(o,i){if(1&o&&(e.ynx(0),e.YNc(1,Ct,3,3,"div",156),e.BQk()),2&o){const r=e.oxw();let n;e.xp6(1),e.Q6J("ngIf",null==r.templateStore||null==(n=r.templateStore.templates())?null:n.length)}}function vt(o,i){if(1&o){const r=e.EpF();e.TgZ(0,"div",163),e.NdJ("click",function(){e.CHM(r);const t=e.oxw(2);return e.KtG(t.attachTemplateDropdownInTextarea())}),e._uU(1),e.ALo(2,"jtranslate"),e.qZA()}2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Use saved templates")," "))}function Ot(o,i){if(1&o&&(e.TgZ(0,"ng-conatainer")(1,"div",158)(2,"div",159),e._UZ(3,"i",160),e.qZA(),e.TgZ(4,"div",161),e.YNc(5,vt,3,3,"div",162),e.qZA()()()),2&o){const r=e.oxw();let n;e.xp6(5),e.Q6J("ngIf",null==r.templateStore||null==(n=r.templateStore.templates())?null:n.length)}}function Pt(o,i){if(1&o&&(e.TgZ(0,"app-alert",164)(1,"div",165),e._uU(2),e.ALo(3,"jtranslate"),e.TgZ(4,"b")(5,"i"),e._uU(6),e.qZA()()()()),2&o){const r=e.oxw();e.Q6J("alignment",r.left)("canClose",!1),e.xp6(2),e.hij(" ",e.lcZ(3,4,"No columns in excel sheet named")," "),e.xp6(4),e.Oqu(r.invalidCustomization().join(", "))}}function Et(o,i){if(1&o){const r=e.EpF();e.TgZ(0,"div",174),e.NdJ("click",function(){const a=e.CHM(r).$implicit,s=e.oxw(3);return e.KtG(s.insertVariable(a))}),e._uU(1),e.qZA()}if(2&o){const r=i.$implicit;e.xp6(1),e.Oqu(r)}}function Tt(o,i){if(1&o&&(e.TgZ(0,"div",169)(1,"div",170)(2,"span"),e._uU(3),e.qZA(),e._UZ(4,"i",171),e.qZA(),e.TgZ(5,"div",172),e.YNc(6,Et,2,1,"div",173),e.qZA()()),2&o){const r=e.oxw(2);let n;e.xp6(3),e.hij("+ ",(null==(n=r.sheet.columnNames())?null:n.length)-1,""),e.xp6(3),e.Q6J("ngForOf",r.sheet.columnNames())}}function wt(o,i){if(1&o){const r=e.EpF();e.TgZ(0,"div",166)(1,"span",167),e._uU(2),e.ALo(3,"jtranslate"),e.qZA(),e.TgZ(4,"div",111),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.insertVariable(t.sheet.columnNames()[0]))}),e._uU(5),e.qZA(),e.YNc(6,Tt,7,2,"div",168),e.qZA()}if(2&o){const r=e.oxw();let n;e.xp6(2),e.hij("",e.lcZ(3,3,"Customizations"),":"),e.xp6(3),e.hij("",r.sheet.columnNames()[0]," "),e.xp6(1),e.Q6J("ngIf",(null==(n=r.sheet.columnNames())?null:n.length)>1)}}function Zt(o,i){1&o&&(e.TgZ(0,"div",175),e._UZ(1,"i",176),e._uU(2),e.ALo(3,"jtranslate"),e.qZA()),2&o&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"Preview")," "))}function Nt(o,i){if(1&o){const r=e.EpF();e.TgZ(0,"i",185),e.NdJ("click",function(){e.CHM(r);const t=e.oxw(2);return e.KtG(t.templateStore.search.set(""))}),e.qZA()}}function At(o,i){1&o&&e._UZ(0,"i",196)}function St(o,i){1&o&&e._UZ(0,"i",197)}function kt(o,i){1&o&&e._UZ(0,"i",198)}function yt(o,i){if(1&o){const r=e.EpF();e.ynx(0),e.TgZ(1,"div",186)(2,"div",148)(3,"div",187),e.NdJ("click",function(){const a=e.CHM(r).$implicit,s=e.oxw(2);return e.KtG(s.useSavedTemplate(a))}),e.YNc(4,At,1,0,"i",188),e.YNc(5,St,1,0,"i",189),e.YNc(6,kt,1,0,"i",190),e.qZA(),e.TgZ(7,"div",191),e.NdJ("click",function(){const a=e.CHM(r).$implicit,s=e.oxw(2);return e.KtG(s.useSavedTemplate(a))}),e.TgZ(8,"div"),e._uU(9),e.qZA(),e.TgZ(10,"div",192),e._uU(11),e.qZA()(),e.TgZ(12,"div",193)(13,"div",194),e.NdJ("click",function(){const a=e.CHM(r).$implicit,s=e.oxw(2);return e.KtG(s.selectTemplateToDelete(a))}),e._UZ(14,"i",195),e.qZA()()()(),e.BQk()}if(2&o){const r=i.$implicit,n=e.oxw(2);e.xp6(4),e.Q6J("ngIf",r.templateType===n.templateType.TEXT),e.xp6(1),e.Q6J("ngIf",r.templateType===n.templateType.IMAGE),e.xp6(1),e.Q6J("ngIf",r.templateType===n.templateType.DOC),e.xp6(3),e.hij(" ",r.name," "),e.xp6(2),e.hij(" ",r.template," ")}}function Ft(o,i){1&o&&(e.ynx(0),e.TgZ(1,"div",186),e._uU(2),e.ALo(3,"jtranslate"),e.qZA(),e.BQk()),2&o&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"No saved templates")," "))}function Dt(o,i){1&o&&(e.TgZ(0,"div",186),e._uU(1),e.ALo(2,"jtranslate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"No saved templates")," "))}function It(o,i){if(1&o){const r=e.EpF();e.TgZ(0,"div",177,178)(2,"div",179)(3,"form",180)(4,"input",181,182),e.NdJ("ngModelChange",function(t){e.CHM(r);const a=e.oxw();return e.KtG(a.templateStore.search.set(t))}),e.ALo(6,"jtranslate"),e.qZA(),e.YNc(7,Nt,1,0,"i",183),e.qZA()(),e.YNc(8,yt,15,5,"ng-container",14),e.YNc(9,Ft,4,3,"ng-container",20),e.YNc(10,Dt,3,3,"div",184),e.qZA()}if(2&o){const r=e.oxw();let n,t;e.xp6(4),e.Q6J("ngModel",r.templateStore.search())("placeholder",e.lcZ(6,6,"Search templates")),e.xp6(3),e.Q6J("ngIf",r.templateStore.search()),e.xp6(1),e.Q6J("ngForOf",null==r.templateStore?null:r.templateStore.filterTemplates()),e.xp6(1),e.Q6J("ngIf",!(null!=r.templateStore&&null!=(n=r.templateStore.filterTemplates())&&n.length)),e.xp6(1),e.Q6J("ngIf",!(null!=r.templateStore&&null!=(t=r.templateStore.templates())&&t.length))}}function Rt(o,i){if(1&o){const r=e.EpF();e.TgZ(0,"textarea",199,200),e.NdJ("ngModelChange",function(t){e.CHM(r);const a=e.oxw();return e.KtG(a.store.unsubscriptionText.set(t))}),e._uU(2,"            "),e.qZA()}if(2&o){const r=e.oxw();e.ekj("invalid",!r.store.isValidUnsubscripitonText()),e.Q6J("ngModel",r.store.unsubscriptionText())}}function Ut(o,i){1&o&&(e.ynx(0),e._uU(1),e.ALo(2,"jtranslate"),e.BQk()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Attachments")," "))}function Lt(o,i){1&o&&(e.ynx(0),e._uU(1),e.ALo(2,"jtranslate"),e.TgZ(3,"span",201),e._uU(4),e.ALo(5,"jtranslate"),e.qZA(),e.BQk()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,2,"Attach a file")," "),e.xp6(3),e.Oqu(e.lcZ(5,4,"(max 8MB)")))}function Gt(o,i){if(1&o&&(e.TgZ(0,"div",202),e._uU(1),e.qZA()),2&o){const r=e.oxw();e.xp6(1),e.hij(" ",null==r.store.attachments?null:r.store.attachments.length," ")}}function Jt(o,i){if(1&o){const r=e.EpF();e.TgZ(0,"div",208)(1,"div",209),e._UZ(2,"img",210),e.TgZ(3,"span",211),e._uU(4),e.qZA()(),e.TgZ(5,"div",212)(6,"i",213),e.NdJ("click",function(){const a=e.CHM(r).index,s=e.oxw(2);return e.KtG(s.removeAttachment(a))}),e.qZA()()()}if(2&o){const r=i.$implicit;e.xp6(2),e.ekj("doc",!(null!=r.base64&&r.base64.includes("data:image/"))),e.Q6J("src",null!=r.base64&&r.base64.includes("data:image/")?r.base64:"../../../assets/img/doc.png",e.LSH),e.xp6(2),e.hij(" ",r.name," ")}}function qt(o,i){if(1&o){const r=e.EpF();e.ynx(0),e.TgZ(1,"div",203)(2,"div",204)(3,"span"),e._uU(4,"File attached"),e.qZA(),e.TgZ(5,"a",205),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.clearFiles())}),e._uU(6,"Clear"),e.qZA()(),e.YNc(7,Jt,7,4,"div",206),e.TgZ(8,"div",207),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.selectDoc())}),e.TgZ(9,"span"),e._uU(10),e.ALo(11,"jtranslate"),e.qZA()()(),e.BQk()}if(2&o){const r=e.oxw();e.xp6(7),e.Q6J("ngForOf",r.store.attachments),e.xp6(3),e.Oqu(e.lcZ(11,2,"Add new file"))}}function jt(o,i){if(1&o){const r=e.EpF();e.ynx(0),e.TgZ(1,"div",111),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.selectDoc())}),e._UZ(2,"i",214),e._uU(3),e.ALo(4,"jtranslate"),e.qZA(),e.TgZ(5,"div",111),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.selectMedia())}),e._UZ(6,"i",215),e._uU(7),e.ALo(8,"jtranslate"),e.qZA(),e.BQk()}2&o&&(e.xp6(3),e.hij("",e.lcZ(4,2,"Document")," "),e.xp6(4),e.hij("",e.lcZ(8,4,"Media")," "))}function Qt(o,i){if(1&o){const r=e.EpF();e.TgZ(0,"div",216)(1,"input",217),e.NdJ("change",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.toggleCaption())}),e.qZA(),e.TgZ(2,"label",218),e._uU(3),e.ALo(4,"jtranslate"),e.qZA()()}if(2&o){const r=e.oxw();e.xp6(1),e.Q6J("checked",r.store.sendWithCaption()),e.xp6(2),e.Oqu(e.lcZ(4,2,"Send text as caption"))}}function Bt(o,i){1&o&&(e.TgZ(0,"span"),e._UZ(1,"i",221),e._uU(2),e.ALo(3,"jtranslate"),e.qZA()),2&o&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"Redraft msg with AI")," "))}function Yt(o,i){1&o&&e._UZ(0,"i",222)}function Ht(o,i){if(1&o){const r=e.EpF();e.TgZ(0,"a",219),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.isPro?t.store.redraftMsg():t.uiService.showProWarning("redraft-click"))}),e.YNc(1,Bt,4,3,"span",20),e.YNc(2,Yt,1,0,"i",220),e.qZA()}if(2&o){const r=e.oxw();e.ekj("disable-btn",!r.isPro),e.xp6(1),e.Q6J("ngIf",!r.errorStore.fixingAll),e.xp6(1),e.Q6J("ngIf",!r.isPro)}}function zt(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"jtranslate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Send")," "))}function Wt(o,i){1&o&&e._UZ(0,"div",225)}function Kt(o,i){if(1&o){const r=e.EpF();e.TgZ(0,"button",223),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.sendMessages(t.operations.OPERATION_SEND_MESSAGE))}),e.YNc(1,zt,3,3,"span",20),e.YNc(2,Wt,1,0,"div",224),e.qZA()}if(2&o){const r=e.oxw();e.ekj("disable",r.isSendingNotAllowed),e.xp6(1),e.Q6J("ngIf",!r.store.processingMessageSending),e.xp6(1),e.Q6J("ngIf",r.store.processingMessageSending)}}function $t(o,i){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"jtranslate"),e.ALo(3,"jtranslate"),e.qZA()),2&o){const r=e.oxw(2);e.xp6(1),e.lnq("",e.lcZ(2,3,"Low risk of number ban")," (",r.errorsCount," ",e.lcZ(3,5,"errors"),")")}}function Vt(o,i){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"jtranslate"),e.ALo(3,"jtranslate"),e.qZA()),2&o){const r=e.oxw(2);e.xp6(1),e.lnq("",e.lcZ(2,3,"Medium risk of number ban")," (",r.errorsCount," ",e.lcZ(3,5,"errors"),")")}}function Xt(o,i){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"jtranslate"),e.ALo(3,"jtranslate"),e.qZA()),2&o){const r=e.oxw(2);e.xp6(1),e.lnq("",e.lcZ(2,3,"High risk of number ban")," (",r.errorsCount," ",e.lcZ(3,5,"errors"),")")}}function en(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"jtranslate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Ignore & Send")," "))}function tn(o,i){1&o&&e._UZ(0,"div",225)}function nn(o,i){if(1&o){const r=e.EpF();e.TgZ(0,"div",226)(1,"div",227),e._UZ(2,"i",228),e.TgZ(3,"div",229),e.YNc(4,$t,4,7,"span",20),e.YNc(5,Vt,4,7,"span",20),e.YNc(6,Xt,4,7,"span",20),e.qZA()(),e.TgZ(7,"div",230)(8,"button",231),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.store.sendMessages(t.operations.OPERATION_SEND_MESSAGE,t.sendSourceAction.IGNORE_AND_SEND))}),e.YNc(9,en,3,3,"span",20),e.YNc(10,tn,1,0,"div",224),e.qZA(),e.TgZ(11,"button",232),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.showErrorModal())}),e._uU(12),e.ALo(13,"jtranslate"),e.qZA()()()}if(2&o){const r=e.oxw();e.Q6J("ngClass","alert-"+r.risk()),e.xp6(4),e.Q6J("ngIf",r.risk()===r.riskLevel.LOW),e.xp6(1),e.Q6J("ngIf",r.risk()===r.riskLevel.MEDIUM),e.xp6(1),e.Q6J("ngIf",r.risk()===r.riskLevel.HIGH),e.xp6(2),e.Q6J("disabled",r.isSendingNotAllowed),e.xp6(1),e.Q6J("ngIf",!r.store.processingMessageSending),e.xp6(1),e.Q6J("ngIf",r.store.processingMessageSending),e.xp6(1),e.Q6J("disabled",r.isSendingNotAllowed),e.xp6(1),e.Oqu(e.lcZ(13,9,"Fix Errors"))}}function on(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"jtranslate"),e.qZA()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Save")))}function rn(o,i){1&o&&e._UZ(0,"div",225)}function an(o,i){1&o&&(e.TgZ(0,"button",236),e._uU(1),e.ALo(2,"jtranslate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Discard")," "))}function sn(o,i){if(1&o){const r=e.EpF();e.TgZ(0,"div",80)(1,"input",233),e.NdJ("ngModelChange",function(t){e.CHM(r);const a=e.oxw();return e.KtG(a.templateStore.templateName=t)}),e.ALo(2,"jtranslate"),e.qZA(),e.TgZ(3,"div",85)(4,"button",234),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.saveTemplate())}),e.YNc(5,on,3,3,"span",20),e.YNc(6,rn,1,0,"div",224),e.qZA(),e.YNc(7,an,3,3,"button",235),e.qZA()()}if(2&o){const r=e.oxw();e.xp6(1),e.Q6J("ngModel",r.templateStore.templateName)("placeholder",e.lcZ(2,6,"Enter template name"))("disabled",r.templateStore.savingtemplate),e.xp6(4),e.Q6J("ngIf",!r.templateStore.savingtemplate),e.xp6(1),e.Q6J("ngIf",r.templateStore.savingtemplate),e.xp6(1),e.Q6J("ngIf",!r.templateStore.savingtemplate)}}function ln(o,i){1&o&&e.GkF(0)}function cn(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"jtranslate"),e.qZA()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Update")))}function pn(o,i){1&o&&e._UZ(0,"div",225)}function gn(o,i){1&o&&(e.TgZ(0,"button",236),e._uU(1),e.ALo(2,"jtranslate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Discard")," "))}function dn(o,i){if(1&o){const r=e.EpF();e.TgZ(0,"div",80)(1,"input",233),e.NdJ("ngModelChange",function(t){e.CHM(r);const a=e.oxw();return e.KtG(a.templateStore.templateName=t)}),e.ALo(2,"jtranslate"),e.qZA(),e.TgZ(3,"div",85)(4,"button",234),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();let a;return e.KtG(t.saveTemplate(null==(a=t.templateStore.getActiveTemplate())?null:a.id))}),e.YNc(5,cn,3,3,"span",20),e.YNc(6,pn,1,0,"div",224),e.qZA(),e.YNc(7,gn,3,3,"button",235),e.qZA()()}if(2&o){const r=e.oxw();e.xp6(1),e.Q6J("ngModel",r.templateStore.templateName)("placeholder",e.lcZ(2,6,"Enter template name"))("disabled",r.templateStore.savingtemplate),e.xp6(4),e.Q6J("ngIf",!r.templateStore.savingtemplate),e.xp6(1),e.Q6J("ngIf",r.templateStore.savingtemplate),e.xp6(1),e.Q6J("ngIf",!r.templateStore.savingtemplate)}}function _n(o,i){1&o&&e.GkF(0)}function mn(o,i){1&o&&(e.TgZ(0,"button",237),e._uU(1),e.ALo(2,"jtranslate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Discard")," "))}function un(o,i){if(1&o&&(e.TgZ(0,"div",80)(1,"div",81),e._UZ(2,"img",238),e.TgZ(3,"div",239),e._uU(4),e.ALo(5,"jtranslate"),e.qZA()()()),2&o){const r=e.oxw(2);e.xp6(4),e.AsE(" ",e.lcZ(5,2,"Template saved with name")," ",r.templateStore.templateName," ")}}function hn(o,i){if(1&o&&e.YNc(0,un,6,4,"div",74),2&o){const r=e.oxw();e.Q6J("ngIf",r.templateStore.templateSaved)}}const ue=function(){return{}};var $=function(o){return o.LOW="LOW",o.MEDIUM="MEDIUM",o.HIGH="HIGH",o}($||{});let fn=(()=>{var o;class i{constructor(n,t,a,s,c,p,g,u,C,E){this.waBGService=n,this.extDataService=t,this.uiService=a,this.cd=s,this.datePipe=c,this.store=p,this.templateStore=g,this.sheet=u,this.errorStore=C,this.log=E,this.phoneNumber=A("phoneNumber"),this.excelDetails=null,this.chooseFile=new e.vpe,this.clearFile=new e.vpe,this.templateType=h.MessageTemplateType,this.openSettings=!1,this.phoneNumbers=[],this.operations=h.Operation,this.variableMapper=Q,this.proOptions="",this.sliceNumber=!0,this.errorsCount=0,this.riskLevel=$,this.templateToDelete=null,this.sendSourceAction=z,this.attachmentsUpdated=(0,e.tdS)(!1),this.invalidCustomization=(0,e.Flj)(()=>Q.getInvalidVariables(this.store.message(),this.sheet.columnNames())?.filter(Z=>Z?.trim())),this.validCustomization=(0,e.Flj)(()=>Q.getValidVariables(this.store.message(),this.sheet.columnNames())?.filter(Z=>Z?.trim())),this.risk=(0,e.Flj)(()=>this.showRisks?(this.errorsCount=this.errorStore.getAllOccurredErrors()?.length,this.errorsCount>=5?$.HIGH:this.errorsCount>=3?$.MEDIUM:this.errorsCount>=1?$.LOW:null):null);const T=(0,re.S)(`+${t.currentUser.phoneNumber}`);T?.country&&(this.preferredDialCode=h.CountryDialCodes.find(Z=>Z?.code===T?.country)),this.uiService.onAddContactsForMessaging$.subscribe(Z=>{this.phoneNumber.set(Z.join(",")),this.addPhoneNumber(0)}),(0,e.cEC)(()=>{this.proOptions=this.extDataService.isPro()?null:this.validCustomization()?.length?B.B.PERSONALISATION:this.store.timegapSettings()||this.store.batchSettings()?B.B.TIMEGAP_BATCH:null})}attachTemplateDropdownInTextarea(){setTimeout(()=>{this.allTemplatesToggle?.nativeElement?.click();const t=this.allTemplatesElement?.nativeElement;t.style.top="0px",t.style.left="0px"},0)}useSavedTemplate(n){this.templateStore.useTemplate(n)}selectPhoneNumberKey(n){var t=this;return(0,_.Z)(function*(){t.sheet.selectedPhoneColumn.set(n);const a=[];for(const s of t.sheet.worksheet){const c=s[t.sheet.selectedPhoneColumn()];a.push(c)}t.setPhoneNumbers(a),t.store.createPhoneNumbersData(a),(t.sheet.startRow()===t.sheet.endRow()||!t.sheet.startRow()||!t.sheet.endRow())&&(t.sheet.startRow.set(2),t.sheet.endRow.set(1+t.store.phoneNumberData.phoneData?.length))})()}deleteTemplate(n){this.templateStore.deleteTemplate(n)}get banPreventLink(){let n="I need help to reduce chances of banning\n";n+=`Name: ${this.extDataService.getUserDetails()?.name}\n`,n+=`Phone: ${this.extDataService.currentUser.phoneNumber}\n`,n+=`Version: ${this.extDataService.version}\n`,n+=(this.extDataService.isPro()?"I am pro user":"I am free user")+"\n";const t=this.extDataService.getUserDetails()?.installTimestamp;return n+=(t?`using wasender since ${this.datePipe.transform(t,"dd/MM/YYYY")}`:"")+"\n",n+=`Messaging to: ${this.store.proceesablePhoneData?.phoneData?.length} Contacts\n`,n+=`Message i am sending:\n------------------------------------\n${this.store.message()?.slice(0,500)} ${this.store.message()?.length-500>0?"+"+this.store.message()?.length+"characters":""}\n------------------------------------\n    \n`,n+=(this.store.attachments?.length>0?`Attachments: ${this.store.attachments.map(a=>`${a.name} (${Math.round(a.size/1024)}kb)`).join(", ")}`:"")+"\n",n+=this.store.timegapSettings?`Time gap with random delay of ${this.store.randomDelay} is on\n`:"",n+=this.store.batchSettings?`And Sending in batches of ${this.store.waitAfterpeople} msgs and waiting for ${this.store.waitForMin} min after every batch\n`:"",`${Ze.N.BAN_PREVENT_LINK}&chat=${encodeURIComponent(n)}`}ngOnInit(){var n=this;return(0,_.Z)(function*(){n.phoneNumbers=yield n.waBGService.getPhoneNumbers(),n.store.selectedCountryInfo()||n.store.selectedCountryInfo.set({name:"India",dial_code:"91",code:"IN"}),n.phoneNumbers||(n.phoneNumbers=[]),n.sheet.init(),(!n.sheet.startRow()||!n.sheet.endRow())&&(n.sheet.startRow.set(0),n.sheet.endRow.set(0)),n.phoneNumbers?.length&&!n.sheet.excelDetails&&n.store.createPhoneNumbersData(n.phoneNumbers),n.store.banAlertTime||n.store.banAlertTime.set(0),n.errorsCount=0,n.showRisks=!1,yield Promise.all([n.templateStore.init(),n.store.init()])})()}toggleCaption(){var n=this;return(0,_.Z)(function*(){const t=n.store.sendWithCaption();n.store.sendWithCaption.set(!t)})()}onCountryCodeChange(n){var t=this;return(0,_.Z)(function*(){t.store.selectedCountryInfo.set(n),t.store.createPhoneNumbersData(t.phoneNumbers)})()}clearSelections(){var n=this;return(0,_.Z)(function*(){n.setPhoneNumbers([]),n.sheet.selectedPhoneColumn.set(""),n.sheet.excelDetails=null,n.sheet.activeSheet.set(null),n.sheet.worksheet=null,n.store.phoneNumberData=null,n.sheet.columnNames.set([]),n.sheet.startRow.set(0),n.sheet.endRow.set(0),n.store.forceNumbersLimit=0,n.errorsCount=0,n.clearFile.emit()})()}setPhoneNumbers(n){var t=this;return(0,_.Z)(function*(){t.phoneNumbers=n,yield t.waBGService.sendPhoneNumbers(t.phoneNumbers)})()}ngOnChanges(n){var t=this;return(0,_.Z)(function*(){if(n.excelDetails&&t.excelDetails){t.sheet.excelDetails=t.excelDetails,t.sheet.file=t.file,t.store.forceNumbersLimit=0,t.setPhoneNumbers([]);const a=t.sheet.getInitActiveSheet();yield t.selectActiveSheet(a),t.cd.detectChanges()}})()}selectDoc(){this.inputDocuments?.nativeElement?.click()}selectMedia(){this.inputImages?.nativeElement?.click()}editFile(){this.chooseFile.emit()}selectActiveSheet(n){var t=this;return(0,_.Z)(function*(){yield t.sheet.selectWorksheet(n),t.sheet.selectedPhoneColumn()&&t.processPhoneNumberColumn()})()}processPhoneNumberColumn(){var n=this;return(0,_.Z)(function*(){const t=[];for(const a of n.sheet.worksheet){const s=a[n.sheet.selectedPhoneColumn()];t.push(s)}n.setPhoneNumbers(t),n.store.createPhoneNumbersData(n.phoneNumbers),(n.sheet.startRow()===n.sheet.endRow()||!n.sheet.startRow()||!n.sheet.endRow())&&(n.sheet.startRow.set(2),n.sheet.endRow.set(1+n.store.phoneNumberData.phoneData?.length))})()}removeLastEntry(){const n=this.phoneNumbers?.length-1;this.phoneNumber()||n>-1&&setTimeout(()=>{this.phoneNumber.set(this.phoneNumbers?.[n]),this.removeNumber(n)},0)}addPhoneNumber(n,t=!1){var a=this;return(0,_.Z)(function*(){const s=a.phoneNumbers||[],c=isNaN(a.phoneNumber)?a.phoneNumber():`${a.phoneNumber()}`;if(c){if(c?.includes(",")){const p=c?.split(",")?.filter(g=>g?.trim()?.length);s.splice(n,1,...p)}else if(c?.includes("\n")){const p=c?.split("\n")?.filter(g=>g?.trim()?.length);s.splice(n,1,...p)}else if(t&&c?.includes(" ")){const p=c?.split("\n")?.filter(g=>g?.trim()?.length);s.splice(n,1,...p)}else s.splice(n,1,a.phoneNumber());a.setPhoneNumbers(s),a.phoneNumber.set("")}a.store.createPhoneNumbersData(a.phoneNumbers),setTimeout(()=>{c&&!a.phoneNumber()&&a.phoneInput?.nativeElement.focus()},0)})()}removeNumber(n){var t=this;return(0,_.Z)(function*(){let a=t.phoneNumbers;a&&(a=a.filter((s,c)=>c!==n),t.setPhoneNumbers(a)),t.store.createPhoneNumbersData(t.phoneNumbers)})()}sanitzeNumber(){this.phoneNumber.set(this.phoneNumber().replace(/[^0-9, ]/g,""))}insertVariable(n){var t=this;return(0,_.Z)(function*(){const a=t.msgTextarea?.nativeElement?.selectionStart||t.store.message()?.length;t.store.message.set(t.store.message()?.slice(0,a)+`{{${n}}}`+t.store.message()?.slice(a)),t.onMsgChange()})()}clearFiles(){this.store.attachments=[],this.store.sendWithCaption.set(!1),this.store.updateAttachmentsOverall(!1)}attachFile(n){var t=this;return(0,_.Z)(function*(){const a=n.target.files;for(let s of a){const c=yield w.M.toBase64(s);t.store.attachments.push(new w.M(s.name,s.size,s.type,c))}t.cd.detectChanges(),a.length>0&&(yield t.store.updateAttachmentsOverall(!0)),t.attachmentsUpdated.set(!0),t.inputDocuments.nativeElement.value=null,t.inputImages.nativeElement.value=null})()}removeAttachment(n){var t=this;return(0,_.Z)(function*(){setTimeout((0,_.Z)(function*(){t.store.attachments.splice(n,1),t.store.attachments?.length||t.store.sendWithCaption.set(!1),yield t.store.updateAttachmentsOverall(t.store.sendWithCaption())}),0)})()}downloadWrongNumber(){const n=this.store.proceesablePhoneData.phoneData.filter(c=>!c.isValid).map(c=>this.sheet.worksheet?.[c.sheetIndex]||{number:c.originalNumber}),t=ne.P6.json_to_sheet(n,{header:this.sheet.columnNames()}),s=ne.P6.book_new();ne.P6.book_append_sheet(s,t,"Wrong Numbers"),ne.NC(s,"wrong-phone-numbers.xls")}onPaste(n,t){setTimeout(()=>{this.addPhoneNumber(n),t&&this.focusOut(t)},100)}focusTag(n,t){n.classList.add("on-input"),n.querySelector("textarea").focus(),this.mainElement?.nativeElement.classList.add("tag-input-open"),this.phoneNumber.set(t.originalNumber)}focusOut(n){n?.classList.remove("on-input"),this.mainElement?.nativeElement.classList.remove("tag-input-open")}onMsgChange(n={}){"/"===n.key?this.attachTemplateDropdownInTextarea():this.msgTextarea?.nativeElement?.click()}onTimeGapChange(){this.store.timegapSettings.set(!this.store.timegapSettings())}onBatchGapChange(){this.store.batchSettings.set(!this.store.batchSettings())}get isPro(){return this.extDataService.isPro()}get showBanAlert(){const n=this.extDataService.isPro();return!!(this.store.banAlertTime()-Date.now()<=0&&this.extDataService?.appConfig?.suggestBanEnabled(this.extDataService?.currentUser?.phoneNumber))&&(n?this.store.proceesablePhoneData?.phoneData?.length>=2&&(this.store.attachments?.length>4||this.store.message()?.length&&(!this.store.timegapSettings()||!this.store.batchSettings())||this.store.message()?.length&&this.sheet.excelDetails&&!this.validCustomization()?.length||this.store.message()?.length>500||this.store.waitAfterpeople()>50):this.store.proceesablePhoneData?.phoneData?.length>50)}closeBanAlert(){this.store.banAlertTime.set(Date.now()+864e5)}saveTemplate(n=""){var t=this;return(0,_.Z)(function*(){yield t.templateStore.saveTemplate(n)})()}sendMessages(n){n===h.Operation.OPERATION_SEND_MESSAGE?(this.errorStore.recalculateErrors(),this.errorsCount=this.errorStore.getAllOccurredErrors()?.length,this.errorsCount?this.showRisks=!0:this.store.sendMessages(n,z.NO_ERROR_AND_SEND)):this.store.sendMessages(n,z.FILTER)}showErrorModal(){const t=this.errorStore.recalculateErrors().map(s=>s.id),a={};t.forEach(s=>{a[s]=!0}),this.log.log("show_anti_ban_error_modal",a),this.errorStore.onShowErrorModal()}toggleUnsubscription(){this.store.addUnsubscriptionText.set(!this.store.addUnsubscriptionText()),this.store.unsubscriptionText()||this.store.unsubscriptionText.set(h.MessageTemplate.DEFAULT_UNSUBSCRIPTION_TEXT),setTimeout(()=>{if(this.store.addUnsubscriptionText()){const n=this.unsubscriptionArea?.nativeElement;n&&(n.focus(),n.setSelectionRange(n.value.length,n.value.length))}},0)}proWarnSheetSelection(){this.extDataService.isPro()||this.uiService.showProWarning(B.B.SHEET_RANGE)}selectTemplateToDelete(n){this.templateToDelete=n,setTimeout(()=>{this.deleteBtn?.nativeElement.click()},0)}isActiveTemplateChanged(){const n=this.templateStore.getActiveTemplate();return!!n&&(this.store.message()!==n.template||this.store.sendWithCaption()!==n.sendWithCaption||this.store.addUnsubscriptionText()!==n.addUnsubscriptionText||this.store.unsubscriptionText()!==n.unsubscriptionText||this.attachmentsUpdated())}get isSendingNotAllowed(){return this.store.addUnsubscriptionText()&&!this.store.isValidUnsubscripitonText()||this.proOptions||!this.store.proceesablePhoneData?.phoneData?.length||0===this.store.proceesablePhoneData.validNumber||!this.store.message()?.trim()?.length}}return(o=i).\u0275fac=function(n){return new(n||o)(e.Y36(b.jI),e.Y36(Y.a),e.Y36(b.Fz),e.Y36(e.sBO),e.Y36(l.uU),e.Y36(q),e.Y36(me),e.Y36(X),e.Y36(K),e.Y36(b.mQ))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-excel-mapping-for-messaging"]],viewQuery:function(n,t){if(1&n&&(e.Gf(ye,5),e.Gf(Fe,5),e.Gf(De,5),e.Gf(Ie,5),e.Gf(Re,5),e.Gf(Ue,5),e.Gf(Le,5),e.Gf(Ge,5),e.Gf(Je,5),e.Gf(qe,5)),2&n){let a;e.iGM(a=e.CRH())&&(t.inputImages=a.first),e.iGM(a=e.CRH())&&(t.phoneInput=a.first),e.iGM(a=e.CRH())&&(t.dropdownRoot=a.first),e.iGM(a=e.CRH())&&(t.allTemplatesElement=a.first),e.iGM(a=e.CRH())&&(t.allTemplatesToggle=a.first),e.iGM(a=e.CRH())&&(t.mainElement=a.first),e.iGM(a=e.CRH())&&(t.inputDocuments=a.first),e.iGM(a=e.CRH())&&(t.msgTextarea=a.first),e.iGM(a=e.CRH())&&(t.deleteBtn=a.first),e.iGM(a=e.CRH())&&(t.unsubscriptionArea=a.first)}},inputs:{excelDetails:"excelDetails",file:"file"},outputs:{chooseFile:"chooseFile",clearFile:"clearFile"},features:[e.TTD],decls:125,vars:68,consts:[[1,"excel-mapper"],["main",""],[1,"phone-adder"],[1,"d-flex","w100p"],[1,"flex","j-flex-center","fs12","fw500"],[1,"fa-kit","fa-contact-book","mr3"],["class","import-contacts a-flex-center flex cp",3,"click",4,"ngIf"],["class","import-contacts a-flex-center flex",4,"ngIf"],["class","mapping mt5",4,"ngIf"],[1,"d-flex","w100p","mt5"],[1,"group-ids"],[1,"head"],[3,"preferredCountry","countryInfo","valueChange"],[1,"ids"],[4,"ngFor","ngForOf"],["class","number-tag cp","tabindex","1",3,"click",4,"ngIf"],["rows","1","type","text","id","main-number-input",3,"ngModel","placeholder","blur","paste","ngModelChange","keydown.backspace","keyup.space","keyup.enter",4,"ngIf"],["class","delete-all cp",3,"click",4,"ngIf"],[1,"messaging-details"],[1,"number-validations"],[4,"ngIf"],["class","msg-settings-preview cp",3,"click",4,"ngIf"],["class","msg-settings mt5 fs14 px10",4,"ngIf"],["class","mt10 d-block",3,"type","close",4,"ngIf"],["tone","error","class","mt10 d-block",3,"canClose","type",4,"ngIf"],[1,"message-creator"],[1,"head-content","mb5","mt10"],[1,"main","fs12","fw500"],[1,"fa-kit","fa-message-solid"],["class","text-error",4,"ngIf"],[1,"d-flex"],["class","mb10 d-block","tone","warning",3,"alignment","canClose",4,"ngIf"],[1,"text-area","mb5"],[1,"area-header"],["class","customizations",4,"ngIf"],["class","template-action-btn cp fs12 mr5","data-toggle","modal","data-target","#preview-modal",4,"ngIf"],[1,"dropdown"],["dropdownRoot",""],["rows","7","placeholder","Type / to use a saved message template",1,"w100p",3,"ngModel","ngModelChange","keyup"],["msgTextarea",""],["data-toggle","dropdown",1,"d-none"],["allTemplatesToggle",""],["class","dropdown-menu all-templates",4,"ngIf"],["class","w100p p10 mb5 unsubscribe-text","rows","1",3,"invalid","ngModel","ngModelChange",4,"ngIf"],[1,"action-bar","d-flex"],[1,"wrapper","d-flex","j-flex-start"],[1,"attachment-wrapper","dropdown"],["data-toggle","dropdown",1,"fs12","cp","p-relative"],[1,"fa-kit","fa-attachment","mr3"],["class","attachment-count",4,"ngIf"],[1,"dropdown-menu"],["class","checkbox-wrapper ml5",4,"ngIf"],[1,"wrapper","d-flex"],[1,"checkbox-wrapper","mr5"],["type","checkbox","name","addUnsubscriptionText","id","addUnsubscriptionText",3,"checked","change"],["for","addUnsubscriptionText",1,"fwn","fs12"],["class","redraft-msg flex",3,"disable-btn","click",4,"ngIf"],["class","btn btn-theme mt5 mb15",3,"disable","click",4,"ngIf"],["class","alert",3,"ngClass",4,"ngIf"],["accept","image/*,video/mp4,video/3gpp,video/quicktime","type","file","multiple","",2,"display","none",3,"change"],["inputImages",""],["type","file","multiple","",2,"display","none",3,"change"],["inputDocuments",""],["id","preview-modal","tabindex","-1","role","dialog","aria-labelledby","modalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content","p0"],[1,"modal-header","py10"],[1,"mb0"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body","p0"],["disabled","","rows","7",1,"w100p","p10"],["id","template-modal","tabindex","-1","role","dialog","aria-labelledby","modalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-content","p0","m-auto","modal-content","p0","w-fit-content"],["class","modal-body p10",4,"ngIf"],[4,"ngTemplateOutlet"],["id","update-template-modal","tabindex","-1","role","dialog","aria-labelledby","modalLabel","aria-hidden","true",1,"modal","fade"],["data-toggle","modal","data-target","#delete-template-modal",1,"action-btn"],["deleteBtn",""],["id","delete-template-modal","tabindex","-1","role","dialog","aria-labelledby","modalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-body","p10"],[1,"text-center"],[1,"fs36"],[1,"fa-kit","fa-trash"],[1,"ml5"],[1,"a-flex-center","d-flex","j-flex-start","mt10"],["data-dismiss","modal",1,"btn","btn-submit","w100p",3,"click"],["class","btn btn-light ml10 w100p","data-dismiss","modal","aria-label","Close",4,"ngIf"],["templateSaved",""],[1,"import-contacts","a-flex-center","flex","cp",3,"click"],[1,"fa-kit","fa-excel","mr3","text-crm"],[1,"tul"],[1,"import-contacts","a-flex-center","flex"],[1,"fa-kit","fa-excel","mr3"],[1,"close-sheet","cp",3,"click"],[1,"fa-kit","fa-x","text-danger"],[1,"mapping","mt5"],[1,"map-block"],[1,"block-item"],["data-toggle","dropdown",1,"bg-crm-white","br5","d-flex","p5","py3","block-item-name-wrapper"],[1,"block-item-name"],[1,"fa-kit","fa-chevron-down","fs7","ml5"],[1,"dropdown-menu","pt5","px10","pb0"],["class","item cp",3,"click",4,"ngFor","ngForOf"],[1,"block-item-name","phone-nos-col"],[1,"phone-nos-count","ml3","mr3"],[1,"fa-kit","fa-chevron-down","fs7"],[1,"sheet-input",3,"click"],["type","number","name","from",3,"ngModel","disabled","ngModelChange"],["class","d-flex fs10 pro fa-kit fa-lock",4,"ngIf"],["type","number","name","to",3,"ngModel","disabled","ngModelChange"],[1,"item","cp",3,"click"],[1,"d-flex","fs10","pro","fa-kit","fa-lock"],["tabindex","1",1,"number-tag"],["tag",""],[1,"number","cp",3,"click"],["class","fa-kit fa-x cp ml5",3,"click",4,"ngIf"],["rows","1",3,"ngModel","placeholder","blur","paste","ngModelChange","keyup.enter",4,"ngIf"],[1,"fa-kit","fa-x","cp","ml5",3,"click"],["rows","1",3,"ngModel","placeholder","blur","paste","ngModelChange","keyup.enter"],["tabindex","1",1,"number-tag","cp",3,"click"],["rows","1","type","text","id","main-number-input",3,"ngModel","placeholder","blur","paste","ngModelChange","keydown.backspace","keyup.space","keyup.enter"],["phoneInput",""],[1,"delete-all","cp",3,"click"],["class","tag validation correct cp",3,"title","click",4,"ngIf"],["class","tag validation wrong cp",3,"click",4,"ngIf"],[1,"tag","validation","correct","cp",3,"title","click"],[1,"fa-kit","fa-filter","d-flex"],[1,"tag","validation","wrong","cp",3,"click"],[1,"fa-kit","fa-download","d-flex"],[1,"msg-settings-preview","cp",3,"click"],[1,"d-flex","fs12"],[1,"fa-kit","fa-clock","d-flex","mr3"],["class","fa-kit fa-chevron-down",4,"ngIf"],["class","fa-kit fa-chevron-up",4,"ngIf"],[1,"tag"],[1,"fa-kit","fa-hourglass","d-flex"],[1,"fa-kit","fa-server","d-flex","mr5"],[1,"fa-kit","fa-clock","d-flex","mr5"],[1,"fa-kit","fa-chevron-down"],[1,"fa-kit","fa-chevron-up"],[1,"msg-settings","mt5","fs14","px10"],[1,"settings","d-flex"],[1,"content","d-flex"],[1,"section-title"],["type","number",3,"ngModel","ngModelChange"],["size","small","name","time-gap",1,"d-flex",3,"selected","selectedChange"],[1,"settings","mt10"],[1,"content"],["size","small","name","batch-gap",3,"selected","selectedChange"],[1,"mt10","d-block",3,"type","close"],["tone","error",1,"mt10","d-block",3,"canClose","type"],[1,"text-error"],["class","template-action-btn cp mr5 fs12 ","data-toggle","modal","data-target","#update-template-modal",3,"click",4,"ngIf"],["data-toggle","modal","data-target","#template-modal",1,"template-action-btn","cp","fs12",3,"click"],["data-toggle","modal","data-target","#update-template-modal",1,"template-action-btn","cp","mr5","fs12",3,"click"],["class","template-action-btn cp mr5 fs12",3,"click",4,"ngIf"],[1,"template-action-btn","cp","mr5","fs12",3,"click"],[1,"dropdown","ml5"],["data-toggle","dropdown",1,"template-action-btn","cp","p4"],[1,"fa-kit","fa-kebab-menu","fa-kit","fs11","ml5","mr5"],[1,"dropdown-menu","p10","l-unset","r0"],["class","option cp",3,"click",4,"ngIf"],[1,"option","cp",3,"click"],["tone","warning",1,"mb10","d-block",3,"alignment","canClose"],["head",""],[1,"customizations"],[1,"fwn","fs12"],["class","dropdown r0 lauto",4,"ngIf"],[1,"dropdown","r0","lauto"],["data-toggle","dropdown",1,"fs12","item","cp","d-flex"],[1,"fa-kit","fa-chevron-down","ml5","fs7"],[1,"dropdown-menu","pt5","px10","pb0","l-unset","r0"],["class","item cp mb5",3,"click",4,"ngFor","ngForOf"],[1,"item","cp","mb5",3,"click"],["data-toggle","modal","data-target","#preview-modal",1,"template-action-btn","cp","fs12","mr5"],[1,"icon-eye"],[1,"dropdown-menu","all-templates"],["allTemplates",""],[1,"p10"],[1,"form-control","template-search"],["type","text","name","","id","",1,"w100p",3,"ngModel","placeholder","ngModelChange"],["search",""],["class","fa-kit fa-x cp",3,"click",4,"ngIf"],["class","template-option",4,"ngIf"],[1,"fa-kit","fa-x","cp",3,"click"],[1,"template-option"],[1,"icon-cover","p10",3,"click"],["class","fa-kit fa-text fs12",4,"ngIf"],["class","fa-kit fa-union",4,"ngIf"],["class","fa-kit fa-document",4,"ngIf"],[1,"content-body","w100p",3,"click"],[1,"template-msg"],[1,"action-btns"],[1,"action-btn",3,"click"],[1,"fa-kit","fa-trash","text-danger"],[1,"fa-kit","fa-text","fs12"],[1,"fa-kit","fa-union"],[1,"fa-kit","fa-document"],["rows","1",1,"w100p","p10","mb5","unsubscribe-text",3,"ngModel","ngModelChange"],["unsubscriptionArea",""],[1,"text-crm-grey-dark-faded"],[1,"attachment-count"],[1,"previews-wrapper"],[1,"previews-header"],[1,"clear",3,"click"],["class","tt-grey preview",4,"ngFor","ngForOf"],[1,"add-new",3,"click"],[1,"tt-grey","preview"],[1,"flex","a-flex-center","preview-body"],["alt","File",3,"src"],[1,"ml5","file-name"],[1,"remove-attachment"],[1,"fa-kit","fa-x","d-flex","cp",3,"click"],[1,"fa-kit","fa-document","mr5"],[1,"fa-kit","fa-image","mr5"],[1,"checkbox-wrapper","ml5"],["type","checkbox","name","sendAsCaption","id","sendAsCaption",3,"checked","change"],["for","sendAsCaption",1,"fwn","fs12"],[1,"redraft-msg","flex",3,"click"],["class","fa-kit fa-lock ml5 d-flex",4,"ngIf"],[1,"fa-kit","fa-ai","mr3"],[1,"fa-kit","fa-lock","ml5","d-flex"],[1,"btn","btn-theme","mt5","mb15",3,"click"],["class","loader theme",4,"ngIf"],[1,"loader","theme"],[1,"alert",3,"ngClass"],[1,"d-flex","a-flex-center"],[1,"fa-kit","fa-ai","mr10"],[1,"message"],[1,"actions"],[1,"btn","ignore",3,"disabled","click"],[1,"btn","fix",3,"disabled","click"],["type","text","name","from",1,"input","form-control",3,"ngModel","placeholder","disabled","ngModelChange"],[1,"btn","btn-submit",3,"click"],["class","btn btn-light ml10","data-dismiss","modal","aria-label","Close",4,"ngIf"],["data-dismiss","modal","aria-label","Close",1,"btn","btn-light","ml10"],["data-dismiss","modal","aria-label","Close",1,"btn","btn-light","ml10","w100p"],["_ngcontent-ng-c2662400487","","src","../../../assets/img/web-mail.svg","alt","","srcset",""],[1,"mt10"]],template:function(n,t){if(1&n&&(e.TgZ(0,"div",0,1)(2,"div",2)(3,"div",3)(4,"div",4),e._UZ(5,"i",5),e.TgZ(6,"span"),e._uU(7),e.ALo(8,"jtranslate"),e.qZA()(),e.YNc(9,je,5,3,"div",6),e.YNc(10,Qe,6,1,"div",7),e.qZA(),e.YNc(11,We,42,25,"div",8),e.TgZ(12,"div",9)(13,"div",10)(14,"div",11)(15,"app-dial-code-picker",12),e.NdJ("valueChange",function(s){return t.onCountryCodeChange(s)}),e.qZA()(),e.TgZ(16,"div",13),e.YNc(17,Xe,2,1,"ng-container",14),e.ALo(18,"slice"),e.YNc(19,et,3,4,"span",15),e.YNc(20,tt,3,4,"textarea",16),e.qZA()(),e.YNc(21,nt,2,0,"div",17),e.qZA()(),e.TgZ(22,"div",18)(23,"div",19),e.YNc(24,at,3,2,"ng-container",20),e.qZA(),e.YNc(25,pt,9,7,"div",21),e.qZA(),e.YNc(26,gt,29,29,"div",22),e.YNc(27,_t,2,2,"app-pro-warn",23),e.YNc(28,ht,3,4,"app-pro-warn",24),e.TgZ(29,"div",25)(30,"div",26)(31,"div",27),e._UZ(32,"i",28),e.TgZ(33,"span"),e._uU(34),e.ALo(35,"jtranslate"),e.qZA(),e.YNc(36,ft,4,3,"span",29),e.qZA(),e.TgZ(37,"div",30),e.YNc(38,Mt,5,4,"ng-container",20),e.YNc(39,bt,2,1,"ng-container",20),e.YNc(40,Ot,6,1,"ng-conatainer",20),e.qZA()(),e.YNc(41,Pt,7,6,"app-alert",31),e.TgZ(42,"div",32)(43,"div",33),e.YNc(44,wt,7,5,"div",34),e.YNc(45,Zt,4,3,"div",35),e.qZA(),e.TgZ(46,"div",36,37)(48,"textarea",38,39),e.NdJ("ngModelChange",function(s){return t.store.message.set(s)})("keyup",function(s){return t.onMsgChange(s)}),e.qZA(),e.TgZ(50,"div",40,41),e._uU(52,"xx"),e.qZA(),e.YNc(53,It,11,8,"div",42),e.qZA(),e.YNc(54,Rt,3,3,"textarea",43),e.TgZ(55,"div",44)(56,"div",45)(57,"div",46)(58,"div",47),e._UZ(59,"i",48),e.YNc(60,Ut,3,3,"ng-container",20),e.YNc(61,Lt,6,6,"ng-container",20),e.YNc(62,Gt,2,1,"div",49),e.qZA(),e.TgZ(63,"div",50)(64,"form"),e.YNc(65,qt,12,4,"ng-container",20),e.YNc(66,jt,9,6,"ng-container",20),e.qZA()()(),e.YNc(67,Qt,5,4,"div",51),e.qZA(),e.TgZ(68,"div",52)(69,"div",53)(70,"input",54),e.NdJ("change",function(){return t.toggleUnsubscription()}),e.qZA(),e.TgZ(71,"label",55),e._uU(72),e.ALo(73,"jtranslate"),e.qZA()(),e.YNc(74,Ht,3,4,"a",56),e.qZA()()(),e.YNc(75,Kt,3,4,"button",57),e.YNc(76,nn,14,11,"div",58),e.qZA(),e.TgZ(77,"input",59,60),e.NdJ("change",function(s){return t.attachFile(s)}),e.qZA(),e.TgZ(79,"input",61,62),e.NdJ("change",function(s){return t.attachFile(s)}),e.qZA(),e.TgZ(81,"div",63)(82,"div",64)(83,"div",65)(84,"div",66)(85,"p",67)(86,"b"),e._uU(87),e.ALo(88,"jtranslate"),e.qZA()(),e.TgZ(89,"button",68)(90,"span",69),e._uU(91,"\xd7"),e.qZA()()(),e.TgZ(92,"div",70)(93,"textarea",71),e._uU(94),e.qZA()()()()(),e.TgZ(95,"div",72)(96,"div",64)(97,"div",73),e.YNc(98,sn,8,8,"div",74),e.YNc(99,ln,1,0,"ng-container",75),e.qZA()()(),e.TgZ(100,"div",76)(101,"div",64)(102,"div",73),e.YNc(103,dn,8,8,"div",74),e.YNc(104,_n,1,0,"ng-container",75),e.qZA()()(),e._UZ(105,"div",77,78),e.TgZ(107,"div",79)(108,"div",64)(109,"div",73)(110,"div",80)(111,"div",81)(112,"div",82),e._UZ(113,"i",83),e.qZA(),e.TgZ(114,"span",84),e._uU(115),e.ALo(116,"jtranslate"),e.qZA()(),e.TgZ(117,"div",85)(118,"button",86),e.NdJ("click",function(){return t.deleteTemplate(t.templateToDelete)}),e.TgZ(119,"span"),e._uU(120),e.ALo(121,"jtranslate"),e.qZA()(),e.YNc(122,mn,3,3,"button",87),e.qZA()()()()(),e.YNc(123,hn,1,1,"ng-template",null,88,e.W1O),e.qZA()),2&n){const a=e.MAs(124);let s,c,p,g,u,C,E,T,Z,y,F,S,I;e.xp6(7),e.Oqu(e.lcZ(8,50,"Contacts")),e.xp6(2),e.Q6J("ngIf",!t.sheet.excelDetails),e.xp6(1),e.Q6J("ngIf",t.sheet.excelDetails),e.xp6(1),e.Q6J("ngIf",t.sheet.excelDetails),e.xp6(4),e.Q6J("preferredCountry",t.preferredDialCode)("countryInfo",t.store.selectedCountryInfo()),e.xp6(1),e.ekj("disabled",t.sheet.excelDetails),e.xp6(1),e.Q6J("ngForOf",e.Dn7(18,52,null==t.store.proceesablePhoneData?null:t.store.proceesablePhoneData.phoneData,0,t.sliceNumber?100:null==t.store.proceesablePhoneData||null==t.store.proceesablePhoneData.phoneData?null:t.store.proceesablePhoneData.phoneData.length)),e.xp6(2),e.Q6J("ngIf",t.sliceNumber&&(null==t.store.proceesablePhoneData||null==t.store.proceesablePhoneData.phoneData?null:t.store.proceesablePhoneData.phoneData.length)>100),e.xp6(1),e.Q6J("ngIf",!t.sheet.excelDetails),e.xp6(1),e.Q6J("ngIf",!t.sheet.excelDetails&&(null==t.store.phoneNumberData||null==t.store.phoneNumberData.phoneData?null:t.store.phoneNumberData.phoneData.length)),e.xp6(3),e.Q6J("ngIf",t.store.phoneNumberData),e.xp6(1),e.Q6J("ngIf",(null==t.store.proceesablePhoneData?null:t.store.proceesablePhoneData.validNumber)>1),e.xp6(1),e.Q6J("ngIf",t.openSettings),e.xp6(1),e.Q6J("ngIf",t.store.proFeauters),e.xp6(1),e.Q6J("ngIf",t.proOptions),e.xp6(6),e.Oqu(e.lcZ(35,56,"Message box")),e.xp6(2),e.Q6J("ngIf",!(null!=(s=t.store.message())&&s.length)&&(null==t.store.phoneNumberData||null==t.store.phoneNumberData.phoneData?null:t.store.phoneNumberData.phoneData.length)),e.xp6(2),e.Q6J("ngIf",t.extDataService.isPro()&&(null==(c=t.store.message())||null==(p=c.trim())?null:p.length)),e.xp6(1),e.Q6J("ngIf",!(null!=(g=t.store.message())&&null!=(u=g.trim())&&u.length)&&(null==t.templateStore||null==(g=t.templateStore.templates())?null:g.length)),e.xp6(1),e.Q6J("ngIf",(null==(C=t.store.message())||null==(E=C.trim())?null:E.length)&&(null==t.templateStore||null==(C=t.templateStore.templates())?null:C.length)),e.xp6(1),e.Q6J("ngIf",t.sheet.excelDetails&&(null==(T=t.invalidCustomization())?null:T.length)),e.xp6(3),e.Q6J("ngIf",null==(Z=t.sheet.columnNames())?null:Z.length),e.xp6(1),e.Q6J("ngIf",(null==(y=t.sheet.columnNames())?null:y.length)&&(null==(y=t.validCustomization())?null:y.length)),e.xp6(3),e.Q6J("ngModel",t.store.message()),e.xp6(5),e.Q6J("ngIf",null==t.templateStore||null==(F=t.templateStore.templates())?null:F.length),e.xp6(1),e.Q6J("ngIf",t.store.addUnsubscriptionText()),e.xp6(1),e.ekj("pt15",null==t.store.attachments?null:t.store.attachments.length),e.xp6(5),e.Q6J("ngIf",null==t.store.attachments?null:t.store.attachments.length),e.xp6(1),e.Q6J("ngIf",!(null!=t.store.attachments&&t.store.attachments.length)),e.xp6(1),e.Q6J("ngIf",null==t.store.attachments?null:t.store.attachments.length),e.xp6(3),e.Q6J("ngIf",null==t.store.attachments?null:t.store.attachments.length),e.xp6(1),e.Q6J("ngIf",!(null!=t.store.attachments&&t.store.attachments.length)),e.xp6(1),e.Q6J("ngIf",null==t.store.attachments?null:t.store.attachments.length),e.xp6(3),e.Q6J("checked",t.store.addUnsubscriptionText()),e.xp6(2),e.Oqu(e.lcZ(73,58,"Unsubscribe option")),e.xp6(2),e.Q6J("ngIf",(null==(S=t.store.message())?null:S.trim())&&!t.errorStore.messageRedrafted),e.xp6(1),e.Q6J("ngIf",!t.showRisks||!t.risk()),e.xp6(1),e.Q6J("ngIf",t.showRisks&&t.risk()),e.xp6(11),e.Oqu(e.lcZ(88,60,"Preview")),e.xp6(7),e.hij("                        ",null==(I=t.variableMapper.getMappedText(null!=t.extDataService&&t.extDataService.isPro()?(null==t.sheet.worksheet?null:t.sheet.worksheet[t.sheet.startRow()-2])||e.DdM(66,ue):e.DdM(67,ue),t.store.message()))?null:I.trim(),"\n                    "),e.xp6(4),e.Q6J("ngIf",!t.templateStore.templateSaved),e.xp6(1),e.Q6J("ngTemplateOutlet",a),e.xp6(4),e.Q6J("ngIf",!t.templateStore.templateSaved),e.xp6(1),e.Q6J("ngTemplateOutlet",a),e.xp6(11),e.hij(" ",e.lcZ(116,62,"Are you sure you want to delete this template?")," "),e.xp6(5),e.Oqu(e.lcZ(121,64,"Delete")),e.xp6(2),e.Q6J("ngIf",!t.templateStore.savingtemplate)}},dependencies:[l.mk,l.sg,l.O5,l.tP,v._Y,v.Fj,v.wV,v.JJ,v.JL,v.On,v.F,Ne.U,Ae.V,ge.w,ke,l.OU,oe.Q],styles:[".excel-mapper.tag-input-open[_ngcontent-%COMP%]   #main-number-input[_ngcontent-%COMP%]{display:none}.excel-mapper[_ngcontent-%COMP%]   .phone-adder[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;justify-content:center}.excel-mapper[_ngcontent-%COMP%]   .phone-adder[_ngcontent-%COMP%]   .import-contacts[_ngcontent-%COMP%]{display:flex;align-items:center;color:#000c}.excel-mapper[_ngcontent-%COMP%]   .phone-adder[_ngcontent-%COMP%]   .import-contacts[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:18px;margin-right:3px}.excel-mapper[_ngcontent-%COMP%]   .phone-adder[_ngcontent-%COMP%]   .import-contacts[_ngcontent-%COMP%]   .tul[_ngcontent-%COMP%]{color:#019f53}.excel-mapper[_ngcontent-%COMP%]   .phone-adder[_ngcontent-%COMP%]   .import-contacts[_ngcontent-%COMP%]   .close-sheet[_ngcontent-%COMP%]{border-radius:4px;background:rgba(0,0,0,.05);display:flex;padding:6px 5px;flex-direction:column;justify-content:center;align-items:center;gap:10px;font-size:12px;margin-left:4px}.excel-mapper[_ngcontent-%COMP%]   .phone-adder[_ngcontent-%COMP%]   .import-contacts[_ngcontent-%COMP%]   .close-sheet[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#616161}.excel-mapper[_ngcontent-%COMP%]   .phone-adder[_ngcontent-%COMP%]   .import-contacts[_ngcontent-%COMP%]   .close-sheet[_ngcontent-%COMP%]   i.text-danger[_ngcontent-%COMP%]{color:#b42727}.excel-mapper[_ngcontent-%COMP%]   .phone-adder[_ngcontent-%COMP%]   .mapping[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:flex-start;gap:12px;padding:8px;background:grey;background:#FAFAFA;border-radius:7px}.excel-mapper[_ngcontent-%COMP%]   .phone-adder[_ngcontent-%COMP%]   .mapping[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{background:#F5F5F5;border-radius:6px;padding:2px 10px;font-size:12px;margin-bottom:5px}.excel-mapper[_ngcontent-%COMP%]   .phone-adder[_ngcontent-%COMP%]   .mapping[_ngcontent-%COMP%]   .map-block[_ngcontent-%COMP%]{display:flex;white-space:nowrap;align-items:center;gap:6px;font-size:12px}.excel-mapper[_ngcontent-%COMP%]   .phone-adder[_ngcontent-%COMP%]   .mapping[_ngcontent-%COMP%]   .map-block[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{background:#F5F5F5;border-radius:6px;padding:2px 10px;font-size:12px;margin-bottom:5px}.excel-mapper[_ngcontent-%COMP%]   .phone-adder[_ngcontent-%COMP%]   .mapping[_ngcontent-%COMP%]   .map-block[_ngcontent-%COMP%]   .sheet-input[_ngcontent-%COMP%]{padding:0 5px 0 0;height:auto;font-size:13px;box-shadow:none;border-radius:4px;border:1px solid rgba(0,0,0,.05);overflow:hidden;background-color:#fff;display:flex;align-items:center}.excel-mapper[_ngcontent-%COMP%]   .phone-adder[_ngcontent-%COMP%]   .mapping[_ngcontent-%COMP%]   .map-block[_ngcontent-%COMP%]   .sheet-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:5px;width:35px}.excel-mapper[_ngcontent-%COMP%]   .phone-adder[_ngcontent-%COMP%]   .mapping[_ngcontent-%COMP%]   .map-block[_ngcontent-%COMP%]   .sheet-input.form-control[disabled][_ngcontent-%COMP%]{background-color:#fff}.excel-mapper[_ngcontent-%COMP%]   .phone-adder[_ngcontent-%COMP%]   .mapping[_ngcontent-%COMP%]   .map-block[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{color:gray}.excel-mapper[_ngcontent-%COMP%]   .phone-adder[_ngcontent-%COMP%]   .mapping[_ngcontent-%COMP%]   .map-block[_ngcontent-%COMP%]   .block-item[_ngcontent-%COMP%]{display:flex;gap:3px;align-items:center;cursor:pointer}.excel-mapper[_ngcontent-%COMP%]   .phone-adder[_ngcontent-%COMP%]   .mapping[_ngcontent-%COMP%]   .map-block[_ngcontent-%COMP%]   .block-item[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[data-toggle=dropdown][_ngcontent-%COMP%]{max-width:133px;overflow:hidden;text-overflow:ellipsis}.excel-mapper[_ngcontent-%COMP%]   .phone-adder[_ngcontent-%COMP%]   .mapping[_ngcontent-%COMP%]   .map-block[_ngcontent-%COMP%]   .block-item[_ngcontent-%COMP%]   .block-item-name-wrapper[_ngcontent-%COMP%]{max-width:120px}.excel-mapper[_ngcontent-%COMP%]   .phone-adder[_ngcontent-%COMP%]   .mapping[_ngcontent-%COMP%]   .map-block[_ngcontent-%COMP%]   .block-item[_ngcontent-%COMP%]   .block-item-name-wrapper[_ngcontent-%COMP%]   .block-item-name[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.excel-mapper[_ngcontent-%COMP%]   .phone-adder[_ngcontent-%COMP%]   .mapping[_ngcontent-%COMP%]   .map-block[_ngcontent-%COMP%]   .block-item[_ngcontent-%COMP%]   .block-item-name-wrapper[_ngcontent-%COMP%]   .block-item-name.phone-nos-col[_ngcontent-%COMP%]{max-width:250px;display:block}.excel-mapper[_ngcontent-%COMP%]   .phone-adder[_ngcontent-%COMP%]   .mapping[_ngcontent-%COMP%]   .map-block[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{display:flex;align-items:center}.excel-mapper[_ngcontent-%COMP%]   .phone-adder[_ngcontent-%COMP%]   .mapping[_ngcontent-%COMP%]   .map-block[_ngcontent-%COMP%]:last-child   .block-item[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{right:0;left:unset}.excel-mapper[_ngcontent-%COMP%]   .phone-adder[_ngcontent-%COMP%]   .group-ids[_ngcontent-%COMP%]{width:100%;display:flex;border:1px solid #dbdbdb;border-radius:8px}.excel-mapper[_ngcontent-%COMP%]   .phone-adder[_ngcontent-%COMP%]   .group-ids[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{padding:10px;flex-shrink:0;background:#ebebeb;display:flex;justify-content:center;align-items:center}.excel-mapper[_ngcontent-%COMP%]   .phone-adder[_ngcontent-%COMP%]   .group-ids[_ngcontent-%COMP%]   .ids[_ngcontent-%COMP%]{width:100%;padding:10px;display:flex;flex-wrap:wrap;gap:4px;max-height:85px;overflow:auto}.excel-mapper[_ngcontent-%COMP%]   .phone-adder[_ngcontent-%COMP%]   .group-ids[_ngcontent-%COMP%]   .ids.disabled[_ngcontent-%COMP%]{background:#fafafa}.excel-mapper[_ngcontent-%COMP%]   .phone-adder[_ngcontent-%COMP%]   .group-ids[_ngcontent-%COMP%]   .ids.disabled[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{pointer-events:none}.excel-mapper[_ngcontent-%COMP%]   .phone-adder[_ngcontent-%COMP%]   .group-ids[_ngcontent-%COMP%]   .ids[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{flex:1 0 auto;resize:none}.excel-mapper[_ngcontent-%COMP%]   .phone-adder[_ngcontent-%COMP%]   .group-ids[_ngcontent-%COMP%]   .ids[_ngcontent-%COMP%]   .number-tag[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{font-size:12px;padding:4px 6px;display:flex;align-items:center;border-radius:3px;border:1px solid #E6E6E6;background:#F5F5F5;color:#818181;height:-moz-fit-content;height:fit-content}.excel-mapper[_ngcontent-%COMP%]   .phone-adder[_ngcontent-%COMP%]   .group-ids[_ngcontent-%COMP%]   .ids[_ngcontent-%COMP%]   .number-tag[_ngcontent-%COMP%]   .number.invalid[_ngcontent-%COMP%]{border:1px solid #FFC2C2;background:#FFEFEF}.excel-mapper[_ngcontent-%COMP%]   .phone-adder[_ngcontent-%COMP%]   .group-ids[_ngcontent-%COMP%]   .ids[_ngcontent-%COMP%]   .number-tag[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{display:none}.excel-mapper[_ngcontent-%COMP%]   .phone-adder[_ngcontent-%COMP%]   .group-ids[_ngcontent-%COMP%]   .ids[_ngcontent-%COMP%]   .number-tag.on-input[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{display:block}.excel-mapper[_ngcontent-%COMP%]   .phone-adder[_ngcontent-%COMP%]   .group-ids[_ngcontent-%COMP%]   .ids[_ngcontent-%COMP%]   .number-tag.on-input[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{display:none}.excel-mapper[_ngcontent-%COMP%]   .phone-adder[_ngcontent-%COMP%]   .group-ids[_ngcontent-%COMP%]   .ids[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{border:none;outline:none;height:-moz-fit-content;height:fit-content}.excel-mapper[_ngcontent-%COMP%]   .phone-adder[_ngcontent-%COMP%]   .group-ids[_ngcontent-%COMP%]   .csv-import[_ngcontent-%COMP%]{display:flex;padding:5px 10px 2px;flex-direction:column;justify-content:center;align-items:center;background:rgba(1,159,83,.05)}.excel-mapper[_ngcontent-%COMP%]   .phone-adder[_ngcontent-%COMP%]   .group-ids[_ngcontent-%COMP%]   .csv-import[_ngcontent-%COMP%]   .csv-label[_ngcontent-%COMP%]{font-size:11px}.excel-mapper[_ngcontent-%COMP%]   .phone-adder[_ngcontent-%COMP%]   .delete-all[_ngcontent-%COMP%]{display:flex;padding-left:7px;flex-direction:column;justify-content:center;align-items:center;color:#b42727}.excel-mapper[_ngcontent-%COMP%]   .messaging-details[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;justify-content:space-between;margin-top:10px}.excel-mapper[_ngcontent-%COMP%]   .messaging-details[_ngcontent-%COMP%]   .msg-settings-preview[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.excel-mapper[_ngcontent-%COMP%]   .messaging-details[_ngcontent-%COMP%]   .number-validations[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.excel-mapper[_ngcontent-%COMP%]   .messaging-details[_ngcontent-%COMP%]   .number-validations[_ngcontent-%COMP%]   .validation.correct[_ngcontent-%COMP%]{background:#F5F5F5}.excel-mapper[_ngcontent-%COMP%]   .messaging-details[_ngcontent-%COMP%]   .number-validations[_ngcontent-%COMP%]   .validation.wrong[_ngcontent-%COMP%]{background:#FFEFEF}.excel-mapper[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{border-radius:4px;display:flex;padding:4px;align-items:center;gap:4px;font-size:12px;color:#818181;background:#F5F5F5}.excel-mapper[_ngcontent-%COMP%]   .group-errors[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-top:7px}.excel-mapper[_ngcontent-%COMP%]   .group-errors[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{display:flex;align-items:center;gap:7px}.excel-mapper[_ngcontent-%COMP%]   .group-errors[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:2px;border:1px solid grey;display:inline-block}.excel-mapper[_ngcontent-%COMP%]   .group-errors[_ngcontent-%COMP%]   .error.not-found[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:orange}.excel-mapper[_ngcontent-%COMP%]   .group-errors[_ngcontent-%COMP%]   .error.duplicate[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:red}.excel-mapper[_ngcontent-%COMP%]   .msg-settings[_ngcontent-%COMP%]   .settings[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.excel-mapper[_ngcontent-%COMP%]   .msg-settings[_ngcontent-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-weight:500}.excel-mapper[_ngcontent-%COMP%]   .msg-settings[_ngcontent-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;white-space:nowrap;gap:6px;color:#818181}.excel-mapper[_ngcontent-%COMP%]   .msg-settings[_ngcontent-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#000}.excel-mapper[_ngcontent-%COMP%]   .msg-settings[_ngcontent-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;outline:none;background:#f5f5f5;width:34px;border-radius:3px}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]{margin-top:10px}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   .btn-theme.disable[_ngcontent-%COMP%]{background-color:#019f538a!important;box-shadow:none;cursor:not-allowed}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   .head-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:10px}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   .head-content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{font-size:14px;font-weight:600;display:flex;align-items:center;gap:4px}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   .head-content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{display:inline-flex}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   .text-error[_ngcontent-%COMP%]{color:#b42727}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   .template-action-btn[_ngcontent-%COMP%]{display:flex;padding:3px 4px;align-items:center;gap:4px;border-radius:4px;background:#F5F5F5}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   .text-area[_ngcontent-%COMP%]{position:relative;margin-top:5px;border:1px solid #dbdbdb;border-radius:5px}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   .text-area[_ngcontent-%COMP%]   .redraft-msg[_ngcontent-%COMP%]{font-size:12px;color:#019f53;text-decoration:underline;cursor:pointer}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   .text-area[_ngcontent-%COMP%]   .redraft-msg.disable-btn[_ngcontent-%COMP%]{color:#0000004d}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   .text-area[_ngcontent-%COMP%]   .area-header[_ngcontent-%COMP%]{padding:8px 10px 0%;display:flex;align-items:center;justify-content:space-between}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   .text-area[_ngcontent-%COMP%]   .area-header[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{display:none;margin:0}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   .text-area[_ngcontent-%COMP%]   .area-header[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] ~ hr[_ngcontent-%COMP%]{display:block;border-bottom:1px solid #F5F5F5}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   .text-area[_ngcontent-%COMP%]   .area-header[_ngcontent-%COMP%]   .customizations[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:5px}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   .text-area[_ngcontent-%COMP%]   .area-header[_ngcontent-%COMP%]   .customizations[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{background:#F5F5F5;border-radius:6px;padding:2px 10px;font-size:12px}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   .text-area[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{border:none;outline:none;padding:5px 10px 15px;min-height:200px}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   .text-area[_ngcontent-%COMP%]   textarea.unsubscribe-text[_ngcontent-%COMP%]{min-height:unset;max-height:84px;background-color:#0000000a;margin-bottom:0!important;border-radius:0}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   .text-area[_ngcontent-%COMP%]   textarea.unsubscribe-text[_ngcontent-%COMP%]:focus{border:2px solid #019F53;outline:3px solid rgba(1,159,83,.2)}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   .text-area[_ngcontent-%COMP%]   .all-templates[_ngcontent-%COMP%]{top:120px;left:42px;max-height:400px;overflow:auto}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   .text-area[_ngcontent-%COMP%]   .all-templates[_ngcontent-%COMP%]   .template-search[_ngcontent-%COMP%]{position:relative;display:block;min-height:auto;height:auto;display:flex;align-items:center;padding:5px 10px!important}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   .text-area[_ngcontent-%COMP%]   .all-templates[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{height:12px;width:12px}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   .text-area[_ngcontent-%COMP%]   .all-templates[_ngcontent-%COMP%]   .template-option[_ngcontent-%COMP%]{width:350px;cursor:pointer;white-space:nowrap;border-radius:3px;padding:8px 12px}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   .text-area[_ngcontent-%COMP%]   .all-templates[_ngcontent-%COMP%]   .template-option[_ngcontent-%COMP%]   .icon-cover[_ngcontent-%COMP%]{display:flex;padding:3px 4px;align-items:center;gap:4px;border-radius:4px;background:#F5F5F5;font-size:16px}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   .text-area[_ngcontent-%COMP%]   .all-templates[_ngcontent-%COMP%]   .template-option[_ngcontent-%COMP%]:hover{background-color:#fafafa}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   .text-area[_ngcontent-%COMP%]   .all-templates[_ngcontent-%COMP%]   .template-option[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;gap:8px}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   .text-area[_ngcontent-%COMP%]   .all-templates[_ngcontent-%COMP%]   .template-option[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .content-body[_ngcontent-%COMP%]{overflow:hidden;font-size:12px}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   .text-area[_ngcontent-%COMP%]   .all-templates[_ngcontent-%COMP%]   .template-option[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .template-msg[_ngcontent-%COMP%]{color:#818181;overflow:hidden;text-overflow:ellipsis;line-height:normal}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   .text-area[_ngcontent-%COMP%]   .all-templates[_ngcontent-%COMP%]   .template-option[_ngcontent-%COMP%]   .action-btns[_ngcontent-%COMP%]{display:none}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   .text-area[_ngcontent-%COMP%]   .all-templates[_ngcontent-%COMP%]   .template-option[_ngcontent-%COMP%]:hover   .action-btns[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   .text-area[_ngcontent-%COMP%]   .action-bar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:5px 10px;border-top:1px solid #F5F5F5;position:relative}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   .text-area[_ngcontent-%COMP%]   .action-bar[_ngcontent-%COMP%]   .checkbox-wrapper[_ngcontent-%COMP%]{padding:3px;display:flex;align-items:center}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   .text-area[_ngcontent-%COMP%]   .action-bar[_ngcontent-%COMP%]   .attachment-wrapper[_ngcontent-%COMP%]   .attachment-count[_ngcontent-%COMP%]{position:absolute;left:4px;top:-10px;border-radius:30px;border:1px solid #FFF;background:#019F53;padding:0 5px;color:#fff;font-size:10px}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   .text-area[_ngcontent-%COMP%]   .action-bar[_ngcontent-%COMP%]   .attachment-wrapper[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{display:flex;gap:5px}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   .text-area[_ngcontent-%COMP%]   .action-bar[_ngcontent-%COMP%]   .attachment-wrapper[_ngcontent-%COMP%]   .previews-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;position:relative;max-height:300px;overflow:auto;font-size:12px;white-space:nowrap}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   .text-area[_ngcontent-%COMP%]   .action-bar[_ngcontent-%COMP%]   .attachment-wrapper[_ngcontent-%COMP%]   .previews-wrapper[_ngcontent-%COMP%]   .previews-header[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.04);display:flex;align-items:center;justify-content:space-between;font-size:13px;padding:4px 10px}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   .text-area[_ngcontent-%COMP%]   .action-bar[_ngcontent-%COMP%]   .attachment-wrapper[_ngcontent-%COMP%]   .previews-wrapper[_ngcontent-%COMP%]   .previews-header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#b42727}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   .text-area[_ngcontent-%COMP%]   .action-bar[_ngcontent-%COMP%]   .attachment-wrapper[_ngcontent-%COMP%]   .previews-wrapper[_ngcontent-%COMP%]   .remove-attachment[_ngcontent-%COMP%]{color:#616161;border:1px solid #fff;font-size:11px;background:rgba(0,0,0,.05);display:flex;align-items:center;justify-content:center;border-radius:200px;padding:4px}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   .text-area[_ngcontent-%COMP%]   .action-bar[_ngcontent-%COMP%]   .attachment-wrapper[_ngcontent-%COMP%]   .previews-wrapper[_ngcontent-%COMP%]   .add-new[_ngcontent-%COMP%]{padding:10px 10px 7px;text-align:center;color:#019f53;border-top:1px solid rgba(0,0,0,.05);position:sticky;bottom:0;background:white}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   .text-area[_ngcontent-%COMP%]   .action-bar[_ngcontent-%COMP%]   .attachment-wrapper[_ngcontent-%COMP%]   .previews-wrapper[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{position:relative;width:-moz-fit-content;width:fit-content;display:flex;align-items:center;justify-content:space-between;width:300px;gap:10px;padding:0 10px}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   .text-area[_ngcontent-%COMP%]   .action-bar[_ngcontent-%COMP%]   .attachment-wrapper[_ngcontent-%COMP%]   .previews-wrapper[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-body[_ngcontent-%COMP%], .excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   .text-area[_ngcontent-%COMP%]   .action-bar[_ngcontent-%COMP%]   .attachment-wrapper[_ngcontent-%COMP%]   .previews-wrapper[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-body[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   .text-area[_ngcontent-%COMP%]   .action-bar[_ngcontent-%COMP%]   .attachment-wrapper[_ngcontent-%COMP%]   .previews-wrapper[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:25px;width:28px;border-radius:5px}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   .text-area[_ngcontent-%COMP%]   .action-bar[_ngcontent-%COMP%]   .attachment-wrapper[_ngcontent-%COMP%]   .previews-wrapper[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover ~ .tooltip[_ngcontent-%COMP%]{display:block;position:absolute}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   .text-area[_ngcontent-%COMP%]   .action-bar[_ngcontent-%COMP%]   .attachment-wrapper[_ngcontent-%COMP%]   .previews-wrapper[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .tooltip[_ngcontent-%COMP%]{display:none}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   .text-area[_ngcontent-%COMP%]   .action-bar[_ngcontent-%COMP%]   .attachment-wrapper[_ngcontent-%COMP%]   .previews-wrapper[_ngcontent-%COMP%]   .plus-count[_ngcontent-%COMP%]{padding:2px 6px;display:flex;align-self:center;font-weight:700;font-size:16px;background:rgb(220,220,220);border-radius:4px;margin-right:3px}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   .text-area[_ngcontent-%COMP%]   .action-bar[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:flex;padding:5px}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{display:flex;padding:8px 12px;align-items:center;gap:10px;border-radius:4px;border:1px solid rgba(3,8,2,.1)}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   textarea.invalid[_ngcontent-%COMP%]{box-shadow:0 0 8px #b42727}.excel-mapper[_ngcontent-%COMP%]   .message-creator[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border:2px solid #019F53;outline:3px solid rgba(1,159,83,.2)}.modal-dialog[_ngcontent-%COMP%]{margin-top:300px}.modal-dialog[_ngcontent-%COMP%]   button.close[_ngcontent-%COMP%]{margin-top:-25px!important;margin-right:0!important;padding:5px}textarea[_ngcontent-%COMP%]{border:none;outline:none;padding:5px 10px;border-radius:4px;background:transparent}textarea[_ngcontent-%COMP%]:disabled{background-color:transparent}.dropdown-menu[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid rgba(230,230,230,.6)}.dropdown-menu[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{padding:5px}.dropdown-menu[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:hover{background-color:#e6e6e699}.alert[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;border-radius:6px;font-family:sans-serif;margin-bottom:12px}.alert[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{flex-shrink:0;width:16px;height:16px;margin-right:12px;fill:currentColor}.alert[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{flex:1;font-size:14px;color:#222}.alert[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:8px}.alert[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:6px 12px;font-size:14px;border-radius:4px;cursor:pointer;border:1px solid transparent}.alert[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn.ignore[_ngcontent-%COMP%]{background-color:#fff;color:#222;border-color:#ccc}.alert[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn.fix[_ngcontent-%COMP%]{background-color:#10b981;color:#fff}.alert-LOW[_ngcontent-%COMP%]{background:rgba(0,0,0,.04)}.alert-LOW[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#555}.alert-MEDIUM[_ngcontent-%COMP%]{background:rgba(215,154,0,.08)}.alert-MEDIUM[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#d97706}.alert-HIGH[_ngcontent-%COMP%]{background:rgba(180,39,39,.08)}.alert-HIGH[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#b91c1c}input[_ngcontent-%COMP%]{box-shadow:none!important;outline:none;border:none}#template-modal[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], #update-template-modal[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid #ccc}"]}),i})();function xn(o,i){}function Mn(o,i){1&o&&e.YNc(0,xn,0,0,"ng-template")}const Cn=function(o){return{errorId:o}};function bn(o,i){if(1&o){const r=e.EpF();e.TgZ(0,"li")(1,"span",28),e.NdJ("click",function(){const a=e.CHM(r).$implicit,s=e.oxw();return e.KtG(s.selectError(a.id))}),e.YNc(2,Mn,1,0,null,29),e.qZA()()}if(2&o){const r=i.$implicit,n=e.oxw(),t=e.MAs(34);e.ekj("active",r.errorProcessState===n.errorProcessState.INPROGRESS)("completed",r.errorProcessState===n.errorProcessState.PROCESSED||r.errorProcessState===n.errorProcessState.CANCELLED),e.xp6(2),e.Q6J("ngTemplateOutlet",t)("ngTemplateOutletContext",e.VKq(6,Cn,r.id))}}function vn(o,i){1&o&&(e.TgZ(0,"span"),e._UZ(1,"i",33),e._uU(2),e.ALo(3,"jtranslate"),e.qZA()),2&o&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"Fix all")," "))}function On(o,i){1&o&&e._UZ(0,"i",34)}function Pn(o,i){1&o&&e._UZ(0,"div",35)}function En(o,i){if(1&o){const r=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.isPro?t.errorStore.fixAll():t.ui.showProWarning("fix-all"))}),e.YNc(1,vn,4,3,"span",20),e.YNc(2,On,1,0,"i",31),e.YNc(3,Pn,1,0,"div",32),e.qZA()}if(2&o){const r=e.oxw();e.ekj("disable-btn",!r.isPro),e.xp6(1),e.Q6J("ngIf",!r.errorStore.fixingAll),e.xp6(1),e.Q6J("ngIf",!r.isPro),e.xp6(1),e.Q6J("ngIf",r.errorStore.fixingAll)}}function Tn(o,i){}function wn(o,i){if(1&o){const r=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.send())}),e._uU(1),e.ALo(2,"jtranslate"),e.qZA()}2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Send")," "))}function Zn(o,i){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"jtranslate"),e.ALo(3,"jtranslate"),e.qZA()),2&o){const r=e.oxw(2);let n;e.xp6(1),e.AsE(" ",e.lcZ(2,2,null==(n=r.errorStore.inprogressError())||null==n.actionBtn?null:n.actionBtn.label)," ",(null==(n=r.errorStore.activeSegmentErrors())?null:n.length)===r.errorStore.inprogressErrorIndex()+1?e.lcZ(3,4," & Send"):""," ")}}function Nn(o,i){1&o&&e._UZ(0,"div",35)}function An(o,i){1&o&&e._UZ(0,"i",34)}function Sn(o,i){if(1&o){const r=e.EpF();e.ynx(0),e.TgZ(1,"button",36),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();let a;return e.KtG(t.isPro||null!=(a=t.errorStore.inprogressError())&&a.isAllowedForFreeUser?null==(a=t.errorStore.inprogressError())||null==a.actionBtn?null:a.actionBtn.action():t.ui.showProWarning(null==(a=t.errorStore.inprogressError())?null:a.id))}),e.YNc(2,Zn,4,6,"span",20),e.YNc(3,Nn,1,0,"div",32),e.YNc(4,An,1,0,"i",31),e.qZA(),e.TgZ(5,"button",37),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();let a;return e.KtG(null==(a=t.errorStore.inprogressError())||null==a.skipBtn?null:a.skipBtn.action())}),e._uU(6),e.ALo(7,"jtranslate"),e.qZA(),e.BQk()}if(2&o){const r=e.oxw();let n,t,a,s,c,p;e.xp6(1),e.ekj("disable-btn",!(r.isPro||null!=(n=r.errorStore.inprogressError())&&n.isAllowedForFreeUser))("pe-none",null==(t=r.errorStore.inprogressError())||null==t.actionBtn?null:t.actionBtn.isLoading),e.xp6(1),e.Q6J("ngIf",!(null!=(a=r.errorStore.inprogressError())&&null!=a.actionBtn&&a.actionBtn.isLoading)),e.xp6(1),e.Q6J("ngIf",null==(s=r.errorStore.inprogressError())||null==s.actionBtn?null:s.actionBtn.isLoading),e.xp6(1),e.Q6J("ngIf",!(r.isPro||null!=(c=r.errorStore.inprogressError())&&c.isAllowedForFreeUser)),e.xp6(2),e.hij(" ",e.lcZ(7,8,null==(p=r.errorStore.inprogressError())||null==p.skipBtn?null:p.skipBtn.label)," ")}}function kn(o,i){1&o&&(e.ynx(0),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"jtranslate"),e.qZA(),e.BQk()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"High message count")))}function yn(o,i){1&o&&(e.ynx(0),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"jtranslate"),e.qZA(),e.BQk()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"New WA number")))}function Fn(o,i){1&o&&(e.ynx(0),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"jtranslate"),e.qZA(),e.BQk()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"High messaging speed")))}function Dn(o,i){1&o&&(e.ynx(0),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"jtranslate"),e.qZA(),e.BQk()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"Promotional msg content")))}function In(o,i){1&o&&(e.ynx(0),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"jtranslate"),e.qZA(),e.BQk()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"No unsubscribe")))}function Rn(o,i){1&o&&(e.ynx(0),e._UZ(1,"br"),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"jtranslate"),e.qZA(),e.BQk()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"Select an error to proceed")))}function Un(o,i){if(1&o&&(e.ynx(0,38),e.YNc(1,kn,4,3,"ng-container",39),e.YNc(2,yn,4,3,"ng-container",39),e.YNc(3,Fn,4,3,"ng-container",39),e.YNc(4,Dn,4,3,"ng-container",39),e.YNc(5,In,4,3,"ng-container",39),e.YNc(6,Rn,5,3,"ng-container",40),e.BQk()),2&o){const r=i.errorId,n=e.oxw();e.Q6J("ngSwitch",r),e.xp6(1),e.Q6J("ngSwitchCase",n.messagingErrorIds.HIGH_MESSAGE_COUNT_ERROR),e.xp6(1),e.Q6J("ngSwitchCase",n.messagingErrorIds.NEW_WA_NUMBER_ERROR),e.xp6(1),e.Q6J("ngSwitchCase",n.messagingErrorIds.HIGH_MESSAGE_SPEED_ERROR),e.xp6(1),e.Q6J("ngSwitchCase",n.messagingErrorIds.PROMO_MSGS_ERROR),e.xp6(1),e.Q6J("ngSwitchCase",n.messagingErrorIds.UNSUBSCRIBE_NOT_ADDED)}}function Ln(o,i){1&o&&e.GkF(0)}function Gn(o,i){if(1&o&&(e.ynx(0),e.YNc(1,Ln,1,0,"ng-container",41),e.BQk()),2&o){e.oxw(2);const r=e.MAs(38);e.xp6(1),e.Q6J("ngTemplateOutlet",r)}}function Jn(o,i){1&o&&e.GkF(0)}function qn(o,i){if(1&o&&(e.ynx(0),e.YNc(1,Jn,1,0,"ng-container",41),e.BQk()),2&o){e.oxw(2);const r=e.MAs(40);e.xp6(1),e.Q6J("ngTemplateOutlet",r)}}function jn(o,i){1&o&&e.GkF(0)}function Qn(o,i){if(1&o&&(e.ynx(0),e.YNc(1,jn,1,0,"ng-container",41),e.BQk()),2&o){e.oxw(2);const r=e.MAs(42);e.xp6(1),e.Q6J("ngTemplateOutlet",r)}}function Bn(o,i){1&o&&e.GkF(0)}function Yn(o,i){if(1&o&&(e.ynx(0),e.YNc(1,Bn,1,0,"ng-container",41),e.BQk()),2&o){e.oxw(2);const r=e.MAs(44);e.xp6(1),e.Q6J("ngTemplateOutlet",r)}}function Hn(o,i){1&o&&e.GkF(0)}function zn(o,i){if(1&o&&(e.ynx(0),e.YNc(1,Hn,1,0,"ng-container",41),e.BQk()),2&o){e.oxw(2);const r=e.MAs(46);e.xp6(1),e.Q6J("ngTemplateOutlet",r)}}function Wn(o,i){if(1&o&&(e.ynx(0,38),e.YNc(1,Gn,2,1,"ng-container",39),e.YNc(2,qn,2,1,"ng-container",39),e.YNc(3,Qn,2,1,"ng-container",39),e.YNc(4,Yn,2,1,"ng-container",39),e.YNc(5,zn,2,1,"ng-container",39),e.BQk()),2&o){const r=e.oxw();let n;e.Q6J("ngSwitch",null==(n=r.errorStore.inprogressError())?null:n.id),e.xp6(1),e.Q6J("ngSwitchCase",r.messagingErrorIds.HIGH_MESSAGE_COUNT_ERROR),e.xp6(1),e.Q6J("ngSwitchCase",r.messagingErrorIds.NEW_WA_NUMBER_ERROR),e.xp6(1),e.Q6J("ngSwitchCase",r.messagingErrorIds.HIGH_MESSAGE_SPEED_ERROR),e.xp6(1),e.Q6J("ngSwitchCase",r.messagingErrorIds.PROMO_MSGS_ERROR),e.xp6(1),e.Q6J("ngSwitchCase",r.messagingErrorIds.UNSUBSCRIBE_NOT_ADDED)}}function Kn(o,i){if(1&o&&(e.TgZ(0,"h2"),e._uU(1,"You have selected "),e.TgZ(2,"strong"),e._uU(3),e.qZA(),e._uU(4," contacts which too high to broadcast."),e.qZA(),e.TgZ(5,"p",42),e._uU(6," Sending messages to too many people at once may get your number banned. "),e.qZA(),e.TgZ(7,"p",43)(8,"i")(9,"strong"),e._uU(10,"Hint:"),e.qZA()(),e._uU(11," Start by messaging a few contacts, then gradually increase over time. "),e.qZA(),e.TgZ(12,"ul",44)(13,"li"),e._uU(14,"Reduce message volume to 500"),e.qZA(),e.TgZ(15,"li"),e._uU(16,"or "),e.TgZ(17,"a",45),e._uU(18,"switch to official API"),e.qZA()()()),2&o){const r=e.oxw();e.xp6(3),e.Oqu(null==r.store.proceesablePhoneData||null==r.store.proceesablePhoneData.phoneData?null:r.store.proceesablePhoneData.phoneData.length)}}function $n(o,i){if(1&o&&(e.TgZ(0,"h2"),e._uU(1),e.qZA(),e.TgZ(2,"p",42),e._uU(3," New numbers get banned really fast on WhatsApp "),e.qZA(),e.TgZ(4,"p",43)(5,"i")(6,"strong"),e._uU(7,"Hint:"),e.qZA()(),e._uU(8," Use an old & active WhatsApp number "),e.qZA()),2&o){const r=e.oxw();e.xp6(1),e.hij("You're now using a new WhatsApp number: ",r.extAuth.currentUser.phoneNumber,".")}}function Vn(o,i){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const r=e.oxw(2);e.xp6(1),e.hij("added ",r.store.waitForMin()," sec time gap")}}function Xn(o,i){1&o&&(e.ynx(0),e._uU(1," in "),e.BQk())}function eo(o,i){if(1&o&&(e.ynx(0),e.YNc(1,Xn,2,0,"ng-container",20),e._uU(2),e.BQk()),2&o){const r=e.oxw(2);e.xp6(1),e.Q6J("ngIf",r.store.waitForMin()),e.xp6(1),e.hij(" batch of ",r.store.waitAfterpeople()," ")}}function to(o,i){1&o&&(e.ynx(0),e._uU(1,", "),e.BQk())}function no(o,i){if(1&o&&(e.ynx(0),e.YNc(1,to,2,0,"ng-container",20),e._uU(2),e.BQk()),2&o){const r=e.oxw(2);e.xp6(1),e.Q6J("ngIf",r.store.waitForMin()||r.store.waitAfterpeople()),e.xp6(1),e.hij(" ",r.store.randomDelay()," random delay between messages ")}}function oo(o,i){1&o&&(e.ynx(0),e._uU(1," no timegap settings "),e.BQk())}function ro(o,i){if(1&o&&(e.TgZ(0,"h2"),e._uU(1," You have "),e.YNc(2,Vn,2,1,"ng-container",20),e.YNc(3,eo,3,2,"ng-container",20),e.YNc(4,no,3,2,"ng-container",20),e.YNc(5,oo,2,0,"ng-container",20),e._uU(6,". "),e.qZA(),e.TgZ(7,"p",42),e._uU(8," WhatsApp algorithm checks for fast automated messages "),e.qZA(),e.TgZ(9,"p",43)(10,"i")(11,"strong"),e._uU(12,"Hint:"),e.qZA()(),e._uU(13," Slow down messaging to mimic human sending "),e.qZA(),e.TgZ(14,"ul",44)(15,"li"),e._uU(16,"Add a 0-10 sec random time gap between messages"),e.qZA(),e.TgZ(17,"li"),e._uU(18,"Send in batches of 50 messages"),e.qZA(),e.TgZ(19,"li"),e._uU(20,"Keep a 10 min gap between batches"),e.qZA()()),2&o){const r=e.oxw();e.xp6(2),e.Q6J("ngIf",r.store.waitForMin()),e.xp6(1),e.Q6J("ngIf",r.store.waitAfterpeople()),e.xp6(1),e.Q6J("ngIf",r.store.randomDelay()),e.xp6(1),e.Q6J("ngIf",!r.store.waitForMin()&&!r.store.waitAfterpeople()&&!r.store.randomDelay())}}function ao(o,i){1&o&&(e.TgZ(0,"h2"),e._uU(1,"Redraft message & make it less promotional"),e.qZA(),e.TgZ(2,"p",42),e._uU(3," WhatsApp algorithm checks for fast automated messages "),e.qZA(),e.TgZ(4,"p",43)(5,"i")(6,"strong"),e._uU(7,"Hint:"),e.qZA()()(),e.TgZ(8,"ul",44)(9,"li"),e._uU(10,"Give a context as to how you found their number"),e.qZA(),e.TgZ(11,"li"),e._uU(12,"Shorten the offer of the message"),e.qZA(),e.TgZ(13,"li"),e._uU(14,"Reframe it like a yes or no question"),e.qZA()())}function io(o,i){1&o&&(e.TgZ(0,"h2"),e._uU(1,"The message you have drafted right now doesn't have a unsubscription option."),e.qZA(),e.TgZ(2,"p",42),e._uU(3," WhatsApp algorithm may ban without this "),e.qZA(),e.TgZ(4,"p",43)(5,"i")(6,"strong"),e._uU(7,"Hint:"),e.qZA()()(),e.TgZ(8,"ul",44)(9,"li"),e._uU(10,"Add a short unsubscription line at the end of message"),e.qZA()())}let so=(()=>{var o;class i{constructor(n,t,a,s,c){this.errorStore=n,this.store=t,this.extAuth=a,this.ui=s,this.log=c,this.errorSegements=G,this.messagingErrorIds=j,this.errorProcessState=M}get isPro(){return this.extAuth.isPro()}onSegmentChange(n){this.errorStore.activeErrorSegment.set(n),this.errorStore.recalculateErrors()}selectError(n){const t=this.errorStore.activeSegmentErrors(),a=t.findIndex(s=>s.id===n);-1!==a&&(t.forEach((s,c)=>{s.errorProcessState===this.errorProcessState.INPROGRESS&&(s.errorProcessState=this.errorProcessState.PENDING)}),t[a].errorProcessState=this.errorProcessState.INPROGRESS,this.errorStore.activeSegmentErrors.set(t))}closeLog(){this.log.log("close_anti_ban_modal")}send(){this.errorStore.nextStep(M.CANCELLED)}}return(o=i).\u0275fac=function(n){return new(n||o)(e.Y36(K),e.Y36(q),e.Y36(Y.a),e.Y36(_e.F),e.Y36(H.m))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-error-resolver"]],decls:47,vars:20,consts:[[1,"errors"],[1,"modal-header"],[1,"flex","a-flex-center"],[1,"modal-title"],[1,"radio-group"],[3,"click"],["type","radio","name","msg-type","checked","",3,"checked"],[1,"custom-radio"],["type","radio","name","msg-type",3,"checked"],["data-dismiss","modal","aria-label","Close","aria-label","Close",1,"close-btn",3,"click"],[1,"modal-body"],[1,"sidebar"],[1,"errors-found"],[1,"error-list"],[3,"active","completed",4,"ngFor","ngForOf"],["class","fix-all",3,"disable-btn","click",4,"ngIf"],[1,"main-content"],[3,"ngTemplateOutlet"],[1,"modal-footer"],["class","btn primary",3,"click",4,"ngIf"],[4,"ngIf"],["errorTitle",""],["errorContent",""],["highMessageCountError",""],["newWANumberError",""],["highMessageSpeedError",""],["promoMsgsError",""],["unsubscribeNotAddedError",""],[1,"cp",3,"click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"fix-all",3,"click"],["class","fa-kit fa-lock ml5 d-flex",4,"ngIf"],["class","loader theme",4,"ngIf"],[1,"fa-kit","fa-ai"],[1,"fa-kit","fa-lock","ml5","d-flex"],[1,"loader","theme"],[1,"btn","primary",3,"click"],[1,"btn","secondary","ml15",3,"click"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[4,"ngTemplateOutlet"],[1,"warning"],[1,"hint"],[1,"recommendations"],["href","#"]],template:function(n,t){if(1&n&&(e.TgZ(0,"div",0)(1,"header",1)(2,"div",2)(3,"span",3),e._uU(4),e.ALo(5,"jtranslate"),e.qZA(),e.TgZ(6,"div",4)(7,"label",5),e.NdJ("click",function(){return t.onSegmentChange(t.errorSegements.PROMOTIONAL_MESSAGE_ERROR)}),e._UZ(8,"input",6)(9,"span",7),e._uU(10),e.ALo(11,"jtranslate"),e.qZA(),e.TgZ(12,"label",5),e.NdJ("click",function(){return t.onSegmentChange(t.errorSegements.UPDATE_MESSAGE_ERROR)}),e._UZ(13,"input",8)(14,"span",7),e._uU(15),e.ALo(16,"jtranslate"),e.qZA()()(),e.TgZ(17,"button",9),e.NdJ("click",function(){return t.closeLog()}),e._uU(18,"\xd7"),e.qZA()(),e.TgZ(19,"div",10)(20,"aside",11)(21,"div",12),e._uU(22),e.ALo(23,"jtranslate"),e.qZA(),e.TgZ(24,"ol",13),e.YNc(25,bn,3,8,"li",14),e.qZA(),e.YNc(26,En,4,5,"button",15),e.qZA(),e.TgZ(27,"section",16)(28,"div"),e.YNc(29,Tn,0,0,"ng-template",17),e.qZA(),e.TgZ(30,"footer",18),e.YNc(31,wn,3,3,"button",19),e.YNc(32,Sn,8,10,"ng-container",20),e.qZA()()()(),e.YNc(33,Un,7,6,"ng-template",null,21,e.W1O),e.YNc(35,Wn,6,6,"ng-template",null,22,e.W1O),e.YNc(37,Kn,19,1,"ng-template",null,23,e.W1O),e.YNc(39,$n,9,1,"ng-template",null,24,e.W1O),e.YNc(41,ro,21,4,"ng-template",null,25,e.W1O),e.YNc(43,ao,15,0,"ng-template",null,26,e.W1O),e.YNc(45,io,11,0,"ng-template",null,27,e.W1O)),2&n){const a=e.MAs(36);let s,c;e.xp6(4),e.Oqu(e.lcZ(5,12,"This message is")),e.xp6(4),e.Q6J("checked",t.errorStore.activeErrorSegment()===t.errorSegements.PROMOTIONAL_MESSAGE_ERROR),e.xp6(2),e.hij(" ",e.lcZ(11,14,"Promotional/Marketing")," "),e.xp6(3),e.Q6J("checked",t.errorStore.activeErrorSegment()===t.errorSegements.UPDATE_MESSAGE_ERROR),e.xp6(2),e.hij(" ",e.lcZ(16,16,"Update/Greeting")," "),e.xp6(7),e.AsE("",null==(s=t.errorStore.activeSegmentErrors())?null:s.length," ",e.lcZ(23,18,"Errors found")," "),e.xp6(3),e.Q6J("ngForOf",t.errorStore.activeSegmentErrors()),e.xp6(1),e.Q6J("ngIf",t.errorStore.activeSegmentErrors()&&(null==(c=t.errorStore.activeSegmentErrors())?null:c.length)),e.xp6(3),e.Q6J("ngTemplateOutlet",a),e.xp6(2),e.Q6J("ngIf",!t.errorStore.inprogressError()),e.xp6(1),e.Q6J("ngIf",t.errorStore.inprogressError())}},dependencies:[l.sg,l.O5,l.tP,l.RF,l.n9,l.ED,oe.Q],styles:['.errors[_ngcontent-%COMP%]{--bg: #fff;--fg: #222;--muted: rgba(0, 0, 0, .4);--border: #ddd;--green: #019F53;--green-light: #ebf6f0;--red: #d93025;--radius: 12px}.errors[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{padding:16px 10px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;position:relative}.errors[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{color:var(--fg);font-size:14px;margin-right:16px}.errors[_ngcontent-%COMP%]   .radio-group[_ngcontent-%COMP%]{display:flex;gap:16px}.errors[_ngcontent-%COMP%]   .radio-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:relative;padding-left:28px;font-size:14px;color:var(--fg);cursor:pointer;-webkit-user-select:none;user-select:none;font-weight:400;margin:0}.errors[_ngcontent-%COMP%]   .radio-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;opacity:0;cursor:pointer}.errors[_ngcontent-%COMP%]   .custom-radio[_ngcontent-%COMP%]{position:absolute;top:1px;left:0;height:18px;width:18px;border:1px solid var(--border);border-radius:50%}.errors[_ngcontent-%COMP%]   .radio-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .custom-radio[_ngcontent-%COMP%]{border-color:var(--green);background:white}.errors[_ngcontent-%COMP%]   .radio-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .custom-radio[_ngcontent-%COMP%]:after{content:"";position:absolute;width:10px;height:10px;background:var(--green);border-radius:50%;top:3px;left:3px}.errors[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{border:none;background:none;font-size:20px;color:var(--muted);cursor:pointer}.errors[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{display:flex;padding:0;gap:24px}.errors[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{width:200px;border-right:1px solid var(--border);display:flex;flex-direction:column;background:#FAFAFA;padding:12px}.errors[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]   .fix-all[_ngcontent-%COMP%]{margin-top:auto;font-size:14px;color:var(--green);background:none;border:none;cursor:pointer;align-items:center;gap:4px;background:white;display:inline-flex;width:max-content;padding:10px;border-radius:4px;border:1px solid rgba(0,0,0,.05);margin-bottom:10px}.errors[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]   .fix-all.disable-btn[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.05);color:#0000004d}.errors[_ngcontent-%COMP%]   .errors-found[_ngcontent-%COMP%]{font-size:14px;font-weight:400;color:var(--fg);margin-bottom:16px}.errors[_ngcontent-%COMP%]   .error-list[_ngcontent-%COMP%]{list-style:none;counter-reset:item;padding:0}.errors[_ngcontent-%COMP%]   .error-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{counter-increment:item;position:relative;padding-left:32px;margin-bottom:16px;font-size:14px;color:var(--muted)}.errors[_ngcontent-%COMP%]   .error-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:counter(item);position:absolute;left:0;top:0;width:24px;height:24px;line-height:24px;text-align:center;border:1px solid var(--border);border-radius:50%;color:var(--muted);display:flex;align-items:center;justify-content:center;font-size:12px}.errors[_ngcontent-%COMP%]   .error-list[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{color:var(--fg);font-weight:500}.errors[_ngcontent-%COMP%]   .error-list[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:before{border-color:var(--muted);color:var(--fg)}.errors[_ngcontent-%COMP%]   .error-list[_ngcontent-%COMP%]   li.completed[_ngcontent-%COMP%]{color:var(--muted)}.errors[_ngcontent-%COMP%]   .error-list[_ngcontent-%COMP%]   li.completed[_ngcontent-%COMP%]:before{border-color:var(--green);color:#fff;background:var(--green)}.errors[_ngcontent-%COMP%]   .fix-all[_ngcontent-%COMP%]{margin-top:auto;font-size:14px;color:var(--green);background:none;border:none;cursor:pointer;padding:8px 0;display:flex;align-items:center;gap:4px}.errors[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;justify-content:space-between;padding-bottom:10px;padding-right:10px}.errors[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;color:var(--fg);margin-bottom:12px;font-weight:300;line-height:1.2}.errors[_ngcontent-%COMP%]   .warning[_ngcontent-%COMP%], .errors[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{font-size:14px;color:var(--muted);margin-bottom:16px}.errors[_ngcontent-%COMP%]   .recommendations[_ngcontent-%COMP%]{list-style:disc;margin-left:16px;font-size:14px}.errors[_ngcontent-%COMP%]   .recommendations[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] + li[_ngcontent-%COMP%]{margin-top:8px}.errors[_ngcontent-%COMP%]   .recommendations[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--green);text-decoration:none}.errors[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{padding:0;border-top:none;display:flex;justify-content:flex-start;margin-top:25px;margin-bottom:10px}.errors[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:14px;padding:10px 20px;border-radius:6px;cursor:pointer;border:1px solid transparent}.errors[_ngcontent-%COMP%]   .btn.primary[_ngcontent-%COMP%]{background:var(--green);color:#fff}.errors[_ngcontent-%COMP%]   .btn.primary.disable-btn[_ngcontent-%COMP%]{background:rgba(0,0,0,.2)!important;box-shadow:0 0 5px #93939340;border-radius:4px;color:#fff!important}.errors[_ngcontent-%COMP%]   .btn.secondary[_ngcontent-%COMP%]{background:#fff;color:var(--fg);border-color:var(--border)}']}),i})();function lo(o,i){1&o&&(e.TgZ(0,"div",10),e._UZ(1,"div",11)(2,"div",12)(3,"div",13)(4,"div",14)(5,"div",15),e.qZA())}function co(o,i){if(1&o&&(e.TgZ(0,"div",16)(1,"pre"),e._uU(2),e.qZA()()),2&o){const r=e.oxw();e.xp6(2),e.Oqu(r.redraftedText)}}function po(o,i){if(1&o){const r=e.EpF();e.TgZ(0,"div",17),e._UZ(1,"div"),e.TgZ(2,"div",18)(3,"button",19),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.keepOriginal())}),e._uU(4," Keep Original "),e.qZA(),e.TgZ(5,"button",20),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.apply())}),e._uU(6," Apply "),e.qZA()()()}}let go=(()=>{var o;class i{constructor(n,t,a,s,c){this.store=n,this.sheet=t,this.userService=a,this.errorStore=s,this.logger=c,this.store.showRedraftModal$.subscribe(()=>{this.redraftMessage()})}redraftMessage(){var n=this;return(0,_.Z)(function*(){n.loading=!0,n.redraftedText=yield n.userService.redraftTextMessage(n.store.message(),n.sheet.columnNames()),n.loading=!1})()}apply(){this.store.message.set(this.redraftedText),this.errorStore.textMsgWhileCalculatingError.set(this.store.message()),this.errorStore.recalculateErrors(),this.logger.log("ai_redrafter",{clicked:"Apply"})}close(){this.logger.log("ai_redrafter",{clicked:"Close"})}keepOriginal(){this.logger.log("ai_redrafter",{clicked:"keep original"}),this.redraftedText=""}}return(o=i).\u0275fac=function(n){return new(n||o)(e.Y36(q),e.Y36(X),e.Y36(ee.KD),e.Y36(K),e.Y36(H.m))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-ai-msg-redrafter"]],decls:13,vars:6,consts:[[1,"ai-redrafter"],[1,"modal-header"],[1,"flex","a-flex-center"],[1,"modal-title"],["data-dismiss","modal","aria-label","Close",1,"close-btn",3,"click"],[1,"modal-body"],[1,"redraft-msg-container"],["class","skeleton",4,"ngIf"],["class","redraft-msg",4,"ngIf"],["class","d-flex mt14",4,"ngIf"],[1,"skeleton"],[1,"skeleton-line",2,"width","60%"],[1,"skeleton-line",2,"width","90%"],[1,"skeleton-line",2,"width","75%"],[1,"skeleton-line",2,"width","85%"],[1,"skeleton-line",2,"width","50%"],[1,"redraft-msg"],[1,"d-flex","mt14"],[1,"d-flex"],["data-dismiss","modal",1,"btn","secondary","mr10",3,"click"],["data-dismiss","modal",1,"btn","primary",3,"click"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"header",1)(2,"div",2)(3,"span",3),e._uU(4),e.ALo(5,"jtranslate"),e.qZA()(),e.TgZ(6,"button",4),e.NdJ("click",function(){return t.close()}),e._uU(7,"\xd7"),e.qZA()(),e.TgZ(8,"div",5)(9,"div",6),e.YNc(10,lo,6,0,"div",7),e.YNc(11,co,3,1,"div",8),e.qZA(),e.YNc(12,po,7,0,"div",9),e.qZA()()),2&n&&(e.xp6(4),e.Oqu(e.lcZ(5,4,"AI Re-drafter")),e.xp6(6),e.Q6J("ngIf",t.loading),e.xp6(1),e.Q6J("ngIf",!t.loading),e.xp6(1),e.Q6J("ngIf",!t.loading))},dependencies:[l.O5,oe.Q],styles:[".errors[_ngcontent-%COMP%]{width:600px;background:#fff;border-radius:8px;box-shadow:0 4px 12px #0000001a;overflow:hidden;font-family:sans-serif}.modal-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:16px;border-bottom:1px solid #ececec}.modal-title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#333}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;line-height:1;cursor:pointer;color:#999}.modal-body[_ngcontent-%COMP%]{padding:16px}.redraft-msg-container[_ngcontent-%COMP%]{padding:18px;border-radius:8px;border:1px solid rgba(0,0,0,.04);background:#FAFAFA}.redraft-msg-container[_ngcontent-%COMP%]   .skeleton[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.redraft-msg-container[_ngcontent-%COMP%]   .skeleton-line[_ngcontent-%COMP%]{height:12px;background-color:#f0f0f0;border-radius:4px}.redraft-msg-container[_ngcontent-%COMP%]   .redraft-msg[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{white-space:break-spaces;padding:0;background:transparent;border:none}.btn.primary[_ngcontent-%COMP%]{background:#019F53;color:#fff}.btn.primary.disable-btn[_ngcontent-%COMP%]{background:rgba(0,0,0,.2)!important;box-shadow:0 0 5px #93939340;border-radius:4px;color:#fff!important}.btn.secondary[_ngcontent-%COMP%]{box-shadow:none;background:#fff;color:#0006;border-color:#ddd;border:1px solid rgba(0,0,0,.05)}"]}),i})();const _o=["fileInput"],mo=["openErrorModalBtn"],uo=["openAiRedraftModalBtn"],ho=["adFrame"];function fo(o,i){if(1&o){const r=e.EpF();e.TgZ(0,"div",18)(1,"ngx-file-drop",19),e.NdJ("onFileDrop",function(t){e.CHM(r);const a=e.oxw();return e.KtG(a.dropped(t))})("onFileOver",function(t){e.CHM(r);const a=e.oxw();return e.KtG(a.fileOver(t))})("onFileLeave",function(t){e.CHM(r);const a=e.oxw();return e.KtG(a.fileLeave(t))}),e.qZA()()}2&o&&(e.xp6(1),e.Q6J("multiple",!0))}function xo(o,i){if(1&o&&(e.TgZ(0,"app-alert",20)(1,"div",21),e._uU(2),e.ALo(3,"jtranslate"),e.TgZ(4,"a",22),e._uU(5," Check campaign "),e.qZA()()()),2&o){const r=e.oxw();e.Q6J("alignment",r.left)("canClose",!1),e.xp6(2),e.hij(" ",e.lcZ(3,4,"Can't edit this as a campaign is currently in progress")," "),e.xp6(2),e.Q6J("routerLink",r.reportLink)}}function Mo(o,i){1&o&&e._UZ(0,"div",23)}function Co(o,i){if(1&o&&e._UZ(0,"iframe",24,25),2&o){const r=e.oxw();e.Q6J("src",r.iframeAdLink,e.uOi)}}const bo=[{path:"",component:(()=>{var o;class i{onDragOver(n){n.preventDefault(),this.showPlaceholder=!0,clearTimeout(this.closeTimeout),this.closeTimeout=setTimeout(()=>{this.showPlaceholder=!1},2e3)}constructor(n,t,a,s,c,p,g,u,C){this.excelService=n,this.uiService=t,this.wabgService=a,this.cd=s,this.extDataService=c,this.store=p,this.errorStore=g,this.logger=u,this.sanitizer=C,this.operations=h.Operation,this.files=[],this.showPlaceholder=!1,this.errorStore.showErrorModal$.subscribe(F=>{this.openErrorModalBtn?.nativeElement?.click()}),this.store.showRedraftModal$.subscribe(()=>{this.openAiRedraftModalBtn?.nativeElement?.click()}),window.addEventListener("message",F=>{console.log("event",F),this.adFrame?.nativeElement&&"setAdvertHeight"===F.data.type&&(this.adFrame.nativeElement.style.height=F.data.height+"px")});const T=new URL(this.extDataService?.appConfig?.bannerIframeLink||""),Z=T.searchParams,y=this.extDataService?.currentUser;Z.set("name",`${y?.name??""}`),Z.set("nocache","1"),Z.set("phonenumber",`${y?.phoneNumber??""}`),Z.set("appversion",`${D.nB.getManifestData()?.version??""}`),this.iframeAdLink=T.toString(),this.iframeAdLink=this.extDataService.appConfig?.bannerEnabled(this.extDataService?.currentUser?.phoneNumber)?this.sanitizer.bypassSecurityTrustResourceUrl(this.iframeAdLink):""}get reportLink(){return`/${O.ME.broadcastReport("")}`}ngOnInit(){var n=this;return(0,_.Z)(function*(){n.liveReport=!(yield n.uiService.getBulkMessageReport())?.isFinished;const a=yield n.wabgService.getFile();n.file=yield n.stringToFile(a),yield n.handleNewFile()})()}stringToFile(n){return new Promise((t,a)=>{try{const s=n;if(s){const{name:c,type:p,data:u}=s;if(u){const C=atob(u),E=[];for(let y=0;y<C.length;y+=1024){const F=C.slice(y,y+1024),S=new Array(F.length);for(let I=0;I<F.length;I++)S[I]=F.charCodeAt(I);E.push(new Uint8Array(S))}const T=new Blob(E,{type:p});t(new File([T],c,{type:p,lastModified:Date.now()}))}else t(null)}else t(null)}catch(s){console.log("error",s),t(null)}})}onFileChange(n){var t=this;return(0,_.Z)(function*(){t.file=n.target.files[0],yield t.handleNewFile(),yield t.saveInCache(),n.target.value="",t.cd.detectChanges()})()}saveInCache(){var n=this;return(0,_.Z)(function*(){const t=new FileReader;t.onload=function(){var a=(0,_.Z)(function*(s){const c=t.result?.split(",")[1],p={name:n.file.name,type:n.file.type,size:n.file.size,data:c};yield n.wabgService.sendFile(p)});return function(s){return a.apply(this,arguments)}}(),t.readAsDataURL(n.file),t.onerror=function(a){console.error("Error reading file:",a)}})()}clearFile(){var n=this;return(0,_.Z)(function*(){yield n.wabgService.sendFile({})})()}handleNewFile(){var n=this;return(0,_.Z)(function*(){if(n.file){const t=yield n.excelService.readExcel(n.file);t.sheetNames.length?n.excelDetails=t:n.uiService.showActionFeedback(L.s.failureAction("No sheet found",`There is no sheet in file ${n.file.name}`))}})()}closeWindow(){window.close()}chooseFile(){this.fileInput?.nativeElement?.click()}dropped(n){var t=this;return(0,_.Z)(function*(){t.showPlaceholder=!1;const a=[];for(const s of n)if(s.fileEntry.isFile){const c=s.fileEntry;yield new Promise((p,g)=>{c.file(u=>{a.push(u),p()},u=>{console.error("Error reading file:",u),g(u)})})}if(1===a.length&&["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel","application/vnd.ms-excel.sheet.macroEnabled.12","application/vnd.openxmlformats-officedocument.spreadsheetml.template","application/vnd.ms-excel.template.macroEnabled.12","application/vnd.ms-excel.addin.macroEnabled.12","application/vnd.ms-excel.sheet.binary.macroEnabled.12"].includes(a[0].type))t.file=a[0],yield t.handleNewFile(),yield t.saveInCache();else{for(let s of a){const c=yield w.M.toBase64(s);t.store.attachments.push(new w.M(s.name,s.size,s.type,c))}t.cd.detectChanges(),a.length>0&&(yield t.store.updateAttachmentsOverall(!0))}})()}fileOver(n){}fileLeave(n){}}return(o=i).\u0275fac=function(n){return new(n||o)(e.Y36(b.xB),e.Y36(b.Fz),e.Y36(b.jI),e.Y36(e.sBO),e.Y36(b.aF),e.Y36(q),e.Y36(K),e.Y36(b.mQ),e.Y36(fe.H7))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-bulk-message"]],viewQuery:function(n,t){if(1&n&&(e.Gf(_o,5),e.Gf(mo,5),e.Gf(uo,5),e.Gf(ho,5)),2&n){let a;e.iGM(a=e.CRH())&&(t.fileInput=a.first),e.iGM(a=e.CRH())&&(t.openErrorModalBtn=a.first),e.iGM(a=e.CRH())&&(t.openAiRedraftModalBtn=a.first),e.iGM(a=e.CRH())&&(t.adFrame=a.first)}},hostBindings:function(n,t){1&n&&e.NdJ("dragover",function(s){return t.onDragOver(s)},!1,e.evT)},decls:33,vars:12,consts:[[1,"p20"],["class","drag-placeholder",4,"ngIf"],[1,"home"],["class","mb10 d-block","tone","warning",3,"alignment","canClose",4,"ngIf"],["class","scrim",4,"ngIf"],["accept",".xls, .xlsx, .csv, .xlsm, .xlsb, .ods","type","file",1,"d-none",3,"change"],["fileInput",""],["tabindex","1",3,"excelDetails","file","chooseFile","clearFile"],["data-toggle","modal","data-target","#errors-modal",2,"display","none"],["openErrorModalBtn",""],["id","errors-modal","tabindex","-1","role","dialog","aria-labelledby","modalLabel","aria-hidden","true",1,"modal"],["role","document",1,"modal-dialog","m0"],[1,"modal-content","p0","m-auto","modal-content","p0"],[1,"modal-body","p0"],["data-toggle","modal","data-target","#ai-redrafter-modal",2,"display","none"],["openAiRedraftModalBtn",""],["id","ai-redrafter-modal","tabindex","-1","role","dialog","aria-labelledby","modalLabel","aria-hidden","true",1,"modal"],["credentialless","","style","border: none; width: 100%;",3,"src",4,"ngIf"],[1,"drag-placeholder"],["dropZoneLabel","Drag and drop files here",1,"fs17","h100p","m-auto","w100p",3,"multiple","onFileDrop","onFileOver","onFileLeave"],["tone","warning",1,"mb10","d-block",3,"alignment","canClose"],["head",""],[1,"text-crm","tul",3,"routerLink"],[1,"scrim"],["credentialless","",2,"border","none","width","100%",3,"src"],["adFrame",""]],template:function(n,t){1&n&&(e._UZ(0,"app-header"),e.TgZ(1,"div",0),e.YNc(2,fo,2,1,"div",1),e.TgZ(3,"div",2),e.YNc(4,xo,6,6,"app-alert",3),e.YNc(5,Mo,1,0,"div",4),e.TgZ(6,"input",5,6),e.NdJ("change",function(s){return t.onFileChange(s)}),e.qZA(),e.TgZ(8,"app-excel-mapping-for-messaging",7),e.NdJ("chooseFile",function(){return t.chooseFile()})("clearFile",function(){return t.clearFile()}),e.qZA(),e.TgZ(9,"div",8,9),e._uU(11),e.ALo(12,"jtranslate"),e.qZA(),e.TgZ(13,"div",10)(14,"div",11)(15,"div",12)(16,"div",13),e._UZ(17,"app-error-resolver"),e.qZA(),e.GkF(18),e.qZA()()(),e.TgZ(19,"div",14,15),e._uU(21),e.ALo(22,"jtranslate"),e.qZA(),e.TgZ(23,"div",16)(24,"div",11)(25,"div",12)(26,"div",13),e._UZ(27,"app-ai-msg-redrafter"),e.qZA()()()(),e._UZ(28,"br"),e.YNc(29,Co,2,1,"iframe",17),e._UZ(30,"br")(31,"br")(32,"br"),e.qZA()()),2&n&&(e.xp6(2),e.Q6J("ngIf",t.showPlaceholder),e.xp6(2),e.Q6J("ngIf",t.liveReport),e.xp6(1),e.Q6J("ngIf",t.liveReport),e.xp6(3),e.Q6J("excelDetails",t.excelDetails)("file",t.file),e.xp6(3),e.hij(" ",e.lcZ(12,8,"Update")," "),e.xp6(10),e.hij(" ",e.lcZ(22,10,"Update")," "),e.xp6(8),e.Q6J("ngIf",t.iframeAdLink))},dependencies:[l.O5,N.rH,ge.w,xe.G,de,fn,so,go,oe.Q],styles:[".home[_ngcontent-%COMP%]{position:relative}.home[_ngcontent-%COMP%]   .scrim[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background:rgba(0,0,0,.0509803922);width:100%;z-index:11}.home[_ngcontent-%COMP%]   app-alert[_ngcontent-%COMP%]{z-index:12;display:block!important;position:relative;background:lightgoldenrodyellow;border-radius:8px}.home[_ngcontent-%COMP%]   .icon-plus[_ngcontent-%COMP%]{background-color:#7e869e29;border-radius:25px;display:inline-flex;transform:rotate(45deg);padding:4px;position:absolute;right:12px;top:13px;z-index:1}.home[_ngcontent-%COMP%]   .upload-file[_ngcontent-%COMP%]{height:400px;border:1px dashed #7C65F1;border-radius:12px;position:relative}.home[_ngcontent-%COMP%]   .upload-file[_ngcontent-%COMP%]   .img-cover[_ngcontent-%COMP%]{display:flex;width:75px;height:75px;padding:10px;flex-direction:column;justify-content:center;align-items:center;gap:10px;background:#c6bdfe;border-radius:51px;margin-bottom:17px}.home[_ngcontent-%COMP%]   .upload-file[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:100%;width:100%;position:absolute;top:0;left:0;opacity:0;cursor:pointer}.home[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-width:626px;margin:-10px auto 3px;display:block;border:1px solid #eee;border-radius:4px;box-shadow:0 1px 1px #0000000f,1px 4px 8px #00000014}.home[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{position:absolute;width:100%;bottom:0}[_nghost-%COMP%]     #errors-modal .modal-backdrop, #ai-redrafter-modal[_ngcontent-%COMP%]   .modal-backdrop[_ngcontent-%COMP%]{pointer-events:none}"]}),i})()}];let vo=(()=>{var o;class i{}return(o=i).\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[N.Bz.forChild(bo),N.Bz]}),i})();var Oo=d(7677),Po=d(6707),Eo=d(9862);const Zo=new e.OlP("ngx-skeleton-loader.config");let No=(()=>{var o;class i{static forRoot(n){return{ngModule:i,providers:[{provide:Zo,useValue:n}]}}}return(o=i).\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[l.ez]}),i})(),Ao=(()=>{var o;class i{}return(o=i).\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[l.uU,q,me,K],imports:[l.ez,v.u5,vo,Oo.e,Eo.JF,Po.Fx,No,we]}),i})()},7825:(V,R,d)=>{d.d(R,{G:()=>b});var l=d(9291),v=d(7228),N=d(9955),_=d(2572),L=d(8043),h=d(6814),O=d(3427),w=d(858),D=d(2991);function e(m,f){if(1&m&&(l.TgZ(0,"div",21),l._uU(1),l.ALo(2,"bigNumber"),l.qZA()),2&m){const x=l.oxw();l.xp6(1),l.Oqu(l.lcZ(2,1,x.replyCount))}}let b=(()=>{var m;class f{constructor(k,P,J){this.extDataService=k,this.waService=P,this.uiService=J,this.userNameIntitals=(0,l.Flj)(()=>this.extDataService.getUserDetails()?.getUserNameIntitals()),this.downloadContactLink=`/${v.ME.downloadContact()}`,this.reportsLink=`/${v.ME.messagingReport()}`,this.helpLink=`/${v.ME.helpLink()}`,this.msgLink=`/${v.ME.bulkMsgs()}`,this.chatbotLink=`/${v.ME.chatbot()}`,this.repliesLink=`/${v.ME.replies()}`,this.userDetailsPage=`/${v.ME.getUserDetails(0)}`}get replyCount(){return this.uiService.getReplyCount()}closeWindow(){this.waService.closeWindow()}}return(m=f).\u0275fac=function(k){return new(k||m)(l.Y36(N.a),l.Y36(_.o),l.Y36(L.F))},m.\u0275cmp=l.Xpm({type:m,selectors:[["app-header"]],decls:41,vars:26,consts:[[1,"header"],[1,"d-flex","a-flex-center"],[1,"fa-kit","fa-chevrons-right","close-icon","mr10",3,"click"],[1,"d-flex","a-flex-center","j-flex-center"],["width","28px","src","../../../assets/icon/logo.png","alt","Logo"],[1,"tabs"],["routerLinkActive","active",1,"wrap","cp","d-flex",3,"routerLink"],[1,"fa-kit","fa-message","mr3","d-flex"],[1,"fa-kit","fa-graph","mr3"],["routerLinkActive","active",1,"wrap","cp","d-flex","p-relative",3,"routerLink"],["class","replyCount",4,"ngIf"],[1,"fa-kit","fa-reply","mr3"],[1,"dropdown","d-flex"],["data-toggle","dropdown",1,"profile-initals","cp"],["aria-labelledby","navbarDropdown",1,"dropdown-menu","r0","l-unset"],["routerLinkActive","active",1,"dropdown-item",3,"routerLink"],[1,"fa-kit","fa-user","mr3"],[1,"dropdown-item",3,"routerLink"],[1,"fa-kit","fa-address-book","mr3"],[1,"dropdown-item",3,"routerLink","click"],[1,"fa-kit","fa-question","mr3"],[1,"replyCount"]],template:function(k,P){1&k&&(l.TgZ(0,"div",0)(1,"div",1)(2,"i",2),l.NdJ("click",function(){return P.closeWindow()}),l.qZA(),l.TgZ(3,"div",3),l._UZ(4,"img",4),l.qZA()(),l.TgZ(5,"div",5)(6,"div",6),l._UZ(7,"i",7),l.TgZ(8,"span"),l._uU(9),l.ALo(10,"jtranslate"),l.qZA()(),l.TgZ(11,"div",6),l._UZ(12,"i",8),l.TgZ(13,"span"),l._uU(14),l.ALo(15,"jtranslate"),l.qZA()(),l.TgZ(16,"div",9),l.YNc(17,e,3,3,"div",10),l._UZ(18,"i",11),l.TgZ(19,"span"),l._uU(20),l.ALo(21,"jtranslate"),l.qZA()()(),l.TgZ(22,"div",12)(23,"div",13),l._uU(24),l.qZA(),l.TgZ(25,"div",14)(26,"div",15),l._UZ(27,"i",16),l.TgZ(28,"span"),l._uU(29),l.ALo(30,"jtranslate"),l.qZA()(),l.TgZ(31,"div",17),l._UZ(32,"i",18),l.TgZ(33,"span"),l._uU(34),l.ALo(35,"jtranslate"),l.qZA()(),l.TgZ(36,"div",19),l.NdJ("click",function(){return P.helpLink}),l._UZ(37,"i",20),l.TgZ(38,"span"),l._uU(39),l.ALo(40,"jtranslate"),l.qZA()()()()()),2&k&&(l.xp6(6),l.Q6J("routerLink",P.msgLink),l.xp6(3),l.Oqu(l.lcZ(10,14,"Send messages")),l.xp6(2),l.Q6J("routerLink",P.reportsLink),l.xp6(3),l.Oqu(l.lcZ(15,16,"Reports")),l.xp6(2),l.Q6J("routerLink",P.repliesLink),l.xp6(1),l.Q6J("ngIf",P.replyCount),l.xp6(3),l.Oqu(l.lcZ(21,18,"Replies")),l.xp6(4),l.hij(" ",P.userNameIntitals()," "),l.xp6(2),l.Q6J("routerLink",P.userDetailsPage),l.xp6(3),l.Oqu(l.lcZ(30,20,"Profile")),l.xp6(2),l.Q6J("routerLink",P.downloadContactLink),l.xp6(3),l.Oqu(l.lcZ(35,22,"Download contacts")),l.xp6(2),l.Q6J("routerLink",P.helpLink),l.xp6(3),l.Oqu(l.lcZ(40,24,"Get support")))},dependencies:[h.O5,O.rH,O.Od,w.Q,D.k],styles:[".header[_ngcontent-%COMP%]{padding:0 24px 0 17px;border-bottom:1px solid rgba(0,0,0,.05);display:flex;justify-content:space-between;height:50px}.header[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%;gap:20px}.header[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]{cursor:pointer;transition:border .2s;border-bottom:2px solid transparent;height:100%;color:#03080299}.header[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .replyCount[_ngcontent-%COMP%]{position:absolute;top:4px;background:red;color:#fff;font-size:10px;border-radius:100px;padding:0 5px;left:100%;transform:translate(-5px)}.header[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]:hover{color:#019f53}.header[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   .wrap.active[_ngcontent-%COMP%]{color:#019f53;border-bottom:2px solid #019F53}.header[_ngcontent-%COMP%]   .profile-initals[_ngcontent-%COMP%]{display:flex;width:28px;height:28px;padding:7px 6px;justify-content:center;align-items:center;gap:2px;border-radius:4px;background:#F3EECE;color:#03080299}.header[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{padding-bottom:0}.header[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{padding:5px 10px;color:#2e2e2e;font-size:13px;cursor:pointer;border-bottom:1px solid rgba(0,0,0,.08)}.header[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover{background:#fafafa}"]}),f})()},2991:(V,R,d)=>{d.d(R,{k:()=>v});var l=d(9291);let v=(()=>{var N;class _{transform(h){if(null==h||isNaN(h))return"";const O=h<0?"-":"",w=h;return w<1e3?O+w.toString():w<1e6?O+this.getFloatingNUmber(w/1e3)+"K":O+this.getFloatingNUmber(w/1e6)+"M"}getFloatingNUmber(h){const O=parseFloat(`${h}`);return parseFloat(""+parseInt(""+100*O)/100)}}return(N=_).\u0275fac=function(h){return new(h||N)},N.\u0275pipe=l.Yjl({name:"bigNumber",type:N,pure:!0}),_})()},4825:(V,R,d)=>{d.d(R,{H:()=>L});var l=d(5592),v=d(2832),N=d(671);function L(h=0,O,w=v.P){let D=-1;return null!=O&&((0,N.K)(O)?w=O:D=O),new l.y(e=>{let b=function _(h){return h instanceof Date&&!isNaN(h)}(h)?+h-w.now():h;b<0&&(b=0);let m=0;return w.schedule(function(){e.closed||(e.next(m++),0<=D?this.schedule(void 0,D):e.complete())},b)})}},2832:(V,R,d)=>{d.d(R,{P:()=>e,z:()=>D});var l=d(5113);class v extends l.w0{constructor(m,f){super()}schedule(m,f=0){return this}}const N={setInterval(b,m,...f){const{delegate:x}=N;return x?.setInterval?x.setInterval(b,m,...f):setInterval(b,m,...f)},clearInterval(b){const{delegate:m}=N;return(m?.clearInterval||clearInterval)(b)},delegate:void 0};var _=d(9039),h=d(4552);class O{constructor(m,f=O.now){this.schedulerActionCtor=m,this.now=f}schedule(m,f=0,x){return new this.schedulerActionCtor(this,m).schedule(x,f)}}O.now=h.l.now;const D=new class w extends O{constructor(m,f=O.now){super(m,f),this.actions=[],this._active=!1}flush(m){const{actions:f}=this;if(this._active)return void f.push(m);let x;this._active=!0;do{if(x=m.execute(m.state,m.delay))break}while(m=f.shift());if(this._active=!1,x){for(;m=f.shift();)m.unsubscribe();throw x}}}(class L extends v{constructor(m,f){super(m,f),this.scheduler=m,this.work=f,this.pending=!1}schedule(m,f=0){var x;if(this.closed)return this;this.state=m;const k=this.id,P=this.scheduler;return null!=k&&(this.id=this.recycleAsyncId(P,k,f)),this.pending=!0,this.delay=f,this.id=null!==(x=this.id)&&void 0!==x?x:this.requestAsyncId(P,this.id,f),this}requestAsyncId(m,f,x=0){return N.setInterval(m.flush.bind(m,this),x)}recycleAsyncId(m,f,x=0){if(null!=x&&this.delay===x&&!1===this.pending)return f;null!=f&&N.clearInterval(f)}execute(m,f){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const x=this._execute(m,f);if(x)return x;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(m,f){let k,x=!1;try{this.work(m)}catch(P){x=!0,k=P||new Error("Scheduled action threw falsy error")}if(x)return this.unsubscribe(),k}unsubscribe(){if(!this.closed){const{id:m,scheduler:f}=this,{actions:x}=f;this.work=this.state=this.scheduler=null,this.pending=!1,(0,_.P)(x,this),null!=m&&(this.id=this.recycleAsyncId(f,m,null)),this.delay=null,super.unsubscribe()}}}),e=D}}]);