"use strict";(self.webpackChunkwasender_chrome_extension=self.webpackChunkwasender_chrome_extension||[]).push([[969],{969:($,M,s)=>{s.r(M),s.d(M,{UserDetailsPageModule:()=>K});var m=s(6814),l=s(6223),c=s(3427),f=s(5861),h=s(3932),g=s(7228),d=s(4631),e=s(9291),O=s(9955),b=s(2572),Z=s(7122),U=s(2639),w=s(8043),A=s(4575),T=s(858);function D(a,r){1&a&&e._UZ(0,"span",8),2&a&&e.Q6J("routerLink","../")}function y(a,r){1&a&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"jtranslate"),e.qZA()),2&a&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Enter valid name")))}function N(a,r){1&a&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"jtranslate"),e.qZA()),2&a&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Enter valid WA number")))}function k(a,r){1&a&&(e.TgZ(0,"span",34),e._uU(1),e.ALo(2,"jtranslate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Please enter your personal number")," "))}function q(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"div",27)(1,"input",35),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw(3);return e.KtG(o.samePhoneAllowed=n)}),e.qZA(),e.TgZ(2,"label",36),e._uU(3),e.ALo(4,"jtranslate"),e.qZA()()}if(2&a){const t=e.oxw(3);e.xp6(1),e.Q6J("ngModel",t.samePhoneAllowed),e.xp6(2),e.hij(" ",e.lcZ(4,2,"My personal and WhatsApp number are same")," ")}}function j(a,r){1&a&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"jtranslate"),e.qZA()),2&a&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Enter valid email")))}function J(a,r){1&a&&e._UZ(0,"div",37)}function F(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"div",10)(1,"div",12)(2,"h1",13)(3,"span"),e._uU(4),e.ALo(5,"jtranslate"),e.qZA()(),e.TgZ(6,"p",14),e._uU(7),e.ALo(8,"jtranslate"),e.qZA(),e.TgZ(9,"div",15)(10,"div",16)(11,"label",17),e._uU(12),e.ALo(13,"jtranslate"),e.qZA(),e.TgZ(14,"input",18),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.details.name=n)})("keyup",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.validateName())}),e.ALo(15,"jtranslate"),e.qZA(),e.YNc(16,y,3,3,"span",7),e.qZA(),e.TgZ(17,"div",16)(18,"label",19),e._uU(19),e.ALo(20,"jtranslate"),e.qZA(),e.TgZ(21,"div",20)(22,"app-dial-code-picker",21),e.NdJ("valueChange",function(n){e.CHM(t);const o=e.oxw(2);return o.details.countryInfo=n,e.KtG(o.validatePhone())}),e.qZA(),e.TgZ(23,"input",22),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.details.number=n)})("keyup",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.validatePhone())}),e.ALo(24,"jtranslate"),e.qZA()(),e.YNc(25,N,3,3,"span",7),e.YNc(26,k,3,3,"span",23),e.YNc(27,q,5,4,"div",24),e.qZA(),e.TgZ(28,"div",16)(29,"label",25),e._uU(30),e.ALo(31,"jtranslate"),e.qZA(),e.TgZ(32,"input",26),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.details.email=n)})("keyup",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.validateEmail())}),e.ALo(33,"jtranslate"),e.qZA(),e.YNc(34,j,3,3,"span",7),e.qZA(),e.TgZ(35,"div",27)(36,"input",28),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.details.getTips=n)}),e.qZA(),e.TgZ(37,"label",29),e._uU(38),e.ALo(39,"jtranslate"),e.qZA()(),e.TgZ(40,"button",30),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.addDetails())}),e._uU(41),e.ALo(42,"jtranslate"),e.YNc(43,J,1,0,"div",31),e.qZA()(),e.TgZ(44,"p",32),e._uU(45),e.ALo(46,"jtranslate"),e.TgZ(47,"a",33),e._uU(48),e.ALo(49,"jtranslate"),e.qZA(),e._uU(50,". "),e.qZA()()()}if(2&a){const t=e.oxw(2);e.xp6(4),e.Oqu(null!=t.originalDetails&&t.originalDetails.number?e.lcZ(5,31,"Profile"):"Sign up"),e.xp6(3),e.Oqu(e.lcZ(8,33,"Free Messaging to contacts on WhatsApp")),e.xp6(3),e.ekj("error",!t.validName),e.xp6(2),e.Oqu(e.lcZ(13,35,"Name")),e.xp6(2),e.Q6J("placeholder",e.lcZ(15,37,"e.g. Aman Gupta"))("ngModel",t.details.name),e.xp6(2),e.Q6J("ngIf",!t.validName),e.xp6(1),e.ekj("error",!t.validPhone||t.phoneNumber===t.extUserPhoneNumber&&!t.samePhoneAllowed),e.xp6(2),e.Oqu(e.lcZ(20,39,"Personal WhatsApp Number")),e.xp6(3),e.Q6J("countryInfo",t.details.countryInfo)("preferredCountry",t.preferredDialCode),e.xp6(1),e.Q6J("placeholder",e.lcZ(24,41,"Enter WA No"))("ngModel",t.details.number),e.xp6(2),e.Q6J("ngIf",!t.validPhone&&t.phoneNumber!==t.extUserPhoneNumber),e.xp6(1),e.Q6J("ngIf",t.phoneNumber===t.extUserPhoneNumber&&!t.samePhoneAllowed),e.xp6(1),e.Q6J("ngIf",t.phoneNumber===t.extUserPhoneNumber),e.xp6(1),e.ekj("error",!t.validEmail),e.xp6(2),e.Oqu(e.lcZ(31,43,"Email")),e.xp6(2),e.Q6J("placeholder",e.lcZ(33,45,"e.g. aman123@gmail.com"))("ngModel",t.details.email),e.xp6(2),e.Q6J("ngIf",!t.validEmail),e.xp6(2),e.Q6J("ngModel",t.details.getTips),e.xp6(2),e.Oqu(e.lcZ(39,47,"Get WhatsApp marketing guidance and tips")),e.xp6(2),e.Q6J("disabled",!t.formValidation||t.loading),e.xp6(1),e.hij(" ",e.lcZ(42,49,"Start Messaging")," "),e.xp6(2),e.Q6J("ngIf",t.loading),e.xp6(2),e.hij(" ",e.lcZ(46,51,"By clicking, you agree to the")," "),e.xp6(3),e.Oqu(e.lcZ(49,53,"usage policy"))}}function I(a,r){if(1&a){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",42),e.NdJ("click",function(){const o=e.CHM(t).$implicit,p=e.oxw(2),u=p.index,x=p.$implicit,_=e.oxw(2);return _.details.faqResponses[u].id=x.id,e.KtG(_.details.faqResponses[u].answer=o.value)}),e._uU(2),e.ALo(3,"jtranslate"),e.qZA(),e.BQk()}if(2&a){const t=r.$implicit,i=e.oxw(2).index,n=e.oxw(2);e.xp6(1),e.ekj("active",n.details.faqResponses[i].answer===t.value),e.xp6(1),e.hij(" ",e.lcZ(3,3,t.value)," ")}}function Q(a,r){1&a&&e._UZ(0,"div",43)}function S(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"div",12)(1,"p",14),e._uU(2),e.ALo(3,"jtranslate"),e.qZA(),e.TgZ(4,"h1",13)(5,"span"),e._uU(6),e.ALo(7,"jtranslate"),e.qZA()(),e.TgZ(8,"p",14),e._uU(9),e.ALo(10,"jtranslate"),e.qZA(),e.TgZ(11,"div",39),e.YNc(12,I,4,5,"ng-container",11),e.TgZ(13,"button",40),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().index,o=e.oxw(2);return e.KtG(o.saveDetails(n+1))}),e._uU(14),e.ALo(15,"jtranslate"),e.YNc(16,Q,1,0,"div",41),e.qZA()()()}if(2&a){const t=e.oxw(),i=t.index,n=t.$implicit,o=e.oxw(2);e.xp6(2),e.AsE("",e.lcZ(3,8,"Question")," ",i+1,""),e.xp6(4),e.Oqu(e.lcZ(7,10,n.title)),e.xp6(3),e.Oqu(e.lcZ(10,12,n.subTitle)),e.xp6(3),e.Q6J("ngForOf",n.options),e.xp6(1),e.Q6J("disabled",!o.details.faqResponses[i].answer||o.loading),e.xp6(1),e.hij(" ",e.lcZ(15,14,"Next Question")," "),e.xp6(2),e.Q6J("ngIf",o.loading)}}function E(a,r){if(1&a&&(e.ynx(0),e.YNc(1,S,17,16,"div",38),e.BQk()),2&a){const t=r.index,i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",i.faqTab===t+1)}}function L(a,r){if(1&a&&(e.ynx(0),e.YNc(1,F,51,55,"div",9),e.TgZ(2,"div",10),e.YNc(3,E,2,1,"ng-container",11),e.qZA(),e.BQk()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.faqTab),e.xp6(2),e.Q6J("ngForOf",t.faqs)}}const Y=[{path:"",component:(()=>{var a;class r{get faqs(){return d.FaqManager.getFaqs()}constructor(i,n,o,p,u,x,_){this.extDataService=i,this.router=n,this.waService=o,this.userService=p,this.route=u,this.log=x,this.uiService=_,this.validEmail=!0,this.validPhone=!0,this.validName=!0,this.samePhoneAllowed=!1;const C=(0,h.S)(`+${i?.currentUser?.phoneNumber}`);C&&(this.preferredDialCode=d.CountryDialCodes.find(P=>P.code===C?.country),this.details=i.getUserDetails()||new d.UserDetails(i?.currentUser?.phoneNumber,"","",i?.currentUser.name,!1,!0,d.UserDetails.getDefaultFaq(),this.preferredDialCode,0),this.originalDetails=d.UserDetails.fromJSON(JSON.parse(JSON.stringify(this.details))),this.route.paramMap.subscribe(P=>{const v=P.get(g.SP.TAB);v&&(parseInt(v)<=this.faqs.length?this.faqTab=parseInt(v):this.router.navigate([g.ME.bulkMsgs()]))}))}reRouteIfValid(){this.details.isValid()&&this.router.navigate([g.ME.bulkMsgs()])}validateForm(){return this.validateName(),this.validatePhone(),this.validateEmail(),this.formValidation}get formValidation(){return this.validName&&this.validEmail&&this.validPhone&&(this.phoneNumber!==this.extUserPhoneNumber||this.samePhoneAllowed)}addDetails(){var i=this;return(0,f.Z)(function*(){i.validateForm()&&i.saveDetails(0)})()}validateEmail(){this.validEmail=/\S+@\S+\.\S+/.test(this.details.email)}get phoneNumber(){return`${this.details.countryInfo.dial_code}${this.details.number}`}get extUserPhoneNumber(){return`${this.extDataService.currentUser.phoneNumber}`}validatePhone(){this.validPhone=!!("XX"===this.details.countryInfo.code?(0,h.S)(`+${this.details.number}`):(0,h.S)(this.phoneNumber,this.details.countryInfo.code))?.isValid()}validateName(){this.validName=!!this.details.name?.trim()?.length}closeWindow(){this.waService.closeWindow()}saveDetails(i){var n=this;return(0,f.Z)(function*(){n.loading=!0,yield n.userService.saveUserDetails(n.details),yield n.extDataService.setExtAuth();const o=n.getChangedDetails();0===i&&!n.originalDetails?.number&&(yield n.handleFirstTimeSignup()),n.logProfileOrFaqEvent(i,o),n.loading=!1,n.navigateAfterSave(i)})()}getChangedDetails(){return Object.keys(this.details).reduce((i,n)=>("object"!=typeof this.details[n]&&this.details[n]!==this.originalDetails[n]&&(i[`${n}-oldValue`]=this.originalDetails[n],i[`${n}-newValue`]=this.details[n]),i),{})}handleFirstTimeSignup(){var i=this;return(0,f.Z)(function*(){try{(yield i.log.getCookies())?.campaignid&&i.log.createLead({fields:i.log.getCookies(),actiontexts:["Signup done",JSON.stringify(i.log.getCookies(),null,2)]})}catch(n){console.error("Error in creating lead",n)}try{i.extDataService.getAuth()?.isPro()||(yield i.userService.activateFreePlan(),setTimeout(()=>{i.uiService.refresh()},0))}catch(n){console.error("Error in activating free plan",n)}})()}logProfileOrFaqEvent(i,n){0===i?this.log.log("profile-event",{...n}):this.log.log(`faq-event-${i}`,{answer:this.details.faqResponses[i-1]?.answer})}navigateAfterSave(i){this.router.navigate(i>=this.faqs.length||-1===this.details.missingFaqAnswerIndex?[g.ME.bulkMsgs()]:[g.ME.getUserDetails(i+1)])}}return(a=r).\u0275fac=function(i){return new(i||a)(e.Y36(O.a),e.Y36(c.F0),e.Y36(b.o),e.Y36(Z.KD),e.Y36(c.gz),e.Y36(U.m),e.Y36(w.F))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-user-details"]],decls:9,vars:2,consts:[[1,"signup-header"],[1,"d-flex","a-flex-center","j-flex-center"],["class","fa-kit fa-chevron-left mr5 cp p5 ml5-minus",3,"routerLink",4,"ngIf"],["width","28px","src","../../assets/icon/logo.png","alt","Logo"],[1,"pl5"],[1,"close-btn",3,"click"],[1,"fa-kit","fa-x","close-icon"],[4,"ngIf"],[1,"fa-kit","fa-chevron-left","mr5","cp","p5","ml5-minus",3,"routerLink"],["class","wa-sender-container",4,"ngIf"],[1,"wa-sender-container"],[4,"ngFor","ngForOf"],[1,"wa-sender-card"],[1,"title"],[1,"subtitle"],[1,"signup-form"],[1,"form-group"],["for","name"],["id","name","name","name","type","text","required","",1,"form-control",3,"placeholder","ngModel","ngModelChange","keyup"],["for","phoneNumber"],[1,"phone-input"],[3,"countryInfo","preferredCountry","valueChange"],["id","phoneNumber","name","phoneNumber","type","tel","required","","autocomplete","off",1,"form-control","phone",3,"placeholder","ngModel","ngModelChange","keyup"],["class","fs12",4,"ngIf"],["class","checkbox-group",4,"ngIf"],["for","email"],["id","email","name","email","type","email","required","",1,"form-control",3,"placeholder","ngModel","ngModelChange","keyup"],[1,"checkbox-group"],["id","marketingTips","name","marketingTips","type","checkbox",3,"ngModel","ngModelChange"],["for","marketingTips",1,"fs12"],["type","submit fs12",1,"btn","btn-submit",3,"disabled","click"],["class","loader theme ml5",4,"ngIf"],[1,"usage-policy"],["href","https://wasender.com/tnc","target","_blank"],[1,"fs12"],["id","samePhoneAllowed","name","samePhoneAllowed","type","checkbox",3,"ngModel","ngModelChange"],["for","samePhoneAllowed"],[1,"loader","theme","ml5"],["class","wa-sender-card",4,"ngIf"],[1,"mt50"],["type","submit",1,"btn","btn-submit","fs12",3,"disabled","click"],["class","ml5 loader theme",4,"ngIf"],[1,"option",3,"click"],[1,"ml5","loader","theme"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,D,1,1,"span",2),e._UZ(3,"img",3),e.TgZ(4,"span",4),e._uU(5,"Sender"),e.qZA()(),e.TgZ(6,"div",5),e.NdJ("click",function(){return n.closeWindow()}),e._UZ(7,"i",6),e.qZA()(),e.YNc(8,L,4,2,"ng-container",7)),2&i&&(e.xp6(2),e.Q6J("ngIf",(null==n.originalDetails?null:n.originalDetails.number)&&0===n.faqTab),e.xp6(6),e.Q6J("ngIf",n.details))},dependencies:[m.sg,m.O5,l.Fj,l.Wl,l.JJ,l.Q7,l.On,c.rH,A.U,T.Q],styles:[".signup-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:16px 32px;border-bottom:1px solid rgba(0,0,0,.05)}.signup-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{cursor:pointer;border-radius:24px;background:#F1F1F1;display:flex;padding:6px;justify-content:center;align-items:center;font-size:12px}.wa-sender-container[_ngcontent-%COMP%]{display:flex;padding-top:100px;justify-content:center}.wa-sender-container[_ngcontent-%COMP%]   .wa-sender-card[_ngcontent-%COMP%]{width:calc(100% - 200px)}.wa-sender-container[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]{border-radius:24px;display:flex;padding:12px 16px;justify-content:center;align-items:center;gap:10px;width:100%;cursor:pointer;border:1px solid rgba(0,0,0,.05);background:#FFF;margin-bottom:12px}.wa-sender-container[_ngcontent-%COMP%]   .option.active[_ngcontent-%COMP%]{border:1px solid #019F53;background:rgba(1,159,83,.05)}.wa-sender-container[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]:hover{background-color:#fafafa}.wa-sender-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#000;font-size:24px;font-weight:500;text-align:center;display:flex;align-items:center;gap:4px;justify-content:center}.wa-sender-container[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{position:absolute;top:0;right:0;margin:32px;cursor:pointer}.wa-sender-container[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#03080299;font-size:14px;font-weight:400;text-align:center}.wa-sender-container[_ngcontent-%COMP%]   .signup-form[_ngcontent-%COMP%]{margin-top:56px}.wa-sender-container[_ngcontent-%COMP%]   .signup-form[_ngcontent-%COMP%]   .form-club[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-start}.wa-sender-container[_ngcontent-%COMP%]   .signup-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:400}.wa-sender-container[_ngcontent-%COMP%]   .signup-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{width:100%}.wa-sender-container[_ngcontent-%COMP%]   .signup-form[_ngcontent-%COMP%]   .form-group.error[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(.phone), .wa-sender-container[_ngcontent-%COMP%]   .signup-form[_ngcontent-%COMP%]   .form-group.error[_ngcontent-%COMP%]   .phone-input[_ngcontent-%COMP%]{border-color:#df0000!important;background:rgba(255,0,0,.1215686275)!important}.wa-sender-container[_ngcontent-%COMP%]   .signup-form[_ngcontent-%COMP%]   .form-group.error[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:red}.wa-sender-container[_ngcontent-%COMP%]   .signup-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#030802;font-size:12px;height:auto}.wa-sender-container[_ngcontent-%COMP%]   .signup-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   app-dial-code-picker[_ngcontent-%COMP%]{border-radius:4px 0 0 4px;background:rgba(3,8,2,.06);display:flex;padding:0 8px}.wa-sender-container[_ngcontent-%COMP%]   .signup-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:#FFF;border:none!important;outline:none!important;width:100%;box-shadow:none!important;padding:0!important;height:auto}.wa-sender-container[_ngcontent-%COMP%]   .signup-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(.phone), .wa-sender-container[_ngcontent-%COMP%]   .signup-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .phone-input[_ngcontent-%COMP%]{display:flex;padding:8px 12px!important;align-self:stretch;border-radius:4px;border:1px solid rgba(3,8,2,.1)!important;background:#FFF!important;width:100%}.wa-sender-container[_ngcontent-%COMP%]   .signup-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .phone-input[_ngcontent-%COMP%]{padding:0!important}.wa-sender-container[_ngcontent-%COMP%]   .signup-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .phone-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:8px 12px!important}.wa-sender-container[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]{width:100%;margin-top:32px;margin-bottom:16px}.wa-sender-container[_ngcontent-%COMP%]   .usage-policy[_ngcontent-%COMP%]{color:#03080299;text-align:center}.wa-sender-container[_ngcontent-%COMP%]   .usage-policy[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#03080299;text-decoration:underline}"]}),r})()}];let G=(()=>{var a;class r{}return(a=r).\u0275fac=function(i){return new(i||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[c.Bz.forChild(Y),c.Bz]}),r})();var H=s(7677);let K=(()=>{var a;class r{}return(a=r).\u0275fac=function(i){return new(i||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[m.ez,l.u5,G,H.e]}),r})()}}]);